(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[752],{5093:(t,e,n)=>{"use strict";n.d(e,{ST:()=>eg});var r=n(7716),s=n(3637),i=n(7574),o=n(4402),a=n(5917),u=n(9126),c=n(7393);function l(){return t=>t.lift(new h)}class h{call(t,e){return e.subscribe(new d(t))}}class d extends c.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var f=n(9761),p=n(8002),g=n(2145),m=n(7519),y=n(5435),v=n(8939),w=n(8583),b=(n(6780),n(4486)),_=n(6304),T=n(5452),I=n(6034),A=n(300),S=n(4685),E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function k(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var x,C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},N=N||{},D=C||self;function Z(){}function O(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function L(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var q="closure_uid_"+(1e9*Math.random()>>>0),R=0;function U(t,e,n){return t.call.apply(t.bind,arguments)}function P(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function M(t,e,n){return(M=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?U:P).apply(null,arguments)}function F(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function V(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return e.prototype[n].apply(t,s)}}function B(){this.s=this.s,this.o=this.o}var j={};B.prototype.s=!1,B.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,q)&&t[q]||(t[q]=++R)}(this);delete j[t]}},B.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var $=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,s="string"==typeof t?t.split(""):t,i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function G(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function K(t){return/^[\s\xa0]*$/.test(t)}var Q,W=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function J(t,e){return-1!=t.indexOf(e)}function Y(t,e){return t<e?-1:t>e?1:0}t:{var X=D.navigator;if(X){var tt=X.userAgent;if(tt){Q=tt;break t}}Q=""}function et(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function nt(t){var e={};for(var n in t)e[n]=t[n];return e}var rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(t,e){for(var n,r,s=1;s<arguments.length;s++){for(n in r=arguments[s])t[n]=r[n];for(var i=0;i<rt.length;i++)n=rt[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}it[" "]=Z;var ot,at,ut=J(Q,"Opera"),ct=J(Q,"Trident")||J(Q,"MSIE"),lt=J(Q,"Edge"),ht=lt||ct,dt=J(Q,"Gecko")&&!(J(Q.toLowerCase(),"webkit")&&!J(Q,"Edge"))&&!(J(Q,"Trident")||J(Q,"MSIE"))&&!J(Q,"Edge"),ft=J(Q.toLowerCase(),"webkit")&&!J(Q,"Edge");function pt(){var t=D.document;return t?t.documentMode:void 0}t:{var gt="",mt=(at=Q,dt?/rv:([^\);]+)(\)|;)/.exec(at):lt?/Edge\/([\d\.]+)/.exec(at):ct?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(at):ft?/WebKit\/(\S+)/.exec(at):ut?/(?:Version)[ \/]?(\S+)/.exec(at):void 0);if(mt&&(gt=mt?mt[1]:""),ct){var yt=pt();if(null!=yt&&yt>parseFloat(gt)){ot=String(yt);break t}}ot=gt}var vt={};var wt=D.document&&ct&&(pt()||parseInt(ot,10))||void 0,bt=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{D.addEventListener("test",Z,e),D.removeEventListener("test",Z,e)}catch(n){}return t}();function _t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Tt(t,e){if(_t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(dt){t:{try{it(e.nodeName);var s=!0;break t}catch(i){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:It[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tt.Z.h.call(this)}}_t.prototype.h=function(){this.defaultPrevented=!0},V(Tt,_t);var It={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var At="closure_listenable_"+(1e6*Math.random()|0),St=0;function Et(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++St,this.ca=this.fa=!1}function kt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function xt(t){this.src=t,this.g={},this.h=0}function Ct(t,e){var n=e.type;if(n in t.g){var r,s=t.g[n],i=$(s,e);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(kt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Nt(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}xt.prototype.add=function(t,e,n,r,s){var i=t.toString();(t=this.g[i])||(t=this.g[i]=[],this.h++);var o=Nt(t,e,r,s);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Et(e,this.src,i,!!r,s)).fa=n,t.push(e)),e};var Dt="closure_lm_"+(1e6*Math.random()|0),Zt={};function Ot(t,e,n,r,s){if(r&&r.once)return qt(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Ot(t,e[i],n,r,s);return null}return n=Bt(n),t&&t[At]?t.N(e,n,L(r)?!!r.capture:!!r,s):Lt(t,e,n,!1,r,s)}function Lt(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=L(s)?!!s.capture:!!s,a=Ft(t);if(a||(t[Dt]=a=new xt(t)),(n=a.add(e,n,r,o,i)).proxy)return n;if(r=function(){var t=Mt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)bt||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Pt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function qt(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)qt(t,e[i],n,r,s);return null}return n=Bt(n),t&&t[At]?t.O(e,n,L(r)?!!r.capture:!!r,s):Lt(t,e,n,!0,r,s)}function Rt(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Rt(t,e[i],n,r,s);else r=L(r)?!!r.capture:!!r,n=Bt(n),t&&t[At]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Nt(i=t.g[e],n,r,s))&&(kt(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete t.g[e],t.h--))):t&&(t=Ft(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Nt(e,n,r,s)),(n=-1<t?e[t]:null)&&Ut(n))}function Ut(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[At])Ct(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ft(e))?(Ct(n,t),0==n.h&&(n.src=null,e[Dt]=null)):kt(t)}}}function Pt(t){return t in Zt?Zt[t]:Zt[t]="on"+t}function Mt(t,e){if(t.ca)t=!0;else{e=new Tt(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ut(t),t=n.call(r,e)}return t}function Ft(t){return(t=t[Dt])instanceof xt?t:null}var Vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bt(t){return"function"==typeof t?t:(t[Vt]||(t[Vt]=function(e){return t.handleEvent(e)}),t[Vt])}function jt(){B.call(this),this.i=new xt(this),this.P=this,this.I=null}function $t(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new _t(e,t);else if(e instanceof _t)e.target=e.target||t;else{var s=e;st(e=new _t(r,t),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=zt(o,r,!0,e)&&s}if(s=zt(o=e.g=t,r,!0,e)&&s,s=zt(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=zt(o=e.g=n[i],r,!1,e)&&s}function zt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ct(t.i,o),s=!1!==a.call(u,r)&&s}}return s&&!r.defaultPrevented}V(jt,B),jt.prototype[At]=!0,jt.prototype.removeEventListener=function(t,e,n,r){Rt(this,t,e,n,r)},jt.prototype.M=function(){if(jt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)kt(n[r]);delete e.g[t],e.h--}}this.I=null},jt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},jt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Gt=D.JSON.stringify;function Ht(){var t=ee,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Kt,Qt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Wt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Wt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new Jt},function(t){return t.reset()}),Jt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Yt(t){D.setTimeout(function(){throw t},0)}function Xt(t,e){Kt||function(){var t=D.Promise.resolve(void 0);Kt=function(){t.then(ne)}}(),te||(Kt(),te=!0),ee.add(t,e)}var te=!1,ee=new Qt;function ne(){for(var t;t=Ht();){try{t.h.call(t.g)}catch(n){Yt(n)}var e=Wt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}te=!1}function re(t,e){jt.call(this),this.h=t||1,this.g=e||D,this.j=M(this.kb,this),this.l=Date.now()}function se(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ie(t,e,n){if("function"==typeof t)n&&(t=M(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=M(t.handleEvent,t)}return 2147483647<Number(e)?-1:D.setTimeout(t,e||0)}function oe(t){t.g=ie(function(){t.g=null,t.i&&(t.i=!1,oe(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}V(re,jt),(x=re.prototype).da=!1,x.S=null,x.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$t(this,"tick"),this.da&&(se(this),this.start()))}},x.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},x.M=function(){re.Z.M.call(this),se(this),delete this.g};var ae=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:oe(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(B);function ue(t){B.call(this),this.h=t,this.g={}}V(ue,B);var ce=[];function le(t,e,n,r){Array.isArray(n)||(n&&(ce[0]=n.toString()),n=ce);for(var s=0;s<n.length;s++){var i=Ot(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function he(t){et(t.g,function(t,e){this.g.hasOwnProperty(e)&&Ut(t)},t),t.g={}}function de(){this.g=!0}function fe(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return Gt(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ue.prototype.M=function(){ue.Z.M.call(this),he(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},de.prototype.Aa=function(){this.g=!1},de.prototype.info=function(){};var pe={},ge=null;function me(){return ge=ge||new jt}function ye(t){_t.call(this,pe.Ma,t)}function ve(t){var e=me();$t(e,new ye(e,t))}function we(t,e){_t.call(this,pe.STAT_EVENT,t),this.stat=e}function be(t){var e=me();$t(e,new we(e,t))}function _e(t,e){_t.call(this,pe.Na,t),this.size=e}function Te(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){t()},e)}pe.Ma="serverreachability",V(ye,_t),pe.STAT_EVENT="statevent",V(we,_t),pe.Na="timingevent",V(_e,_t);var Ie={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ae={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Se(){}function Ee(){}Se.prototype.h=null;var ke,xe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ce(){_t.call(this,"d")}function Ne(){_t.call(this,"c")}function De(){}function Ze(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ue(this),this.P=Le,this.W=new re(t=ht?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}V(Ce,_t),V(Ne,_t),V(De,Se),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},ke=new De;var Le=45e3,qe={},Re={};function Ue(t,e,n){t.K=1,t.v=an(tn(e)),t.s=n,t.U=!0,Pe(t,null)}function Pe(t,e){t.F=Date.now(),Be(t),t.A=tn(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),bn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Oe,t.g=_r(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ae(M(t.Ia,t,t.g),t.O)),le(t.V,t.g,"readystatechange",t.gb),e=t.H?nt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ve(1),function(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Me(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Fe(t,e,n){for(var r,s=!0;!t.I&&t.C<n.length;){if((r=Ve(t,n))==Re){4==e&&(t.o=4,be(14),s=!1),fe(t.j,t.m,null,"[Incomplete Response]");break}if(r==qe){t.o=4,be(15),fe(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}fe(t.j,t.m,r,null),He(t,r)}Me(t)&&r!=Re&&r!=qe&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,be(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),fr(e),e.L=!0,be(11))):(fe(t.j,t.m,n,"[Invalid Chunked Response]"),Ge(t),ze(t))}function Ve(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Re:(n=Number(e.substring(n,r)),isNaN(n)?qe:(r+=1)+n>e.length?Re:(e=e.substr(r,n),t.C=r+n,e))}function Be(t){t.Y=Date.now()+t.P,je(t,t.P)}function je(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Te(M(t.eb,t),e)}function $e(t){t.B&&(D.clearTimeout(t.B),t.B=null)}function ze(t){0==t.l.G||t.I||mr(t.l,t)}function Ge(t){$e(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,se(t.W),he(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function He(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||kn(n.i,t)))if(n.I=t.N,!t.J&&kn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;gr(n),sr(n)}dr(n),be(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=Te(M(n.ab,n),6e3));if(1>=En(n.i)&&n.ka){try{n.ka()}catch(i){}n.ka=void 0}}else vr(n,11)}else if((t.J||n.g==t)&&gr(n),!K(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){var i=s[e];if(n.U=i[0],i=i[1],2==n.G)if("c"==i[0]){n.J=i[1],n.la=i[2];var o=i[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=i[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=i[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(J(l,"spdy")||J(l,"quic")||J(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(xn(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,on(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=br(r,r.H?r.la:null,r.W),f.J){Cn(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&($e(p),Be(p)),r.g=f}else hr(r);0<n.l.length&&ar(n)}else"stop"!=i[0]&&"close"!=i[0]||vr(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?vr(n,7):rr(n):"noop"!=i[0]&&n.j&&n.j.wa(i),n.A=0)}ve(4)}catch(i){}}function Ke(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(O(t)||"string"==typeof t)z(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(O(t)||"string"==typeof t){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;s=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(O(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function Qe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function We(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Je(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)Je(s,r=t.g[e])||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}function Je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(x=Ze.prototype).setTimeout=function(t){this.P=t},x.gb=function(t){t=t.target;var e=this.L;e&&3==Yn(t)?e.l():this.Ia(t)},x.Ia=function(t){try{if(t==this.g)t:{var e=Yn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||ht||this.g&&(this.h.h||this.g.ga()||Xn(this.g)))){this.I||4!=e||7==n||ve(8==n||0>=r?3:2),$e(this);var s=this.g.ba();this.N=s;e:if(Me(this)){var i=Xn(this.g);t="";var o=i.length,a=4==Yn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ge(this),ze(this);var u="";break e}this.h.i=new D.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(i[n],{stream:a&&n==o-1});i.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==s,function(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+i+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,s),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(c)){var h=c;break e}}h=null}if(!(s=h)){this.i=!1,this.o=3,be(12),Ge(this),ze(this);break t}fe(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,He(this,s)}this.U?(Fe(this,e,u),ht&&this.i&&3==e&&(le(this.V,this.W,"tick",this.fb),this.W.start())):(fe(this.j,this.m,u,null),He(this,u)),4==e&&Ge(this),this.i&&!this.I&&(4==e?mr(this.l,this):(this.i=!1,Be(this)))}else 400==s&&0<u.indexOf("Unknown SID")?(this.o=3,be(12)):(this.o=0,be(13)),Ge(this),ze(this)}}}catch(e){}},x.fb=function(){if(this.g){var t=Yn(this.g),e=this.g.ga();this.C<e.length&&($e(this),Fe(this,t,e),this.i&&4!=t&&Be(this))}},x.cancel=function(){this.I=!0,Ge(this)},x.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ve(3),be(17)),Ge(this),this.o=2,ze(this)):je(this,this.Y-t)},(x=Qe.prototype).R=function(){We(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},x.T=function(){return We(this),this.g.concat()},x.get=function(t,e){return Je(this.h,t)?this.h[t]:e},x.set=function(t,e){Je(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},x.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};var Ye=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xe(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Xe){this.g=void 0!==e?e:t.g,en(this,t.j),this.s=t.s,nn(this,t.i),rn(this,t.m),this.l=t.l,e=t.h;var n=new mn;n.i=e.i,e.g&&(n.g=new Qe(e.g),n.h=e.h),sn(this,n),this.o=t.o}else t&&(n=String(t).match(Ye))?(this.g=!!e,en(this,n[1]||"",!0),this.s=un(n[2]||""),nn(this,n[3]||"",!0),rn(this,n[4]),this.l=un(n[5]||"",!0),sn(this,n[6]||"",!0),this.o=un(n[7]||"")):(this.g=!!e,this.h=new mn(null,this.g))}function tn(t){return new Xe(t)}function en(t,e,n){t.j=n?un(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function nn(t,e,n){t.i=n?un(e,!0):e}function rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sn(t,e,n){e instanceof mn?(t.h=e,function(t,e){e&&!t.j&&(yn(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(vn(this,e),bn(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=cn(e,pn)),t.h=new mn(e,t.g))}function on(t,e,n){t.h.set(e,n)}function an(t){return on(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ln),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ln(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Xe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(cn(e,hn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(cn(e,hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(cn(n,"/"==n.charAt(0)?fn:dn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",cn(n,gn)),t.join("")};var hn=/[#\/\?@]/g,dn=/[#\?:]/g,fn=/[#\?]/g,pn=/[#\?@]/g,gn=/#/g;function mn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function yn(t){t.g||(t.g=new Qe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function vn(t,e){yn(t),e=_n(t,e),Je(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Je((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&We(t)))}function wn(t,e){return yn(t),e=_n(t,e),Je(t.g.h,e)}function bn(t,e,n){vn(t,e),0<n.length&&(t.i=null,t.g.set(_n(t,e),H(n)),t.h+=n.length)}function _n(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(x=mn.prototype).add=function(t,e){yn(this),this.i=null,t=_n(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},x.forEach=function(t,e){yn(this),this.g.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},x.T=function(){yn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n},x.R=function(t){yn(this);var e=[];if("string"==typeof t)wn(this,t)&&(e=G(e,this.g.get(_n(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},x.set=function(t,e){return yn(this),this.i=null,wn(this,t=_n(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},x.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},x.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),t.push(o)}}return this.i=t.join("&")};var Tn=function(t,e){this.h=t,this.g=e};function In(t){this.l=t||An,t=D.PerformanceNavigationTiming?0<(t=D.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(D.g&&D.g.Ea&&D.g.Ea()&&D.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var An=10;function Sn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function En(t){return t.h?1:t.g?t.g.size:0}function kn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function xn(t,e){t.g?t.g.add(e):t.h=e}function Cn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Nn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var s=k(t.g.values()),i=s.next();!i.done;i=s.next())r=r.concat(i.value.D)}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}return H(t.i)}function Dn(){}function Zn(){this.g=new Dn}function On(t,e,n){var r=n||"";try{Ke(t,function(t,n){var s=t;L(t)&&(s=Gt(t)),e.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ln(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(i){}}function qn(t){this.l=t.$b||null,this.j=t.ib||!1}function Rn(t,e){jt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Un,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}In.prototype.cancel=function(){var t,e;if(this.i=Nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=k(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Dn.prototype.stringify=function(t){return D.JSON.stringify(t,void 0)},Dn.prototype.parse=function(t){return D.JSON.parse(t,void 0)},V(qn,Se),qn.prototype.g=function(){return new Rn(this.l,this.j)},qn.prototype.i=function(t){return function(){return t}}({}),V(Rn,jt);var Un=0;function Pn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Mn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fn(t)}function Fn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(x=Rn.prototype).open=function(t,e){if(this.readyState!=Un)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fn(this)},x.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||D).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mn(this)),this.readyState=Un},x.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==D.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},x.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Mn(this):Fn(this),3==this.readyState&&Pn(this)}},x.Ua=function(t){this.g&&(this.response=this.responseText=t,Mn(this))},x.Ta=function(t){this.g&&(this.response=t,Mn(this))},x.ha=function(){this.g&&Mn(this)},x.setRequestHeader=function(t,e){this.v.append(t,e)},x.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},x.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Rn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Vn=D.JSON.parse;function Bn(t){jt.call(this),this.headers=new Qe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jn,this.K=this.L=!1}V(Bn,jt);var jn="",$n=/^https?$/i,zn=["POST","PUT"];function Gn(t){return"content-type"==t.toLowerCase()}function Hn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Kn(t),Wn(t)}function Kn(t){t.D||(t.D=!0,$t(t,"complete"),$t(t,"error"))}function Qn(t){if(t.h&&void 0!==N&&(!t.C[1]||4!=Yn(t)||2!=t.ba()))if(t.v&&4==Yn(t))ie(t.Fa,0,t);else if($t(t,"readystatechange"),4==Yn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var s;if(s=0===n){var i=String(t.H).match(Ye)[1]||null;if(!i&&D.self&&D.self.location){var o=D.self.location.protocol;i=o.substr(0,o.length-1)}s=!$n.test(i?i.toLowerCase():"")}e=s}if(e)$t(t,"complete"),$t(t,"success");else{t.m=6;try{var a=2<Yn(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Kn(t)}}finally{Wn(t)}}}function Wn(t,e){if(t.g){Jn(t);var n=t.g,r=t.C[0]?Z:null;t.g=null,t.C=null,e||$t(t,"ready");try{n.onreadystatechange=r}catch(s){}}}function Jn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(D.clearTimeout(t.A),t.A=null)}function Yn(t){return t.g?t.g.readyState:0}function Xn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case jn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return et(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):on(t,e,n))}function er(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nr(t){this.za=0,this.l=[],this.h=new de,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=er("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=er("baseRetryDelayMs",5e3,t),this.$a=er("retryDelaySeedMs",1e4,t),this.Ya=er("forwardChannelMaxRetries",2,t),this.ra=er("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new In(t&&t.concurrentRequestLimit),this.Ca=new Zn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function rr(t){if(ir(t),3==t.G){var e=t.V++,n=tn(t.F);on(n,"SID",t.J),on(n,"RID",e),on(n,"TYPE","terminate"),cr(t,n),(e=new Ze(t,t.h,e,void 0)).K=2,e.v=an(tn(n)),n=!1,D.navigator&&D.navigator.sendBeacon&&(n=D.navigator.sendBeacon(e.v.toString(),"")),!n&&D.Image&&((new Image).src=e.v,n=!0),n||(e.g=_r(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Be(e)}wr(t)}function sr(t){t.g&&(fr(t),t.g.cancel(),t.g=null)}function ir(t){sr(t),t.u&&(D.clearTimeout(t.u),t.u=null),gr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&D.clearTimeout(t.m),t.m=null)}function or(t,e){t.l.push(new Tn(t.Za++,e)),3==t.G&&ar(t)}function ar(t){Sn(t.i)||t.m||(t.m=!0,Xt(t.Ha,t),t.C=0)}function ur(t,e){var n;n=e?e.m:t.V++;var r=tn(t.F);on(r,"SID",t.J),on(r,"RID",n),on(r,"AID",t.U),cr(t,r),t.o&&t.s&&tr(r,t.o,t.s),n=new Ze(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=lr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),xn(t.i,n),Ue(n,r,e)}function cr(t,e){t.j&&Ke({},function(t,n){on(e,n,t)})}function lr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?M(t.j.Oa,t.j,t):null;t:for(var s=t.l,i=-1;;){var o=["count="+n];-1==i?0<n?o.push("ofs="+(i=s[0].h)):i=0:o.push("ofs="+i);for(var a=!0,u=0;u<n;u++){var c=s[u].h,l=s[u].g;if(0>(c-=i))i=Math.max(0,s[u].h-100),a=!1;else try{On(l,o,"req"+c+"_")}catch(Jr){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function hr(t){t.g||t.u||(t.Y=1,Xt(t.Ga,t),t.A=0)}function dr(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Te(M(t.Ga,t),yr(t,t.A)),t.A++,0))}function fr(t){null!=t.B&&(D.clearTimeout(t.B),t.B=null)}function pr(t){t.g=new Ze(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=tn(t.oa);on(e,"RID","rpc"),on(e,"SID",t.J),on(e,"CI",t.N?"0":"1"),on(e,"AID",t.U),cr(t,e),on(e,"TYPE","xmlhttp"),t.o&&t.s&&tr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=an(tn(e)),n.s=null,n.U=!0,Pe(n,t)}function gr(t){null!=t.v&&(D.clearTimeout(t.v),t.v=null)}function mr(t,e){var n=null;if(t.g==e){gr(t),fr(t),t.g=null;var r=2}else{if(!kn(t.i,e))return;n=e.D,Cn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;$t(r=me(),new _e(r,n,e,s)),ar(t)}else hr(t);else if(3==(s=e.o)||0==s&&0<t.I||!(1==r&&function(t,e){return!(En(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Te(M(t.Ha,t,e),yr(t,t.C)),t.C++,0)))}(t,e)||2==r&&dr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:vr(t,5);break;case 4:vr(t,10);break;case 3:vr(t,6);break;default:vr(t,2)}}function yr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function vr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=M(t.jb,t);n||(n=new Xe("//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||en(n,"https"),an(n)),function(t,e){var n=new de;if(D.Image){var r=new Image;r.onload=F(Ln,n,r,"TestLoadImage: loaded",!0,e),r.onerror=F(Ln,n,r,"TestLoadImage: error",!1,e),r.onabort=F(Ln,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=F(Ln,n,r,"TestLoadImage: timeout",!1,e),D.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else be(2);t.G=0,t.j&&t.j.va(e),wr(t),ir(t)}function wr(t){t.G=0,t.I=-1,t.j&&(0==Nn(t.i).length&&0==t.l.length||(t.i.i.length=0,H(t.l),t.l.length=0),t.j.ua())}function br(t,e,n){var r=function(t){return t instanceof Xe?tn(t):new Xe(t,void 0)}(n);if(""!=r.i)e&&nn(r,e+"."+r.i),rn(r,r.m);else{var s=D.location;r=function(t,e,n,r){var s=new Xe(null,void 0);return t&&en(s,t),e&&nn(s,e),n&&rn(s,n),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&et(t.aa,function(t,e){on(r,e,t)}),n=t.sa,(e=t.D)&&n&&on(r,e,n),on(r,"VER",t.ma),cr(t,r),r}function _r(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(n&&t.Ba&&!t.qa?new qn({ib:!0}):t.qa)).L=t.H,e}function Tr(){}function Ir(){if(ct&&!(10<=Number(wt)))throw Error("Environmental error: no available transport.")}function Ar(t,e){jt.call(this),this.g=new nr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!K(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!K(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new kr(this)}function Sr(t){Ce.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Er(){Ne.call(this),this.status=1}function kr(t){this.g=t}(x=Bn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ke.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:ke),this.g.onreadystatechange=M(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){return void Hn(this,i)}t=n||"";var s=new Qe(this.headers);r&&Ke(r,function(t,e){s.set(e,t)}),r=function(t){t:{for(var e=Gn,n=t.length,r="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(s.T()),n=D.FormData&&t instanceof D.FormData,!(0<=$(zn,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jn(this),0<this.B&&((this.K=function(t){return ct&&function(){return t=vt,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=W(String(ot)).split("."),n=W("9").split("."),r=Math.max(e.length,n.length),s=0;0==t&&s<r;s++){var i=e[s]||"",o=n[s]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;t=Y(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||Y(0==i[2].length,0==o[2].length)||Y(i[2],o[2]),i=i[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=M(this.pa,this)):this.A=ie(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Hn(this,i)}},x.pa=function(){void 0!==N&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))},x.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$t(this,"complete"),$t(this,"abort"),Wn(this))},x.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wn(this,!0)),Bn.Z.M.call(this)},x.Fa=function(){this.s||(this.F||this.v||this.l?Qn(this):this.cb())},x.cb=function(){Qn(this)},x.ba=function(){try{return 2<Yn(this)?this.g.status:-1}catch(at){return-1}},x.ga=function(){try{return this.g?this.g.responseText:""}catch(at){return""}},x.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Vn(e)}},x.Da=function(){return this.m},x.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(x=nr.prototype).ma=8,x.G=1,x.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},x.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Ze(this,this.h,t,void 0),n=this.s;if(this.P&&(n?st(n=nt(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,s=0;s<this.l.length;s++){var i=this.l[s];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=s;break t}if(4096===r||s===this.l.length-1){r=s+1;break t}}r=1e3}else r=1e3;r=lr(this,e,r),on(s=tn(this.F),"RID",t),on(s,"CVER",22),this.D&&on(s,"X-HTTP-Session-Id",this.D),cr(this,s),this.o&&n&&tr(s,this.o,n),xn(this.i,e),this.Ra&&on(s,"TYPE","init"),this.ja?(on(s,"$req",r),on(s,"SID","null"),e.$=!0,Ue(e,s,null)):Ue(e,s,r),this.G=2}}else 3==this.G&&(t?ur(this,t):0==this.l.length||Sn(this.i)||ur(this))},x.Ga=function(){if(this.u=null,pr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Te(M(this.bb,this),t)}},x.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,be(10),sr(this),pr(this))},x.ab=function(){null!=this.v&&(this.v=null,sr(this),dr(this),be(19))},x.jb=function(t){t?(this.h.info("Successfully pinged google.com"),be(2)):(this.h.info("Failed to ping google.com"),be(1))},(x=Tr.prototype).xa=function(){},x.wa=function(){},x.va=function(){},x.ua=function(){},x.Oa=function(){},Ir.prototype.g=function(t,e){return new Ar(t,e)},V(Ar,jt),Ar.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Xt(M(t.hb,t,e))),be(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=br(t,null,t.W),ar(t)},Ar.prototype.close=function(){rr(this.g)},Ar.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,or(this.g,e)}else this.v?((e={}).__data__=Gt(t),or(this.g,e)):or(this.g,t)},Ar.prototype.M=function(){this.g.j=null,delete this.j,rr(this.g),delete this.g,Ar.Z.M.call(this)},V(Sr,Ce),V(Er,Ne),V(kr,Tr),kr.prototype.xa=function(){$t(this.g,"a")},kr.prototype.wa=function(t){$t(this.g,new Sr(t))},kr.prototype.va=function(t){$t(this.g,new Er(t))},kr.prototype.ua=function(){$t(this.g,"b")},Ir.prototype.createWebChannel=Ir.prototype.g,Ar.prototype.send=Ar.prototype.u,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Ae.COMPLETE="complete",Ee.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",jt.prototype.listen=jt.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var xr=Ie,Cr=Ae,Nr=pe,Dr=qn,Zr=Ee,Or=Bn;class Lr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let qr="9.0.2";const Rr=new A.Yd("@firebase/firestore");function Ur(){return Rr.logLevel}function Pr(t,...e){if(Rr.logLevel<=A.in.DEBUG){const n=e.map(Vr);Rr.debug(`Firestore (${qr}): ${t}`,...n)}}function Mr(t,...e){if(Rr.logLevel<=A.in.ERROR){const n=e.map(Vr);Rr.error(`Firestore (${qr}): ${t}`,...n)}}function Fr(t,...e){if(Rr.logLevel<=A.in.WARN){const n=e.map(Vr);Rr.warn(`Firestore (${qr}): ${t}`,...n)}}function Vr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Br(t="Unexpected state"){const e=`FIRESTORE (${qr}) INTERNAL ASSERTION FAILED: `+t;throw Mr(e),new Error(e)}function jr(t,e){t||Br()}function $r(t,e){return t}const zr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gr extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Kr{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class Qr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Lr.UNAUTHENTICATED))}shutdown(){}}class Wr{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Jr{constructor(t){this.t=t,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var n=this;let r=this.i;const s=t=>this.i!==r?(r=this.i,e(t)):Promise.resolve();let i=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hr,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const e=i;t.enqueueRetryable((0,_.Z)(function*(){yield e.promise,yield s(n.currentUser)}))},a=t=>{Pr("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(t=>a(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(Pr("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hr)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(Pr("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(jr("string"==typeof e.accessToken),new Kr(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return jr(null===t||"string"==typeof t),new Lr(t)}}class Yr{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=Lr.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class Xr{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Yr(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ts{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}ts.T=-1;class ns{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=es(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function rs(t,e){return t<e?-1:t>e?1:0}function ss(t,e,n){return t.length===e.length&&t.every((t,r)=>n(t,e[r]))}function is(t){return t+"\0"}class os{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return os.fromMillis(Date.now())}static fromDate(t){return os.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new os(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rs(this.nanoseconds,t.nanoseconds):rs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class as{constructor(t){this.timestamp=t}static fromTimestamp(t){return new as(t)}static min(){return new as(new os(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function us(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ls(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class hs{constructor(t,e,n){void 0===e?e=0:e>t.length&&Br(),void 0===n?n=t.length-e:n>t.length-e&&Br(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===hs.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof hs?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),s=e.get(r);if(n<s)return-1;if(n>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ds extends hs{construct(t,e,n){return new ds(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Gr(zr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new ds(e)}static emptyPath(){return new ds([])}}const fs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends hs{construct(t,e,n){return new ps(t,e,n)}static isValidIdentifier(t){return fs.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ps(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Gr(zr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let i=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Gr(zr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Gr(zr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(i=!i,r++):"."!==e||i?(n+=e,r++):(s(),r++)}if(s(),i)throw new Gr(zr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ps(e)}static emptyPath(){return new ps([])}}class gs{constructor(t){this.fields=t,t.sort(ps.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ss(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class ms{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new ms(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new ms(e)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const ys=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(jr(!!t),"string"==typeof t){let e=0;const n=ys.exec(t);if(jr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ws(t.seconds),nanos:ws(t.nanos)}}function ws(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function bs(t){return"string"==typeof t?ms.fromBase64String(t):ms.fromUint8Array(t)}function _s(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ts(t){const e=t.mapValue.fields.__previous_value__;return _s(e)?Ts(e):e}function Is(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new os(e.seconds,e.nanos)}function As(t){return null==t}function Ss(t){return 0===t&&1/t==-1/0}function Es(t){return"number"==typeof t&&Number.isInteger(t)&&!Ss(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class ks{constructor(t){this.path=t}static fromPath(t){return new ks(ds.fromString(t))}static fromName(t){return new ks(ds.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===ds.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return ds.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ks(new ds(t.slice()))}}function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_s(t)?4:10:Br()}function Cs(t,e){const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Is(t).isEqual(Is(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=vs(t.timestampValue),r=vs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return bs(t.bytesValue).isEqual(bs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ws(t.geoPointValue.latitude)===ws(e.geoPointValue.latitude)&&ws(t.geoPointValue.longitude)===ws(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ws(t.integerValue)===ws(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=ws(t.doubleValue),r=ws(e.doubleValue);return n===r?Ss(n)===Ss(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ss(t.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(us(n)!==us(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Cs(n[s],r[s])))return!1;return!0}(t,e);default:return Br()}}function Ns(t,e){return void 0!==(t.values||[]).find(t=>Cs(t,e))}function Ds(t,e){const n=xs(t),r=xs(e);if(n!==r)return rs(n,r);switch(n){case 0:return 0;case 1:return rs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=ws(t.integerValue||t.doubleValue),r=ws(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Zs(t.timestampValue,e.timestampValue);case 4:return Zs(Is(t),Is(e));case 5:return rs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=bs(t),r=bs(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let s=0;s<n.length&&s<r.length;s++){const t=rs(n[s],r[s]);if(0!==t)return t}return rs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=rs(ws(t.latitude),ws(e.latitude));return 0!==n?n:rs(ws(t.longitude),ws(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const t=Ds(n[s],r[s]);if(t)return t}return rs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),s=e.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const t=rs(r[o],i[o]);if(0!==t)return t;const e=Ds(n[r[o]],s[i[o]]);if(0!==e)return e}return rs(r.length,i.length)}(t.mapValue,e.mapValue);default:throw Br()}}function Zs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rs(t,e);const n=vs(t),r=vs(e),s=rs(n.seconds,r.seconds);return 0!==s?s:rs(n.nanos,r.nanos)}function Os(t){return Ls(t)}function Ls(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=vs(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?bs(t.bytesValue).toBase64():"referenceValue"in t?ks.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ls(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const s of e)r?r=!1:n+=",",n+=`${s}:${Ls(t.fields[s])}`;return n+"}"}(t.mapValue):Br();var e}function qs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rs(t){return!!t&&"integerValue"in t}function Us(t){return!!t&&"arrayValue"in t}function Ps(t){return!!t&&"nullValue"in t}function Ms(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fs(t){return!!t&&"mapValue"in t}function Vs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Vs(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vs(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Bs{constructor(t){this.value=t}static empty(){return new Bs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Fs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vs(e)}setAll(t){let e=ps.emptyPath(),n={},r=[];t.forEach((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=s.popLast()}t?n[s.lastSegment()]=Vs(t):r.push(s.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());Fs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Cs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Fs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){cs(e,(e,n)=>t[e]=n);for(const r of n)delete t[r]}clone(){return new Bs(Vs(this.value))}}function js(t){const e=[];return cs(t.fields,(t,n)=>{const r=new ps([t]);if(Fs(n)){const t=js(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)}),new gs(e)}class $s{constructor(t,e,n,r,s){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=s}static newInvalidDocument(t){return new $s(t,0,as.min(),Bs.empty(),0)}static newFoundDocument(t,e,n){return new $s(t,1,e,n,0)}static newNoDocument(t,e){return new $s(t,2,e,Bs.empty(),0)}static newUnknownDocument(t,e){return new $s(t,3,e,Bs.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof $s&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new $s(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zs{constructor(t,e=null,n=[],r=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.A=null}}function Gs(t,e=null,n=[],r=[],s=null,i=null,o=null){return new zs(t,e,n,r,s,i,o)}function Hs(t){const e=$r(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>function(t){return t.field.canonicalString()+t.op.toString()+Os(t.value)}(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),As(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=oi(e.startAt)),e.endAt&&(t+="|ub:",t+=oi(e.endAt)),e.A=t}return e.A}function Ks(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!ui(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if((n=t.filters[s]).op!==(r=e.filters[s]).op||!n.field.isEqual(r.field)||!Cs(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!li(t.startAt,e.startAt)&&li(t.endAt,e.endAt)}function Qs(t){return ks.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ws extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new Js(t,e,n):"array-contains"===e?new ei(t,n):"in"===e?new ni(t,n):"not-in"===e?new ri(t,n):"array-contains-any"===e?new si(t,n):new Ws(t,e,n)}static R(t,e,n){return"in"===e?new Ys(t,n):new Xs(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(Ds(e,this.value)):null!==e&&xs(this.value)===xs(e)&&this.P(Ds(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Br()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Js extends Ws{constructor(t,e,n){super(t,e,n),this.key=ks.fromName(n.referenceValue)}matches(t){const e=ks.comparator(t.key,this.key);return this.P(e)}}class Ys extends Ws{constructor(t,e){super(t,"in",e),this.keys=ti(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Xs extends Ws{constructor(t,e){super(t,"not-in",e),this.keys=ti(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function ti(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>ks.fromName(t.referenceValue))}class ei extends Ws{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Us(e)&&Ns(e.arrayValue,this.value)}}class ni extends Ws{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Ns(this.value.arrayValue,e)}}class ri extends Ws{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Ns(this.value.arrayValue,e)}}class si extends Ws{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Us(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>Ns(this.value.arrayValue,t))}}class ii{constructor(t,e){this.position=t,this.before=e}}function oi(t){return`${t.before?"b":"a"}:${t.position.map(t=>Os(t)).join(",")}`}class ai{constructor(t,e="asc"){this.field=t,this.dir=e}}function ui(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ci(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(r=i.field.isKeyField()?ks.comparator(ks.fromName(o.referenceValue),n.key):Ds(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function li(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cs(t.position[n],e.position[n]))return!1;return!0}class hi{constructor(t,e=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function di(t,e,n,r,s,i,o,a){return new hi(t,e,n,r,s,i,o,a)}function fi(t){return new hi(t)}function pi(t){return!As(t.limit)&&"F"===t.limitType}function gi(t){return!As(t.limit)&&"L"===t.limitType}function mi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function yi(t){for(const e of t.filters)if(e.v())return e.field;return null}function vi(t){return null!==t.collectionGroup}function wi(t){const e=$r(t);if(null===e.V){e.V=[];const t=yi(e),n=mi(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new ai(t)),e.V.push(new ai(ps.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new ai(ps.keyField(),t))}}}return e.V}function bi(t){const e=$r(t);if(!e.S)if("F"===e.limitType)e.S=Gs(e.path,e.collectionGroup,wi(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of wi(e))t.push(new ai(s.field,"desc"===s.dir?"asc":"desc"));const n=e.endAt?new ii(e.endAt.position,!e.endAt.before):null,r=e.startAt?new ii(e.startAt.position,!e.startAt.before):null;e.S=Gs(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.S}function _i(t,e,n){return new hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ti(t,e){return Ks(bi(t),bi(e))&&t.limitType===e.limitType}function Ii(t){return`${Hs(bi(t))}|lt:${t.limitType}`}function Ai(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>{return`${(e=t).field.canonicalString()} ${e.op} ${Os(e.value)}`;var e}).join(", ")}]`),As(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t)).join(", ")}]`),t.startAt&&(e+=", startAt: "+oi(t.startAt)),t.endAt&&(e+=", endAt: "+oi(t.endAt)),`Target(${e})`}(bi(t))}; limitType=${t.limitType})`}function Si(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ks.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ci(t.startAt,wi(t),e)||t.endAt&&ci(t.endAt,wi(t),e))}(t,e)}function Ei(t){return(e,n)=>{let r=!1;for(const s of wi(t)){const t=ki(s,e,n);if(0!==t)return t;r=r||s.field.isKeyField()}return 0}}function ki(t,e,n){const r=t.field.isKeyField()?ks.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),s=n.data.field(t);return null!==r&&null!==s?Ds(r,s):Br()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Br()}}function xi(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ss(e)?"-0":e}}function Ci(t){return{integerValue:""+t}}function Ni(t,e){return Es(e)?Ci(e):xi(t,e)}class Di{constructor(){this._=void 0}}function Zi(t,e,n){return t instanceof qi?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ri?Ui(t,e):t instanceof Pi?Mi(t,e):function(t,e){const n=Li(t,e),r=Vi(n)+Vi(t.C);return Rs(n)&&Rs(t.C)?Ci(r):xi(t.N,r)}(t,e)}function Oi(t,e,n){return t instanceof Ri?Ui(t,e):t instanceof Pi?Mi(t,e):n}function Li(t,e){return t instanceof Fi?Rs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class qi extends Di{}class Ri extends Di{constructor(t){super(),this.elements=t}}function Ui(t,e){const n=Bi(e);for(const r of t.elements)n.some(t=>Cs(t,r))||n.push(r);return{arrayValue:{values:n}}}class Pi extends Di{constructor(t){super(),this.elements=t}}function Mi(t,e){let n=Bi(e);for(const r of t.elements)n=n.filter(t=>!Cs(t,r));return{arrayValue:{values:n}}}class Fi extends Di{constructor(t,e){super(),this.N=t,this.C=e}}function Vi(t){return ws(t.integerValue||t.doubleValue)}function Bi(t){return Us(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ji{constructor(t,e){this.field=t,this.transform=e}}class $i{constructor(t,e){this.version=t,this.transformResults=e}}class zi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new zi}static exists(t){return new zi(void 0,t)}static updateTime(t){return new zi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gi(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Hi{}function Ki(t,e,n){t instanceof Xi?function(t,e,n){const r=t.value.clone(),s=no(t.fieldTransforms,e,n.transformResults);r.setAll(s),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof to?function(t,e,n){if(!Gi(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=no(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(eo(t)),s.setAll(r),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Qi(t,e,n){t instanceof Xi?function(t,e,n){if(!Gi(t.precondition,e))return;const r=t.value.clone(),s=ro(t.fieldTransforms,n,e);r.setAll(s),e.convertToFoundDocument(Yi(e),r).setHasLocalMutations()}(t,e,n):t instanceof to?function(t,e,n){if(!Gi(t.precondition,e))return;const r=ro(t.fieldTransforms,n,e),s=e.data;s.setAll(eo(t)),s.setAll(r),e.convertToFoundDocument(Yi(e),s).setHasLocalMutations()}(t,e,n):function(t,e){Gi(t.precondition,e)&&e.convertToNoDocument(as.min())}(t,e)}function Wi(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),s=Li(r.transform,t||null);null!=s&&(null==n&&(n=Bs.empty()),n.set(r.field,s))}return n||null}function Ji(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ss(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ri&&e instanceof Ri||t instanceof Pi&&e instanceof Pi?ss(t.elements,e.elements,Cs):t instanceof Fi&&e instanceof Fi?Cs(t.C,e.C):t instanceof qi&&e instanceof qi}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Yi(t){return t.isFoundDocument()?t.version:as.min()}class Xi extends Hi{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class to extends Hi{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}}function eo(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function no(t,e,n){const r=new Map;jr(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Oi(o,a,n[s]))}return r}function ro(t,e,n){const r=new Map;for(const s of t){const t=s.transform,i=n.data.field(s.field);r.set(s.field,Zi(t,i,e))}return r}class so extends Hi{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class io extends Hi{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class oo{constructor(t){this.count=t}}var ao,uo;function co(t){switch(t){case zr.OK:return Br();case zr.CANCELLED:case zr.UNKNOWN:case zr.DEADLINE_EXCEEDED:case zr.RESOURCE_EXHAUSTED:case zr.INTERNAL:case zr.UNAVAILABLE:case zr.UNAUTHENTICATED:return!1;case zr.INVALID_ARGUMENT:case zr.NOT_FOUND:case zr.ALREADY_EXISTS:case zr.PERMISSION_DENIED:case zr.FAILED_PRECONDITION:case zr.ABORTED:case zr.OUT_OF_RANGE:case zr.UNIMPLEMENTED:case zr.DATA_LOSS:return!0;default:return Br()}}function lo(t){if(void 0===t)return Mr("GRPC error has no .code"),zr.UNKNOWN;switch(t){case ao.OK:return zr.OK;case ao.CANCELLED:return zr.CANCELLED;case ao.UNKNOWN:return zr.UNKNOWN;case ao.DEADLINE_EXCEEDED:return zr.DEADLINE_EXCEEDED;case ao.RESOURCE_EXHAUSTED:return zr.RESOURCE_EXHAUSTED;case ao.INTERNAL:return zr.INTERNAL;case ao.UNAVAILABLE:return zr.UNAVAILABLE;case ao.UNAUTHENTICATED:return zr.UNAUTHENTICATED;case ao.INVALID_ARGUMENT:return zr.INVALID_ARGUMENT;case ao.NOT_FOUND:return zr.NOT_FOUND;case ao.ALREADY_EXISTS:return zr.ALREADY_EXISTS;case ao.PERMISSION_DENIED:return zr.PERMISSION_DENIED;case ao.FAILED_PRECONDITION:return zr.FAILED_PRECONDITION;case ao.ABORTED:return zr.ABORTED;case ao.OUT_OF_RANGE:return zr.OUT_OF_RANGE;case ao.UNIMPLEMENTED:return zr.UNIMPLEMENTED;case ao.DATA_LOSS:return zr.DATA_LOSS;default:return Br()}}(uo=ao||(ao={}))[uo.OK=0]="OK",uo[uo.CANCELLED=1]="CANCELLED",uo[uo.UNKNOWN=2]="UNKNOWN",uo[uo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",uo[uo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",uo[uo.NOT_FOUND=5]="NOT_FOUND",uo[uo.ALREADY_EXISTS=6]="ALREADY_EXISTS",uo[uo.PERMISSION_DENIED=7]="PERMISSION_DENIED",uo[uo.UNAUTHENTICATED=16]="UNAUTHENTICATED",uo[uo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",uo[uo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",uo[uo.ABORTED=10]="ABORTED",uo[uo.OUT_OF_RANGE=11]="OUT_OF_RANGE",uo[uo.UNIMPLEMENTED=12]="UNIMPLEMENTED",uo[uo.INTERNAL=13]="INTERNAL",uo[uo.UNAVAILABLE=14]="UNAVAILABLE",uo[uo.DATA_LOSS=15]="DATA_LOSS";class ho{constructor(t,e){this.comparator=t,this.root=e||po.EMPTY}insert(t,e){return new ho(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,po.BLACK,null,null))}remove(t){return new ho(this.comparator,this.root.remove(t,this.comparator).copy(null,null,po.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fo(this.root,t,this.comparator,!1)}getReverseIterator(){return new fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fo(this.root,t,this.comparator,!0)}}class fo{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class po{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=null!=n?n:po.RED,this.left=null!=r?r:po.EMPTY,this.right=null!=s?s:po.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new po(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return po.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return po.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Br();if(this.right.isRed())throw Br();const t=this.left.check();if(t!==this.right.check())throw Br();return t+(this.isRed()?0:1)}}po.EMPTY=null,po.RED=!0,po.BLACK=!1,po.EMPTY=new class{constructor(){this.size=0}get key(){throw Br()}get value(){throw Br()}get color(){throw Br()}get left(){throw Br()}get right(){throw Br()}copy(t,e,n,r,s){return this}insert(t,e,n){return new po(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class go{constructor(t){this.comparator=t,this.data=new ho(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new mo(this.data.getIterator())}getIteratorFrom(t){return new mo(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof go))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new go(this.comparator);return e.data=t,e}}class mo{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const yo=new ho(ks.comparator);function vo(){return yo}const wo=new ho(ks.comparator);function bo(){return wo}const _o=new ho(ks.comparator);function To(){return _o}const Io=new go(ks.comparator);function Ao(...t){let e=Io;for(const n of t)e=e.add(n);return e}const So=new go(rs);function Eo(){return So}class ko{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,xo.createSynthesizedTargetChangeForCurrentChange(t,e)),new ko(as.min(),n,Eo(),vo(),Ao())}}class xo{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new xo(ms.EMPTY_BYTE_STRING,e,Ao(),Ao(),Ao())}}class Co{constructor(t,e,n,r){this.k=t,this.removedTargetIds=e,this.key=n,this.$=r}}class No{constructor(t,e){this.targetId=t,this.O=e}}class Do{constructor(t,e,n=ms.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Zo{constructor(){this.F=0,this.M=qo(),this.L=ms.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=Ao(),e=Ao(),n=Ao();return this.M.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Br()}}),new xo(this.L,this.B,t,e,n)}G(){this.U=!1,this.M=qo()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Oo{constructor(t){this.tt=t,this.et=new Map,this.nt=vo(),this.st=Lo(),this.it=new go(rs)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.at(e,t.key,t.$);for(const e of t.removedTargetIds)this.at(e,t.key,t.$)}ct(t){this.forEachTarget(t,e=>{const n=this.ut(e);switch(t.state){case 0:this.ht(e)&&n.j(t.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(t.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(e);break;case 3:this.ht(e)&&(n.Z(),n.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),n.j(t.resumeToken));break;default:Br()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach((t,n)=>{this.ht(n)&&e(n)})}ft(t){const e=t.targetId,n=t.O.count,r=this.dt(e);if(r){const t=r.target;if(Qs(t))if(0===n){const n=new ks(t.path);this.at(e,n,$s.newNoDocument(n,as.min()))}else jr(1===n);else this.wt(e)!==n&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach((n,r)=>{const s=this.dt(r);if(s){if(n.current&&Qs(s.target)){const e=new ks(s.target.path);null!==this.nt.get(e)||this.gt(r,e)||this.at(r,e,$s.newNoDocument(e,t))}n.K&&(e.set(r,n.W()),n.G())}});let n=Ao();this.st.forEach((t,e)=>{let r=!0;e.forEachWhile(t=>{const e=this.dt(t);return!e||2===e.purpose||(r=!1,!1)}),r&&(n=n.add(t))});const r=new ko(t,e,this.it,this.nt,n);return this.nt=vo(),this.st=Lo(),this.it=new go(rs),r}ot(t,e){if(!this.ht(t))return;const n=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,n),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}at(t,e,n){if(!this.ht(t))return;const r=this.ut(t);this.gt(t,e)?r.H(e,1):r.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),n&&(this.nt=this.nt.insert(e,n))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new Zo,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new go(rs),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||Pr("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Et(t)}lt(t){this.et.set(t,new Zo),this.tt.getRemoteKeysForTarget(t).forEach(e=>{this.at(t,e,null)})}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function Lo(){return new ho(ks.comparator)}function qo(){return new ho(ks.comparator)}const Ro={asc:"ASCENDING",desc:"DESCENDING"},Uo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Po{constructor(t,e){this.databaseId=t,this.D=e}}function Mo(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fo(t,e){return t.D?e.toBase64():e.toUint8Array()}function Vo(t,e){return Mo(t,e.toTimestamp())}function Bo(t){return jr(!!t),as.fromTimestamp(function(t){const e=vs(t);return new os(e.seconds,e.nanos)}(t))}function jo(t,e){return function(t){return new ds(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function $o(t){const e=ds.fromString(t);return jr(pa(e)),e}function zo(t,e){return jo(t.databaseId,e.path)}function Go(t,e){const n=$o(e);if(n.get(1)!==t.databaseId.projectId)throw new Gr(zr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Gr(zr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ks(Wo(n))}function Ho(t,e){return jo(t.databaseId,e)}function Ko(t){const e=$o(t);return 4===e.length?ds.emptyPath():Wo(e)}function Qo(t){return new ds(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wo(t){return jr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Jo(t,e,n){return{name:zo(t,e),fields:n.value.mapValue.fields}}function Yo(t,e,n){const r=Go(t,e.name),s=Bo(e.updateTime),i=new Bs({mapValue:{fields:e.fields}}),o=$s.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Xo(t,e){let n;if(e instanceof Xi)n={update:Jo(t,e.key,e.value)};else if(e instanceof so)n={delete:zo(t,e.key)};else if(e instanceof to)n={update:Jo(t,e.key,e.data),updateMask:fa(e.fieldMask)};else{if(!(e instanceof io))return Br();n={verify:zo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof qi)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ri)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pi)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fi)return{fieldPath:e.field.canonicalString(),increment:n.C};throw Br()}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Vo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Br()}(t,e.precondition)),n}function ta(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?zi.updateTime(Bo(t.updateTime)):void 0!==t.exists?zi.exists(t.exists):zi.none()}(e.currentDocument):zi.none(),r=e.updateTransforms?e.updateTransforms.map(e=>function(t,e){let n=null;"setToServerValue"in e?(jr("REQUEST_TIME"===e.setToServerValue),n=new qi):"appendMissingElements"in e?n=new Ri(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Pi(e.removeAllFromArray.values||[]):"increment"in e?n=new Fi(t,e.increment):Br();const r=ps.fromServerFormat(e.fieldPath);return new ji(r,n)}(t,e)):[];if(e.update){const s=Go(t,e.update.name),i=new Bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){return new gs((t.fieldPaths||[]).map(t=>ps.fromServerFormat(t)))}(e.updateMask);return new to(s,i,t,n,r)}return new Xi(s,i,n,r)}if(e.delete){const r=Go(t,e.delete);return new so(r,n)}if(e.verify){const r=Go(t,e.verify);return new io(r,n)}return Br()}function ea(t,e){return{documents:[Ho(t,e.path)]}}function na(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ho(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ho(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(t){if(0===t.length)return;const e=t.map(t=>function(t){if("=="===t.op){if(Ms(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NAN"}};if(Ps(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ms(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NAN"}};if(Ps(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(t.field),op:ua(t.op),value:t.value}}}(t));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:ca(t.field),direction:aa(t.dir)}}(t))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(t,e){return t.D||As(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=ia(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ia(e.endAt)),n}function ra(t){let e=Ko(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){jr(1===r);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let i=[];n.where&&(i=sa(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(t=>function(t){return new ai(la(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,As(e)?null:e}(n.limit));let u=null;n.startAt&&(u=oa(n.startAt));let c=null;return n.endAt&&(c=oa(n.endAt)),di(e,s,o,i,a,"F",u,c)}function sa(t){return t?void 0!==t.unaryFilter?[da(t)]:void 0!==t.fieldFilter?[ha(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(t=>sa(t)).reduce((t,e)=>t.concat(e)):Br():[]}function ia(t){return{before:t.before,values:t.position}}function oa(t){return new ii(t.values||[],!!t.before)}function aa(t){return Ro[t]}function ua(t){return Uo[t]}function ca(t){return{fieldPath:t.canonicalString()}}function la(t){return ps.fromServerFormat(t.fieldPath)}function ha(t){return Ws.create(la(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Br()}}(t.fieldFilter.op),t.fieldFilter.value)}function da(t){switch(t.unaryFilter.op){case"IS_NAN":const e=la(t.unaryFilter.field);return Ws.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=la(t.unaryFilter.field);return Ws.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=la(t.unaryFilter.field);return Ws.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=la(t.unaryFilter.field);return Ws.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Br()}}function fa(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ga(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ya(e)),e=ma(t.get(n),e);return ya(e)}function ma(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const e=t.charAt(s);switch(e){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=e}}return n}function ya(t){return t+"\x01\x01"}function va(t){const e=t.length;if(jr(e>=2),2===e)return jr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ds.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const e=t.indexOf("\x01",i);switch((e<0||e>n)&&Br(),t.charAt(e+1)){case"\x01":const n=t.substring(i,e);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"\x10":s+=t.substring(i,e),s+="\0";break;case"\x11":s+=t.substring(i,e+1);break;default:Br()}i=e+2}return new ds(r)}class wa{constructor(t,e){this.seconds=t,this.nanoseconds=e}}class ba{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}ba.store="owner",ba.key="owner";class _a{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}_a.store="mutationQueues",_a.keyPath="userId";class Ta{constructor(t,e,n,r,s){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=s}}Ta.store="mutations",Ta.keyPath="batchId",Ta.userMutationsIndex="userMutationsIndex",Ta.userMutationsKeyPath=["userId","batchId"];class Ia{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ga(e)]}static key(t,e,n){return[t,ga(e),n]}}Ia.store="documentMutations",Ia.PLACEHOLDER=new Ia;class Aa{constructor(t,e){this.path=t,this.readTime=e}}class Sa{constructor(t,e){this.path=t,this.version=e}}class Ea{constructor(t,e,n,r,s,i){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=s,this.parentPath=i}}Ea.store="remoteDocuments",Ea.readTimeIndex="readTimeIndex",Ea.readTimeIndexPath="readTime",Ea.collectionReadTimeIndex="collectionReadTimeIndex",Ea.collectionReadTimeIndexPath=["parentPath","readTime"];class ka{constructor(t){this.byteSize=t}}ka.store="remoteDocumentGlobal",ka.key="remoteDocumentGlobalKey";class xa{constructor(t,e,n,r,s,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=i,this.query=o}}xa.store="targets",xa.keyPath="targetId",xa.queryTargetsIndexName="queryTargetsIndex",xa.queryTargetsKeyPath=["canonicalId","targetId"];class Ca{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Ca.store="targetDocuments",Ca.keyPath=["targetId","path"],Ca.documentTargetsIndex="documentTargetsIndex",Ca.documentTargetsKeyPath=["path","targetId"];class Na{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Na.key="targetGlobalKey",Na.store="targetGlobal";class Da{constructor(t,e){this.collectionId=t,this.parent=e}}Da.store="collectionParents",Da.keyPath=["collectionId","parent"];class Za{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}Za.store="clientMetadata",Za.keyPath="clientId";class Oa{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Oa.store="bundles",Oa.keyPath="bundleId";class La{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}La.store="namedQueries",La.keyPath="name";const qa=[_a.store,Ta.store,Ia.store,Ea.store,xa.store,ba.store,Na.store,Ca.store,Za.store,ka.store,Da.store,Oa.store,La.store],Ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ua{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Pa{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Br(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Pa((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Pa?e:Pa.resolve(e)}catch(t){return Pa.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Pa.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Pa.reject(e)}static resolve(t){return new Pa((e,n)=>{e(t)})}static reject(t){return new Pa((e,n)=>{n(t)})}static waitFor(t){return new Pa((e,n)=>{let r=0,s=0,i=!1;t.forEach(t=>{++r,t.next(()=>{++s,i&&s===r&&e()},t=>n(t))}),i=!0,s===r&&e()})}static or(t){let e=Pa.resolve(!1);for(const n of t)e=e.next(t=>t?Pa.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,r)=>{n.push(e.call(this,t,r))}),this.waitFor(n)}}class Ma{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.Tt=new Hr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{e.error?this.Tt.reject(new Ba(t,e.error)):this.Tt.resolve()},this.transaction.onerror=e=>{const n=Ha(e.target.error);this.Tt.reject(new Ba(t,n))}}static open(t,e,n,r){try{return new Ma(e,t.transaction(r,n))}catch(t){throw new Ba(e,t)}}get It(){return this.Tt.promise}abort(t){t&&this.Tt.reject(t),this.aborted||(Pr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new $a(e)}}class Fa{constructor(t,e,n){this.name=t,this.version=e,this.At=n,12.2===Fa.Rt((0,S.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Pr("SimpleDb","Removing database:",t),za(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if(Fa.Pt())return!0;const t=(0,S.z$)(),e=Fa.Rt(t),n=0<e&&e<10,r=Fa.vt(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static Pt(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Vt)}static St(t,e){return t.store(e)}static Rt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(t){var e=this;return(0,_.Z)(function*(){return e.db||(Pr("SimpleDb","Opening database:",e.name),e.db=yield new Promise((n,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=t=>{n(t.target.result)},s.onblocked=()=>{r(new Ba(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=e=>{const n=e.target.error;r("VersionError"===n.name?new Gr(zr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Gr(zr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Ba(t,n))},s.onupgradeneeded=t=>{Pr("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion),e.At.Ct(t.target.result,s.transaction,t.oldVersion,e.version).next(()=>{Pr("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Nt&&(e.db.onversionchange=t=>e.Nt(t)),e.db})()}xt(t){this.Nt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,r){var s=this;return(0,_.Z)(function*(){const i="readonly"===e;let o=0;for(;;){++o;try{s.db=yield s.Dt(t);const e=Ma.open(s.db,t,i?"readonly":"readwrite",n),o=r(e).catch(t=>(e.abort(t),Pa.reject(t))).toPromise();return o.catch(()=>{}),yield e.It,o}catch(t){const n="FirebaseError"!==t.name&&o<3;if(Pr("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),s.close(),!n)return Promise.reject(t)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Va{constructor(t){this.kt=t,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(t){this.kt=t}done(){this.$t=!0}Mt(t){this.Ot=t}delete(){return za(this.kt.delete())}}class Ba extends Gr{constructor(t,e){super(zr.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ja(t){return"IndexedDbTransactionError"===t.name}class $a{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Pr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Pr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),za(n)}add(t){return Pr("SimpleDb","ADD",this.store.name,t,t),za(this.store.add(t))}get(t){return za(this.store.get(t)).next(e=>(void 0===e&&(e=null),Pr("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Pr("SimpleDb","DELETE",this.store.name,t),za(this.store.delete(t))}count(){return Pr("SimpleDb","COUNT",this.store.name),za(this.store.count())}Lt(t,e){const n=this.cursor(this.options(t,e)),r=[];return this.Bt(n,(t,e)=>{r.push(e)}).next(()=>r)}Ut(t,e){Pr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(t,e,n)=>n.delete())}Kt(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.Bt(r,e)}jt(t){const e=this.cursor({});return new Pa((n,r)=>{e.onerror=t=>{const e=Ha(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next(t=>{t?r.continue():n()}):n()}})}Bt(t,e){const n=[];return new Pa((r,s)=>{t.onerror=t=>{s(t.target.error)},t.onsuccess=t=>{const s=t.target.result;if(!s)return void r();const i=new Va(s),o=e(s.primaryKey,s.value,i);if(o instanceof Pa){const t=o.catch(t=>(i.done(),Pa.reject(t)));n.push(t)}i.isDone?r():null===i.Ft?s.continue():s.continue(i.Ft)}}).next(()=>Pa.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.qt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function za(t){return new Pa((e,n)=>{t.onsuccess=t=>{e(t.target.result)},t.onerror=t=>{const e=Ha(t.target.error);n(e)}})}let Ga=!1;function Ha(t){const e=Fa.Rt((0,S.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Gr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ga||(Ga=!0,setTimeout(()=>{throw t},0)),t}}return t}class Ka extends Ua{constructor(t,e){super(),this.Qt=t,this.currentSequenceNumber=e}}function Qa(t,e){const n=$r(t);return Fa.St(n.Qt,e)}class Wa{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&Ki(e,t,n[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&Qi(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&Qi(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(as.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ao())}isEqual(t){return this.batchId===t.batchId&&ss(this.mutations,t.mutations,(t,e)=>Ji(t,e))&&ss(this.baseMutations,t.baseMutations,(t,e)=>Ji(t,e))}}class Ja{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){jr(t.mutations.length===n.length);let r=To();const s=t.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ja(t,e,n,r)}}class Ya{constructor(t,e,n,r,s=as.min(),i=as.min(),o=ms.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o}withSequenceNumber(t){return new Ya(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Xa{constructor(t){this.Wt=t}}function tu(t,e){if(e.document)return Yo(t.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=ks.fromSegments(e.noDocument.path),n=iu(e.noDocument.readTime),r=$s.newNoDocument(t,n);return e.hasCommittedMutations?r.setHasCommittedMutations():r}if(e.unknownDocument){const t=ks.fromSegments(e.unknownDocument.path),n=iu(e.unknownDocument.version);return $s.newUnknownDocument(t,n)}return Br()}function eu(t,e,n){const r=nu(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){const n=function(t,e){return{name:zo(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Mo(t,e.version.toTimestamp())}}(t.Wt,e);return new Ea(null,null,n,e.hasCommittedMutations,r,s)}if(e.isNoDocument()){const t=e.key.path.toArray(),n=su(e.version),i=e.hasCommittedMutations;return new Ea(null,new Aa(t,n),null,i,r,s)}if(e.isUnknownDocument()){const t=e.key.path.toArray(),n=su(e.version);return new Ea(new Sa(t,n),null,null,!0,r,s)}return Br()}function nu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ru(t){const e=new os(t[0],t[1]);return as.fromTimestamp(e)}function su(t){const e=t.toTimestamp();return new wa(e.seconds,e.nanoseconds)}function iu(t){const e=new os(t.seconds,t.nanoseconds);return as.fromTimestamp(e)}function ou(t,e){const n=(e.baseMutations||[]).map(e=>ta(t.Wt,e));for(let i=0;i<e.mutations.length-1;++i){const t=e.mutations[i];i+1<e.mutations.length&&void 0!==e.mutations[i+1].transform&&(t.updateTransforms=e.mutations[i+1].transform.fieldTransforms,e.mutations.splice(i+1,1),++i)}const r=e.mutations.map(e=>ta(t.Wt,e)),s=os.fromMillis(e.localWriteTimeMs);return new Wa(e.batchId,s,n,r)}function au(t){const e=iu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?iu(t.lastLimboFreeSnapshotVersion):as.min();let r;var s;return void 0!==t.query.documents?(jr(1===(s=t.query).documents.length),r=bi(fi(Ko(s.documents[0])))):r=function(t){return bi(ra(t))}(t.query),new Ya(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ms.fromBase64String(t.resumeToken))}function uu(t,e){const n=su(e.snapshotVersion),r=su(e.lastLimboFreeSnapshotVersion);let s;s=Qs(e.target)?ea(t.Wt,e.target):na(t.Wt,e.target);const i=e.resumeToken.toBase64();return new xa(e.targetId,Hs(e.target),n,i,e.sequenceNumber,r,s)}function cu(t){const e=ra({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_i(e,e.limit,"L"):e}class lu{getBundleMetadata(t,e){return hu(t).get(e).next(t=>{if(t)return{id:(e=t).bundleId,createTime:iu(e.createTime),version:e.version};var e})}saveBundleMetadata(t,e){return hu(t).put({bundleId:(n=e).id,createTime:su(Bo(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return du(t).get(e).next(t=>{if(t)return{name:(e=t).name,query:cu(e.bundledQuery),readTime:iu(e.readTime)};var e})}saveNamedQuery(t,e){return du(t).put(function(t){return{name:t.name,readTime:su(Bo(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function hu(t){return Qa(t,Oa.store)}function du(t){return Qa(t,La.store)}class fu{constructor(){this.Gt=new pu}addToCollectionParentIndex(t,e){return this.Gt.add(e),Pa.resolve()}getCollectionParents(t,e){return Pa.resolve(this.Gt.getEntries(e))}}class pu{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new go(ds.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new go(ds.comparator)).toArray()}}class gu{constructor(){this.zt=new pu}addToCollectionParentIndex(t,e){if(!this.zt.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.zt.add(e)});const s={collectionId:n,parent:ga(r)};return mu(t).put(s)}return Pa.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[is(e),""],!1,!0);return mu(t).Lt(r).next(t=>{for(const r of t){if(r.collectionId!==e)break;n.push(va(r.parent))}return n})}}function mu(t){return Qa(t,Da.store)}const yu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vu{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new vu(t,vu.DEFAULT_COLLECTION_PERCENTILE,vu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wu(t,e,n){const r=t.store(Ta.store),s=t.store(Ia.store),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},(t,e,n)=>(a++,n.delete()));i.push(u.next(()=>{jr(1===a)}));const c=[];for(const l of n.mutations){const t=Ia.key(e,l.key.path,n.batchId);i.push(s.delete(t)),c.push(l.key)}return Pa.waitFor(i).next(()=>c)}function bu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Br();e=t.noDocument}return JSON.stringify(e).length}vu.DEFAULT_COLLECTION_PERCENTILE=10,vu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vu.DEFAULT=new vu(41943040,vu.DEFAULT_COLLECTION_PERCENTILE,vu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vu.DISABLED=new vu(-1,0,0);class _u{constructor(t,e,n,r){this.userId=t,this.N=e,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(t,e,n,r){jr(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new _u(s,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Iu(t).Kt({index:Ta.userMutationsIndex,range:n},(t,n,r)=>{e=!1,r.done()}).next(()=>e)}addMutationBatch(t,e,n,r){const s=Au(t),i=Iu(t);return i.add({}).next(o=>{jr("number"==typeof o);const a=new Wa(o,e,n,r),u=function(t,e,n){const r=n.baseMutations.map(e=>Xo(t.Wt,e)),s=n.mutations.map(e=>Xo(t.Wt,e));return new Ta(e,n.batchId,n.localWriteTime.toMillis(),r,s)}(this.N,this.userId,a),c=[];let l=new go((t,e)=>rs(t.canonicalString(),e.canonicalString()));for(const t of r){const e=Ia.key(this.userId,t.key.path,o);l=l.add(t.key.path.popLast()),c.push(i.put(u)),c.push(s.put(e,Ia.PLACEHOLDER))}return l.forEach(e=>{c.push(this.Ht.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),Pa.waitFor(c).next(()=>a)})}lookupMutationBatch(t,e){return Iu(t).get(e).next(t=>t?(jr(t.userId===this.userId),ou(this.N,t)):null)}Xt(t,e){return this.Jt[e]?Pa.resolve(this.Jt[e]):this.lookupMutationBatch(t,e).next(t=>{if(t){const n=t.keys();return this.Jt[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Iu(t).Kt({index:Ta.userMutationsIndex,range:r},(t,e,r)=>{e.userId===this.userId&&(jr(e.batchId>=n),s=ou(this.N,e)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Iu(t).Kt({index:Ta.userMutationsIndex,range:e,reverse:!0},(t,e,r)=>{n=e.batchId,r.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Iu(t).Lt(Ta.userMutationsIndex,e).next(t=>t.map(t=>ou(this.N,t)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Ia.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(n),s=[];return Au(t).Kt({range:r},(n,r,i)=>{const[o,a,u]=n,c=va(a);if(o===this.userId&&e.path.isEqual(c))return Iu(t).get(u).next(t=>{if(!t)throw Br();jr(t.userId===this.userId),s.push(ou(this.N,t))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new go(rs);const r=[];return e.forEach(e=>{const s=Ia.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(s),o=Au(t).Kt({range:i},(t,r,s)=>{const[i,o,a]=t,u=va(o);i===this.userId&&e.path.isEqual(u)?n=n.add(a):s.done()});r.push(o)}),Pa.waitFor(r).next(()=>this.Zt(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,s=Ia.prefixForPath(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new go(rs);return Au(t).Kt({range:i},(t,e,s)=>{const[i,a,u]=t,c=va(a);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):s.done()}).next(()=>this.Zt(t,o))}Zt(t,e){const n=[],r=[];return e.forEach(e=>{r.push(Iu(t).get(e).next(t=>{if(null===t)throw Br();jr(t.userId===this.userId),n.push(ou(this.N,t))}))}),Pa.waitFor(r).next(()=>n)}removeMutationBatch(t,e){return wu(t.Qt,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.te(e.batchId)}),Pa.forEach(n,e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))}te(t){delete this.Jt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Pa.resolve();const n=IDBKeyRange.lowerBound(Ia.prefixForUser(this.userId)),r=[];return Au(t).Kt({range:n},(t,e,n)=>{if(t[0]===this.userId){const e=va(t[1]);r.push(e)}else n.done()}).next(()=>{jr(0===r.length)})})}containsKey(t,e){return Tu(t,this.userId,e)}ee(t){return Su(t).get(this.userId).next(t=>t||new _a(this.userId,-1,""))}}function Tu(t,e,n){const r=Ia.prefixForPath(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Au(t).Kt({range:i,qt:!0},(t,n,r)=>{const[i,a,u]=t;i===e&&a===s&&(o=!0),r.done()}).next(()=>o)}function Iu(t){return Qa(t,Ta.store)}function Au(t){return Qa(t,Ia.store)}function Su(t){return Qa(t,_a.store)}class Eu{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new Eu(0)}static ie(){return new Eu(-1)}}class ku{constructor(t,e){this.referenceDelegate=t,this.N=e}allocateTargetId(t){return this.re(t).next(e=>{const n=new Eu(e.highestTargetId);return e.highestTargetId=n.next(),this.oe(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.re(t).next(t=>as.fromTimestamp(new os(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.re(t).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.re(t).next(r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.oe(t,r)))}addTargetData(t,e){return this.ae(t,e).next(()=>this.re(t).next(n=>(n.targetCount+=1,this.ce(e,n),this.oe(t,n))))}updateTargetData(t,e){return this.ae(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>xu(t).delete(e.targetId)).next(()=>this.re(t)).next(e=>(jr(e.targetCount>0),e.targetCount-=1,this.oe(t,e)))}removeTargets(t,e,n){let r=0;const s=[];return xu(t).Kt((i,o)=>{const a=au(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(t,a)))}).next(()=>Pa.waitFor(s)).next(()=>r)}forEachTarget(t,e){return xu(t).Kt((t,n)=>{const r=au(n);e(r)})}re(t){return Cu(t).get(Na.key).next(t=>(jr(null!==t),t))}oe(t,e){return Cu(t).put(Na.key,e)}ae(t,e){return xu(t).put(uu(this.N,e))}ce(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.re(t).next(t=>t.targetCount)}getTargetData(t,e){const n=Hs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return xu(t).Kt({range:r,index:xa.queryTargetsIndexName},(t,n,r)=>{const i=au(n);Ks(e,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(t,e,n){const r=[],s=Nu(t);return e.forEach(e=>{const i=ga(e.path);r.push(s.put(new Ca(n,i))),r.push(this.referenceDelegate.addReference(t,n,e))}),Pa.waitFor(r)}removeMatchingKeys(t,e,n){const r=Nu(t);return Pa.forEach(e,e=>{const s=ga(e.path);return Pa.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(t,n,e)])})}removeMatchingKeysForTargetId(t,e){const n=Nu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Nu(t);let s=Ao();return r.Kt({range:n,qt:!0},(t,e,n)=>{const r=va(t[1]),i=new ks(r);s=s.add(i)}).next(()=>s)}containsKey(t,e){const n=ga(e.path),r=IDBKeyRange.bound([n],[is(n)],!1,!0);let s=0;return Nu(t).Kt({index:Ca.documentTargetsIndex,qt:!0,range:r},([t,e],n,r)=>{0!==t&&(s++,r.done())}).next(()=>s>0)}Et(t,e){return xu(t).get(e).next(t=>t?au(t):null)}}function xu(t){return Qa(t,xa.store)}function Cu(t){return Qa(t,Na.store)}function Nu(t){return Qa(t,Ca.store)}function Du(t){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,_.Z)(function*(t){if(t.code!==zr.FAILED_PRECONDITION||t.message!==Ra)throw t;Pr("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Ou([t,e],[n,r]){const s=rs(t,n);return 0===s?rs(e,r):s}class Lu{constructor(t){this.ue=t,this.buffer=new go(Ou),this.he=0}le(){return++this.he}fe(t){const e=[t,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Ou(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qu{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.de=!1,this.we=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(t)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(t){var e=this;const n=this.de?3e5:6e4;Pr("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,_.Z)(function*(){e.we=null,e.de=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(t){ja(t)?Pr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Du(t)}yield e._e(t)}))}}class Ru{constructor(t,e){this.me=t,this.params=e}calculateTargetCount(t,e){return this.me.ge(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return Pa.resolve(ts.T);const n=new Lu(e);return this.me.forEachTarget(t,t=>n.fe(t.sequenceNumber)).next(()=>this.me.ye(t,t=>n.fe(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.me.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.me.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Pr("LruGarbageCollector","Garbage collection skipped; disabled"),Pa.resolve(yu)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Pr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yu):this.pe(t,e))}getCacheSize(t){return this.me.getCacheSize(t)}pe(t,e){let n,r,s,i,o,a,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(Pr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,i=Date.now(),this.nthSequenceNumber(t,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(t,n,e))).next(e=>(s=e,a=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(u=Date.now(),Ur()<=A.in.DEBUG&&Pr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${r} in `+(o-i)+"ms\n"+`\tRemoved ${s} targets in `+(a-o)+"ms\n"+`\tRemoved ${t} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),Pa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:t})))}}class Uu{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ru(t,e)}(this,e)}ge(t){const e=this.Ee(t);return this.db.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}Ee(t){let e=0;return this.ye(t,t=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}ye(t,e){return this.Te(t,(t,n)=>e(n))}addReference(t,e,n){return Pu(t,n)}removeReference(t,e,n){return Pu(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Pu(t,e)}Ie(t,e){return function(t,e){let n=!1;return Su(t).jt(r=>Tu(t,r,e).next(t=>(t&&(n=!0),Pa.resolve(!t)))).next(()=>n)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Te(t,(i,o)=>{if(o<=e){const e=this.Ie(t,i).next(e=>{if(!e)return s++,n.getEntry(t,i).next(()=>(n.removeEntry(i),Nu(t).delete([0,ga(i.path)])))});r.push(e)}}).next(()=>Pa.waitFor(r)).next(()=>n.apply(t)).next(()=>s)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Pu(t,e)}Te(t,e){const n=Nu(t);let r,s=ts.T;return n.Kt({index:Ca.documentTargetsIndex},([t,n],{path:i,sequenceNumber:o})=>{0===t?(s!==ts.T&&e(new ks(va(r)),s),s=o,r=i):s=ts.T}).next(()=>{s!==ts.T&&e(new ks(va(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Pu(t,e){return Nu(t).put(function(t,e){return new Ca(0,ga(t.path),e)}(e,t.currentSequenceNumber))}class Mu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){cs(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return ls(this.inner)}}class Fu{constructor(){this.changes=new Mu(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:as.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:$s.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Pa.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Vu{constructor(t,e){this.N=t,this.Ht=e}addEntry(t,e,n){return $u(t).put(zu(e),n)}removeEntry(t,e){const n=$u(t),r=zu(e);return n.delete(r)}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Ae(t,n)))}getEntry(t,e){return $u(t).get(zu(e)).next(t=>this.Re(e,t))}be(t,e){return $u(t).get(zu(e)).next(t=>({document:this.Re(e,t),size:bu(t)}))}getEntries(t,e){let n=vo();return this.Pe(t,e,(t,e)=>{const r=this.Re(t,e);n=n.insert(t,r)}).next(()=>n)}ve(t,e){let n=vo(),r=new ho(ks.comparator);return this.Pe(t,e,(t,e)=>{const s=this.Re(t,e);n=n.insert(t,s),r=r.insert(t,bu(e))}).next(()=>({documents:n,Ve:r}))}Pe(t,e,n){if(e.isEmpty())return Pa.resolve();const r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),s=e.getIterator();let i=s.getNext();return $u(t).Kt({range:r},(t,e,r)=>{const o=ks.fromSegments(t);for(;i&&ks.comparator(i,o)<0;)n(i,null),i=s.getNext();i&&i.isEqual(o)&&(n(i,e),i=s.hasNext()?s.getNext():null),i?r.Mt(i.path.toArray()):r.done()}).next(()=>{for(;i;)n(i,null),i=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,n){let r=vo();const s=e.path.length+1,i={};if(n.isEqual(as.min())){const t=e.path.toArray();i.range=IDBKeyRange.lowerBound(t)}else{const t=e.path.toArray(),r=nu(n);i.range=IDBKeyRange.lowerBound([t,r],!0),i.index=Ea.collectionReadTimeIndex}return $u(t).Kt(i,(t,n,i)=>{if(t.length!==s)return;const o=tu(this.N,n);e.path.isPrefixOf(o.key.path)?Si(e,o)&&(r=r.insert(o.key,o)):i.done()}).next(()=>r)}newChangeBuffer(t){return new Bu(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(t=>t.byteSize)}getMetadata(t){return ju(t).get(ka.key).next(t=>(jr(!!t),t))}Ae(t,e){return ju(t).put(ka.key,e)}Re(t,e){if(e){const t=tu(this.N,e);if(!t.isNoDocument()||!t.version.isEqual(as.min()))return t}return $s.newInvalidDocument(t)}}class Bu extends Fu{constructor(t,e){super(),this.Se=t,this.trackRemovals=e,this.De=new Mu(t=>t.toString(),(t,e)=>t.isEqual(e))}applyChanges(t){const e=[];let n=0,r=new go((t,e)=>rs(t.canonicalString(),e.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.De.get(s);if(i.document.isValidDocument()){const a=eu(this.Se.N,i.document,this.getReadTime(s));r=r.add(s.path.popLast());const u=bu(a);n+=u-o,e.push(this.Se.addEntry(t,s,a))}else if(n-=o,this.trackRemovals){const n=eu(this.Se.N,$s.newNoDocument(s,as.min()),this.getReadTime(s));e.push(this.Se.addEntry(t,s,n))}else e.push(this.Se.removeEntry(t,s))}),r.forEach(n=>{e.push(this.Se.Ht.addToCollectionParentIndex(t,n))}),e.push(this.Se.updateMetadata(t,n)),Pa.waitFor(e)}getFromCache(t,e){return this.Se.be(t,e).next(t=>(this.De.set(e,t.size),t.document))}getAllFromCache(t,e){return this.Se.ve(t,e).next(({documents:t,Ve:e})=>(e.forEach((t,e)=>{this.De.set(t,e)}),t))}}function ju(t){return Qa(t,ka.store)}function $u(t){return Qa(t,Ea.store)}function zu(t){return t.path.toArray()}class Gu{constructor(t){this.N=t}Ct(t,e,n,r){jr(n<r&&n>=0&&r<=11);const s=new Ma("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ba.store)}(t),function(t){t.createObjectStore(_a.store,{keyPath:_a.keyPath}),t.createObjectStore(Ta.store,{keyPath:Ta.keyPath,autoIncrement:!0}).createIndex(Ta.userMutationsIndex,Ta.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ia.store)}(t),Hu(t),function(t){t.createObjectStore(Ea.store)}(t));let i=Pa.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ca.store),t.deleteObjectStore(xa.store),t.deleteObjectStore(Na.store)}(t),Hu(t)),i=i.next(()=>function(t){const e=t.store(Na.store),n=new Na(0,0,as.min().toTimestamp(),0);return e.put(Na.key,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(t,e){return e.store(Ta.store).Lt().next(n=>{t.deleteObjectStore(Ta.store),t.createObjectStore(Ta.store,{keyPath:Ta.keyPath,autoIncrement:!0}).createIndex(Ta.userMutationsIndex,Ta.userMutationsKeyPath,{unique:!0});const r=e.store(Ta.store),s=n.map(t=>r.put(t));return Pa.waitFor(s)})}(t,s))),i=i.next(()=>{!function(t){t.createObjectStore(Za.store,{keyPath:Za.keyPath})}(t)})),n<5&&r>=5&&(i=i.next(()=>this.Ce(s))),n<6&&r>=6&&(i=i.next(()=>(function(t){t.createObjectStore(ka.store)}(t),this.Ne(s)))),n<7&&r>=7&&(i=i.next(()=>this.xe(s))),n<8&&r>=8&&(i=i.next(()=>this.ke(t,s))),n<9&&r>=9&&(i=i.next(()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){const e=t.objectStore(Ea.store);e.createIndex(Ea.readTimeIndex,Ea.readTimeIndexPath,{unique:!1}),e.createIndex(Ea.collectionReadTimeIndex,Ea.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(i=i.next(()=>this.$e(s))),n<11&&r>=11&&(i=i.next(()=>{!function(t){t.createObjectStore(Oa.store,{keyPath:Oa.keyPath})}(t),function(t){t.createObjectStore(La.store,{keyPath:La.keyPath})}(t)})),i}Ne(t){let e=0;return t.store(Ea.store).Kt((t,n)=>{e+=bu(n)}).next(()=>{const n=new ka(e);return t.store(ka.store).put(ka.key,n)})}Ce(t){const e=t.store(_a.store),n=t.store(Ta.store);return e.Lt().next(e=>Pa.forEach(e,e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.Lt(Ta.userMutationsIndex,r).next(n=>Pa.forEach(n,n=>{jr(n.userId===e.userId);const r=ou(this.N,n);return wu(t,e.userId,r).next(()=>{})}))}))}xe(t){const e=t.store(Ca.store),n=t.store(Ea.store);return t.store(Na.store).get(Na.key).next(t=>{const r=[];return n.Kt((n,s)=>{const i=new ds(n),o=function(t){return[0,ga(t)]}(i);r.push(e.get(o).next(n=>n?Pa.resolve():(n=>e.put(new Ca(0,ga(n),t.highestListenSequenceNumber)))(i)))}).next(()=>Pa.waitFor(r))})}ke(t,e){t.createObjectStore(Da.store,{keyPath:Da.keyPath});const n=e.store(Da.store),r=new pu,s=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:ga(r)})}};return e.store(Ea.store).Kt({qt:!0},(t,e)=>{const n=new ds(t);return s(n.popLast())}).next(()=>e.store(Ia.store).Kt({qt:!0},([t,e,n],r)=>{const i=va(e);return s(i.popLast())}))}$e(t){const e=t.store(xa.store);return e.Kt((t,n)=>{const r=au(n),s=uu(this.N,r);return e.put(s)})}}function Hu(t){t.createObjectStore(Ca.store,{keyPath:Ca.keyPath}).createIndex(Ca.documentTargetsIndex,Ca.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xa.store,{keyPath:xa.keyPath}).createIndex(xa.queryTargetsIndexName,xa.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Na.store)}const Ku="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qu{constructor(t,e,n,r,s,i,o,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Oe=s,this.window=i,this.document=o,this.Fe=u,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=t=>Promise.resolve(),!Qu.bt())throw new Gr(zr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uu(this,r),this.We=e+"main",this.N=new Xa(a),this.Ge=new Fa(this.We,11,new Gu(this.N)),this.ze=new ku(this.referenceDelegate,this.N),this.Ht=new gu,this.He=function(t,e){return new Vu(t,e)}(this.N,this.Ht),this.Je=new lu,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Gr(zr.FAILED_PRECONDITION,Ku);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.ze.getHighestSequenceNumber(t))}).then(t=>{this.Le=new ts(t,this.Fe)}).then(()=>{this.Be=!0}).catch(t=>(this.Ge&&this.Ge.close(),Promise.reject(t)))}nn(t){var e=this;return this.Qe=function(){var n=(0,_.Z)(function*(n){if(e.started)return t(n)});return function(t){return n.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ge.xt(function(){var e=(0,_.Z)(function*(e){null===e.newVersion&&(yield t())});return function(t){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget((0,_.Z)(function*(){e.started&&(yield e.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ju(t).put(new Za(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(t).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(t)).next(e=>this.isPrimary&&!e?this.on(t).next(()=>!1):!!e&&this.an(t).next(()=>!0))).catch(t=>{if(ja(t))return Pr("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Pr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable(()=>this.Qe(t)),this.isPrimary=t})}sn(t){return Wu(t).get(ba.key).next(t=>Pa.resolve(this.cn(t)))}un(t){return Ju(t).delete(this.clientId)}hn(){var t=this;return(0,_.Z)(function*(){if(t.isPrimary&&!t.ln(t.je,18e5)){t.je=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const n=Qa(e,Za.store);return n.Lt().next(e=>{const r=t.fn(e,18e5),s=e.filter(t=>-1===r.indexOf(t));return Pa.forEach(s,t=>n.delete(t.clientId)).next(()=>s)})}).catch(()=>[]);if(t.Ye)for(const n of e)t.Ye.removeItem(t.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(t){return!!t&&t.ownerId===this.clientId}rn(t){return this.Me?Pa.resolve(!0):Wu(t).get(ba.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)){if(this.cn(e)&&this.networkEnabled)return!0;if(!this.cn(e)){if(!e.allowTabSynchronization)throw new Gr(zr.FAILED_PRECONDITION,Ku);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ju(t).Lt().next(t=>void 0===this.fn(t,5e3).find(t=>{if(this.clientId!==t.clientId){const e=!this.inForeground&&t.inForeground,n=this.networkEnabled===t.networkEnabled;if(!this.networkEnabled&&t.networkEnabled||e&&n)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pr("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var t=this;return(0,_.Z)(function*(){t.Be=!1,t._n(),t.Ke&&(t.Ke.cancel(),t.Ke=null),t.mn(),t.gn(),yield t.Ge.runTransaction("shutdown","readwrite",[ba.store,Za.store],e=>{const n=new Ka(e,ts.T);return t.on(n).next(()=>t.un(n))}),t.Ge.close(),t.yn()})()}fn(t,e){return t.filter(t=>this.ln(t.updateTimeMs,e)&&!this.wn(t.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",t=>Ju(t).Lt().next(t=>this.fn(t,18e5).map(t=>t.clientId)))}get started(){return this.Be}getMutationQueue(t){return _u.Yt(t,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(t,e,n){let r;return Pr("IndexedDbPersistence","Starting transaction:",t),this.Ge.runTransaction(t,"readonly"===e?"readonly":"readwrite",qa,s=>(r=new Ka(s,this.Le?this.Le.next():ts.T),"readwrite-primary"===e?this.sn(r).next(t=>!!t||this.rn(r)).next(e=>{if(!e)throw Mr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Gr(zr.FAILED_PRECONDITION,Ra);return n(r)}).next(t=>this.an(r).next(()=>t)):this.En(r).next(()=>n(r)))).then(t=>(r.raiseOnCommittedEvent(),t))}En(t){return Wu(t).get(ba.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Gr(zr.FAILED_PRECONDITION,Ku)})}an(t){const e=new ba(this.clientId,this.allowTabSynchronization,Date.now());return Wu(t).put(ba.key,e)}static bt(){return Fa.bt()}on(t){const e=Wu(t);return e.get(ba.key).next(t=>this.cn(t)?(Pr("IndexedDbPersistence","Releasing primary lease."),e.delete(ba.key)):Pa.resolve())}ln(t,e){const n=Date.now();return!(t<n-e||t>n&&(Mr(`Detected an update time that is in the future: ${t} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ue=()=>{this._n(),(0,S.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(t){var e;try{const n=null!==(null===(e=this.Ye)||void 0===e?void 0:e.getItem(this.dn(t)));return Pr("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return Mr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(t){Mr("Failed to set zombie client id.",t)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(t){}}dn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Wu(t){return Qa(t,ba.store)}function Ju(t){return Qa(t,Za.store)}function Yu(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Xu{constructor(t,e){this.progress=t,this.Tn=e}}class tc{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next(n=>this.Rn(t,e,n))}Rn(t,e,n){return this.He.getEntry(t,e).next(t=>{for(const e of n)e.applyToLocalView(t);return t})}bn(t,e){t.forEach((t,n)=>{for(const r of e)r.applyToLocalView(n)})}Pn(t,e){return this.He.getEntries(t,e).next(e=>this.vn(t,e).next(()=>e))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>this.bn(e,t))}getDocumentsMatchingQuery(t,e,n){return function(t){return ks.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):vi(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new ks(e)).next(t=>{let e=bo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}Sn(t,e,n){const r=e.collectionGroup;let s=bo();return this.Ht.getCollectionParents(t,r).next(i=>Pa.forEach(i,i=>{const o=function(t,e){return new hi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,i.child(r));return this.Dn(t,o,n).next(t=>{t.forEach((t,e)=>{s=s.insert(t,e)})})}).next(()=>s))}Dn(t,e,n){let r,s;return this.He.getDocumentsMatchingQuery(t,e,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(t,e))).next(e=>(s=e,this.Cn(t,s,r).next(t=>{r=t;for(const e of s)for(const t of e.mutations){const n=t.key;let s=r.get(n);null==s&&(s=$s.newInvalidDocument(n),r=r.insert(n,s)),Qi(t,s,e.localWriteTime),s.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((t,n)=>{Si(e,n)||(r=r.remove(t))}),r))}Cn(t,e,n){let r=Ao();for(const i of e)for(const t of i.mutations)t instanceof to&&null===n.get(t.key)&&(r=r.add(t.key));let s=n;return this.He.getEntries(t,r).next(t=>(t.forEach((t,e)=>{e.isFoundDocument()&&(s=s.insert(t,e))}),s))}}class ec{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=r}static kn(t,e){let n=Ao(),r=Ao();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ec(t,e.fromCache,n,r)}}class nc{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(as.min())?this.Fn(t,e):this.On.Pn(t,r).next(s=>{const i=this.Mn(e,s);return(pi(e)||gi(e))&&this.Ln(e.limitType,i,r,n)?this.Fn(t,e):(Ur()<=A.in.DEBUG&&Pr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ai(e)),this.On.getDocumentsMatchingQuery(t,e,n).next(t=>(i.forEach(e=>{t=t.insert(e.key,e)}),t)))})}Mn(t,e){let n=new go(Ei(t));return e.forEach((e,r)=>{Si(t,r)&&(n=n.add(r))}),n}Ln(t,e,n,r){if(n.size!==e.size)return!0;const s="F"===t?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Fn(t,e){return Ur()<=A.in.DEBUG&&Pr("QueryEngine","Using full collection scan to execute query:",Ai(e)),this.On.getDocumentsMatchingQuery(t,e,as.min())}}class rc{constructor(t,e,n,r){this.persistence=t,this.Bn=e,this.N=r,this.Un=new ho(rs),this.qn=new Mu(t=>Hs(t),Ks),this.Kn=as.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new tc(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Un))}}function sc(t,e,n,r){return new rc(t,e,n,r)}function ic(t,e){return oc.apply(this,arguments)}function oc(){return(oc=(0,_.Z)(function*(t,e){const n=$r(t);let r=n.In,s=n.Qn;const i=yield n.persistence.runTransaction("Handle user change","readonly",t=>{let i;return n.In.getAllMutationBatches(t).next(o=>(i=o,r=n.persistence.getMutationQueue(e),s=new tc(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t))).next(e=>{const n=[],r=[];let o=Ao();for(const t of i){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return s.Pn(t,o).next(t=>({Wn:t,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=s,n.Bn.$n(n.Qn),i})).apply(this,arguments)}function ac(t,e){const n=$r(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const r=e.batch.keys(),s=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const s=n.batch,i=s.keys();let o=Pa.resolve();return i.forEach(t=>{o=o.next(()=>r.getEntry(e,t)).next(e=>{const i=n.docVersions.get(t);jr(null!==i),e.version.compareTo(i)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(()=>t.In.removeMutationBatch(e,s))}(n,t,e,s).next(()=>s.apply(t)).next(()=>n.In.performConsistencyCheck(t)).next(()=>n.Qn.Pn(t,r))})}function uc(t){const e=$r(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function cc(t,e){const n=$r(t),r=e.snapshotVersion;let s=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const i=n.jn.newChangeBuffer({trackRemovals:!0});s=n.Un;const o=[];e.targetChanges.forEach((e,i)=>{const a=s.get(i);if(!a)return;o.push(n.ze.removeMatchingKeys(t,e.removedDocuments,i).next(()=>n.ze.addMatchingKeys(t,e.addedDocuments,i)));const u=e.resumeToken;if(u.approximateByteSize()>0){const c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);s=s.insert(i,c),function(t,e,n){return jr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.ze.updateTargetData(t,c))}});let a=vo();if(e.documentUpdates.forEach((r,s)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(lc(t,i,e.documentUpdates,r,void 0).next(t=>{a=t})),!r.isEqual(as.min())){const e=n.ze.getLastRemoteSnapshotVersion(t).next(e=>n.ze.setTargetsMetadata(t,t.currentSequenceNumber,r));o.push(e)}return Pa.waitFor(o).next(()=>i.apply(t)).next(()=>n.Qn.vn(t,a)).next(()=>a)}).then(t=>(n.Un=s,t))}function lc(t,e,n,r,s){let i=Ao();return n.forEach(t=>i=i.add(t)),e.getEntries(t,i).next(t=>{let i=vo();return n.forEach((n,o)=>{const a=t.get(n),u=(null==s?void 0:s.get(n))||r;o.isNoDocument()&&o.version.isEqual(as.min())?(e.removeEntry(n,u),i=i.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),i=i.insert(n,o)):Pr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),i})}function hc(t,e){const n=$r(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e)))}function dc(t,e){const n=$r(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let r;return n.ze.getTargetData(t,e).next(s=>s?(r=s,Pa.resolve(r)):n.ze.allocateTargetId(t).next(s=>(r=new Ya(e,s,0,t.currentSequenceNumber),n.ze.addTargetData(t,r).next(()=>r))))}).then(t=>{const r=n.Un.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function fc(t,e,n){return pc.apply(this,arguments)}function pc(){return(pc=(0,_.Z)(function*(t,e,n){const r=$r(t),s=r.Un.get(e),i=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",i,t=>r.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!ja(t))throw t;Pr("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.Un=r.Un.remove(e),r.qn.delete(s.target)})).apply(this,arguments)}function gc(t,e,n){const r=$r(t);let s=as.min(),i=Ao();return r.persistence.runTransaction("Execute query","readonly",t=>function(t,e,n){const r=$r(t),s=r.qn.get(n);return void 0!==s?Pa.resolve(r.Un.get(s)):r.ze.getTargetData(e,n)}(r,t,bi(e)).next(e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(t,e.targetId).next(t=>{i=t})}).next(()=>r.Bn.getDocumentsMatchingQuery(t,e,n?s:as.min(),n?i:Ao())).next(t=>({documents:t,Gn:i})))}function mc(t,e){const n=$r(t),r=$r(n.ze),s=n.Un.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",t=>r.Et(t,e).next(t=>t?t.target:null))}function yc(t){const e=$r(t);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(t,e,n){const r=$r(t);let s=vo(),i=nu(n);const o=$u(e),a=IDBKeyRange.lowerBound(i,!0);return o.Kt({index:Ea.readTimeIndex,range:a},(t,e)=>{const n=tu(r.N,e);s=s.insert(n.key,n),i=e.readTime}).next(()=>({Tn:s,readTime:ru(i)}))}(e.jn,t,e.Kn)).then(({Tn:t,readTime:n})=>(e.Kn=n,t))}function vc(){return(vc=(0,_.Z)(function*(t){const e=$r(t);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(t){const e=$u(t);let n=as.min();return e.Kt({index:Ea.readTimeIndex,reverse:!0},(t,e,r)=>{e.readTime&&(n=ru(e.readTime)),r.done()}).next(()=>n)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function wc(){return(wc=(0,_.Z)(function*(t,e,n,r){const s=$r(t);let i=Ao(),o=vo(),a=To();for(const l of n){const t=e.zn(l.metadata.name);l.document&&(i=i.add(t)),o=o.insert(t,e.Hn(l)),a=a.insert(t,e.Jn(l.metadata.readTime))}const u=s.jn.newChangeBuffer({trackRemovals:!0}),c=yield dc(s,function(t){return bi(fi(ds.fromString(`__bundle__/docs/${t}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",t=>lc(t,u,o,as.min(),a).next(e=>(u.apply(t),e)).next(e=>s.ze.removeMatchingKeysForTargetId(t,c.targetId).next(()=>s.ze.addMatchingKeys(t,i,c.targetId)).next(()=>s.Qn.vn(t,e)).next(()=>e)))})).apply(this,arguments)}function bc(t,e){return _c.apply(this,arguments)}function _c(){return(_c=(0,_.Z)(function*(t,e,n=Ao()){const r=yield dc(t,bi(cu(e.bundledQuery))),s=$r(t);return s.persistence.runTransaction("Save named query","readwrite",t=>{const i=Bo(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Je.saveNamedQuery(t,e);const o=r.withResumeToken(ms.EMPTY_BYTE_STRING,i);return s.Un=s.Un.insert(o.targetId,o),s.ze.updateTargetData(t,o).next(()=>s.ze.removeMatchingKeysForTargetId(t,r.targetId)).next(()=>s.ze.addMatchingKeys(t,n,r.targetId)).next(()=>s.Je.saveNamedQuery(t,e))})})).apply(this,arguments)}class Tc{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return Pa.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:Bo(n.createTime)}),Pa.resolve()}getNamedQuery(t,e){return Pa.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:cu(t.bundledQuery),readTime:Bo(t.readTime)}}(e)),Pa.resolve()}}class Ic{constructor(){this.Zn=new go(Ac.ts),this.es=new go(Ac.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new Ac(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.rs(new Ac(t,e))}os(t,e){t.forEach(t=>this.removeReference(t,e))}cs(t){const e=new ks(new ds([])),n=new Ac(e,t),r=new Ac(e,t+1),s=[];return this.es.forEachInRange([n,r],t=>{this.rs(t),s.push(t.key)}),s}us(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new ks(new ds([])),n=new Ac(e,t),r=new Ac(e,t+1);let s=Ao();return this.es.forEachInRange([n,r],t=>{s=s.add(t.key)}),s}containsKey(t){const e=new Ac(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ac{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return ks.comparator(t.key,e.key)||rs(t.ls,e.ls)}static ns(t,e){return rs(t.ls,e.ls)||ks.comparator(t.key,e.key)}}class Sc{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new go(Ac.ts)}checkEmpty(t){return Pa.resolve(0===this.In.length)}addMutationBatch(t,e,n,r){const s=this.fs;this.fs++;const i=new Wa(s,e,n,r);this.In.push(i);for(const o of r)this.ds=this.ds.add(new Ac(o.key,s)),this.Ht.addToCollectionParentIndex(t,o.key.path.popLast());return Pa.resolve(i)}lookupMutationBatch(t,e){return Pa.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=this._s(e+1),r=n<0?0:n;return Pa.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return Pa.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return Pa.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ac(e,0),r=new Ac(e,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([n,r],t=>{const e=this.ws(t.ls);s.push(e)}),Pa.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new go(rs);return e.forEach(t=>{const e=new Ac(t,0),r=new Ac(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,r],t=>{n=n.add(t.ls)})}),Pa.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;ks.isDocumentKey(s)||(s=s.child(""));const i=new Ac(new ks(s),0);let o=new go(rs);return this.ds.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ls)),!0)},i),Pa.resolve(this.gs(o))}gs(t){const e=[];return t.forEach(t=>{const n=this.ws(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){jr(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return Pa.forEach(e.mutations,r=>{const s=new Ac(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=n})}te(t){}containsKey(t,e){const n=new Ac(e,0),r=this.ds.firstAfterOrEqual(n);return Pa.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Pa.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class Ec{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new ho(ks.comparator),this.size=0}addEntry(t,e,n){const r=e.key,s=this.docs.get(r),i=s?s.size:0,o=this.ps(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-i,this.Ht.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Pa.resolve(n?n.document.clone():$s.newInvalidDocument(e))}getEntries(t,e){let n=vo();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():$s.newInvalidDocument(t))}),Pa.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=vo();const s=new ks(e.path.child("")),i=this.docs.getIteratorFrom(s);for(;i.hasNext();){const{key:t,value:{document:s,readTime:o}}=i.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||Si(e,s)&&(r=r.insert(s.key,s.clone()))}return Pa.resolve(r)}Es(t,e){return Pa.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new kc(this)}getSize(t){return Pa.resolve(this.size)}}class kc extends Fu{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?e.push(this.Se.addEntry(t,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),Pa.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class xc{constructor(t){this.persistence=t,this.Ts=new Mu(t=>Hs(t),Ks),this.lastRemoteSnapshotVersion=as.min(),this.highestTargetId=0,this.Is=0,this.As=new Ic,this.targetCount=0,this.Rs=Eu.se()}forEachTarget(t,e){return this.Ts.forEach((t,n)=>e(n)),Pa.resolve()}getLastRemoteSnapshotVersion(t){return Pa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Pa.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),Pa.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),Pa.resolve()}ae(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Eu(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ae(e),this.targetCount+=1,Pa.resolve()}updateTargetData(t,e){return this.ae(e),Pa.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,Pa.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Ts.forEach((i,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Ts.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)}),Pa.waitFor(s).next(()=>r)}getTargetCount(t){return Pa.resolve(this.targetCount)}getTargetData(t,e){const n=this.Ts.get(e)||null;return Pa.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),Pa.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(e=>{s.push(r.markPotentiallyOrphaned(t,e))}),Pa.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),Pa.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return Pa.resolve(n)}containsKey(t,e){return Pa.resolve(this.As.containsKey(e))}}class Cc{constructor(t,e){this.bs={},this.Le=new ts(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new xc(this),this.Ht=new fu,this.He=function(t,e){return new Ec(t,e)}(this.Ht,t=>this.referenceDelegate.Ps(t)),this.N=new Xa(e),this.Je=new Tc(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new Sc(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){Pr("MemoryPersistence","Starting transaction:",t);const r=new Nc(this.Le.next());return this.referenceDelegate.vs(),n(r).next(t=>this.referenceDelegate.Vs(r).next(()=>t)).toPromise().then(t=>(r.raiseOnCommittedEvent(),t))}Ss(t,e){return Pa.or(Object.values(this.bs).map(n=>()=>n.containsKey(t,e)))}}class Nc extends Ua{constructor(t){super(),this.currentSequenceNumber=t}}class Dc{constructor(t){this.persistence=t,this.Ds=new Ic,this.Cs=null}static Ns(t){return new Dc(t)}get xs(){if(this.Cs)return this.Cs;throw Br()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),Pa.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),Pa.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Pa.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach(t=>this.xs.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.xs.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pa.forEach(this.xs,n=>{const r=ks.fromPath(n);return this.ks(t,r).next(t=>{t||e.removeEntry(r)})}).next(()=>(this.Cs=null,e.apply(t)))}updateLimboDocument(t,e){return this.ks(t,e).next(t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())})}Ps(t){return 0}ks(t,e){return Pa.or([()=>Pa.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}function Zc(t,e){return`firestore_clients_${t}_${e}`}function Oc(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Lc(t,e){return`firestore_targets_${t}_${e}`}class qc{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static $s(t,e,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new Gr(r.error.code,r.error.message))),i?new qc(t,e,r.state,s):(Mr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Rc{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static $s(t,e){const n=JSON.parse(e);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new Gr(n.error.code,n.error.message))),s?new Rc(t,n.state,r):(Mr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Uc{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=Eo();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=Es(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new Uc(t,s):(Mr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Pc{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Pc(e.clientId,e.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Mc{constructor(){this.activeTargetIds=Eo()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fc{constructor(t,e,n,r,s){this.window=t,this.Oe=e,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new ho(rs),this.started=!1,this.Ks=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.js=Zc(this.persistenceKey,this.Ls),this.Qs=function(t){return`firestore_sequence_number_${t}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Mc),this.Ws=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.Hs=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Js=function(t){return`firestore_bundle_loaded_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,_.Z)(function*(){const e=yield t.syncEngine.pn();for(const r of e){if(r===t.Ls)continue;const e=t.getItem(Zc(t.persistenceKey,r));if(e){const n=Uc.$s(r,e);n&&(t.qs=t.qs.insert(n.clientId,n))}}t.Ys();const n=t.storage.getItem(t.Hs);if(n){const e=t.Xs(n);e&&t.Zs(e)}for(const r of t.Ks)t.Us(r);t.Ks=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Qs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(t){let e=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ei(t,"pending")}updateMutationState(t,e,n){this.ei(t,e,n),this.ni(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(Lc(this.persistenceKey,t));if(n){const r=Rc.$s(t,n);r&&(e=r.state)}}return this.si.Fs(t),this.Ys(),e}removeLocalQueryTarget(t){this.si.Ms(t),this.Ys()}isLocalQueryTarget(t){return this.si.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Lc(this.persistenceKey,t))}updateQueryState(t,e,n){this.ii(t,e,n)}handleUserChange(t,e,n){e.forEach(t=>{this.ni(t)}),this.currentUser=t,n.forEach(t=>{this.addPendingMutation(t)})}setOnlineState(t){this.ri(t)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Pr("SharedClientState","READ",t,e),e}setItem(t,e){Pr("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Pr("SharedClientState","REMOVE",t),this.storage.removeItem(t)}Us(t){var e=this;const n=t;if(n.storageArea===this.storage){if(Pr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,_.Z)(function*(){if(e.started){if(null!==n.key)if(e.Ws.test(n.key)){if(null==n.newValue){const t=e.ai(n.key);return e.ci(t,null)}{const t=e.ui(n.key,n.newValue);if(t)return e.ci(t.clientId,t)}}else if(e.Gs.test(n.key)){if(null!==n.newValue){const t=e.hi(n.key,n.newValue);if(t)return e.li(t)}}else if(e.zs.test(n.key)){if(null!==n.newValue){const t=e.fi(n.key,n.newValue);if(t)return e.di(t)}}else if(n.key===e.Hs){if(null!==n.newValue){const t=e.Xs(n.newValue);if(t)return e.Zs(t)}}else if(n.key===e.Qs){const t=function(t){let e=ts.T;if(null!=t)try{const n=JSON.parse(t);jr("number"==typeof n),e=n}catch(t){Mr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue);t!==ts.T&&e.sequenceNumberHandler(t)}else if(n.key===e.Js)return e.syncEngine.wi()}else e.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(t,e,n){const r=new qc(this.currentUser,t,e,n),s=Oc(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Os())}ni(t){const e=Oc(this.persistenceKey,this.currentUser,t);this.removeItem(e)}ri(t){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:t}))}ii(t,e,n){const r=Lc(this.persistenceKey,t),s=new Rc(t,e,n);this.setItem(r,s.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(t){const e=this.Ws.exec(t);return e?e[1]:null}ui(t,e){const n=this.ai(t);return Uc.$s(n,e)}hi(t,e){const n=this.Gs.exec(t),r=Number(n[1]);return qc.$s(new Lr(void 0!==n[2]?n[2]:null),r,e)}fi(t,e){const n=this.zs.exec(t),r=Number(n[1]);return Rc.$s(r,e)}Xs(t){return Pc.$s(t)}li(t){var e=this;return(0,_.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine._i(t.batchId,t.state,t.error);Pr("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}di(t){return this.syncEngine.mi(t.targetId,t.state,t.error)}ci(t,e){const n=e?this.qs.insert(t,e):this.qs.remove(t),r=this.ti(this.qs),s=this.ti(n),i=[],o=[];return s.forEach(t=>{r.has(t)||i.push(t)}),r.forEach(t=>{s.has(t)||o.push(t)}),this.syncEngine.gi(i,o).then(()=>{this.qs=n})}Zs(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ti(t){let e=Eo();return t.forEach((t,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class Vc{constructor(){this.yi=new Mc,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new Mc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class Bc{Ei(t){}shutdown(){}}class jc{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Pr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){Pr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const $c={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class zc{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class Gc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Fi=(t.ssl?"https":"http")+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,r){const s=this.Bi(t,e);Pr("RestConnection","Sending: ",s,n);const i={};return this.Ui(i,r),this.qi(t,s,i,n).then(t=>(Pr("RestConnection","Received: ",t),t),e=>{throw Fr("RestConnection",`${t} failed with error: `,e,"url: ",s,"request:",n),e})}Ki(t,e,n,r){return this.Li(t,e,n,r)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+qr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){return`${this.Fi}/v1/${e}:${$c[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,r){return new Promise((s,i)=>{const o=new Or;o.listenOnce(Cr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case xr.NO_ERROR:const e=o.getResponseJson();Pr("Connection","XHR received:",JSON.stringify(e)),s(e);break;case xr.TIMEOUT:Pr("Connection",'RPC "'+t+'" timed out'),i(new Gr(zr.DEADLINE_EXCEEDED,"Request time out"));break;case xr.HTTP_ERROR:const n=o.getStatus();if(Pr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(zr).indexOf(e)>=0?e:zr.UNKNOWN}(t.status);i(new Gr(e,t.message))}else i(new Gr(zr.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Gr(zr.UNAVAILABLE,"Connection failed."));break;default:Br()}}finally{Pr("Connection",'RPC "'+t+'" completed.')}});const a=JSON.stringify(r);o.send(e,"POST",a,n,15)})}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ir,s=me(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(i.xmlHttpFactory=new Dr({})),this.Ui(i.initMessageHeaders,e),(0,S.uI)()||(0,S.b$)()||(0,S.d)()||(0,S.w1)()||(0,S.Mn)()||(0,S.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Pr("Connection","Creating WebChannel: "+o,i);const a=r.createWebChannel(o,i);let u=!1,c=!1;const l=new zc({vi:t=>{c?Pr("Connection","Not sending because WebChannel is closed:",t):(u||(Pr("Connection","Opening WebChannel transport."),a.open(),u=!0),Pr("Connection","WebChannel sending:",t),a.send(t))},Vi:()=>a.close()}),h=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return h(a,Zr.EventType.OPEN,()=>{c||Pr("Connection","WebChannel transport opened.")}),h(a,Zr.EventType.CLOSE,()=>{c||(c=!0,Pr("Connection","WebChannel transport closed"),l.$i())}),h(a,Zr.EventType.ERROR,t=>{c||(c=!0,Fr("Connection","WebChannel transport errored:",t),l.$i(new Gr(zr.UNAVAILABLE,"The operation could not be completed")))}),h(a,Zr.EventType.MESSAGE,t=>{var e;if(!c){const n=t.data[0];jr(!!n);const r=n,s=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(s){Pr("Connection","WebChannel received error:",s);const t=s.status;let e=function(t){const e=ao[t];if(void 0!==e)return lo(e)}(t),n=s.message;void 0===e&&(e=zr.INTERNAL,n="Unknown error status: "+t+" with message "+s.message),c=!0,l.$i(new Gr(e,n)),a.close()}else Pr("Connection","WebChannel received:",n),l.Oi(n)}}),h(s,Nr.STAT_EVENT,t=>{10===t.stat?Pr("Connection","Detected buffering proxy"):11===t.stat&&Pr("Connection","Detected no buffering proxy")}),setTimeout(()=>{l.ki()},0),l}}function Hc(){return"undefined"!=typeof window?window:null}function Kc(){return"undefined"!=typeof document?document:null}function Qc(t){return new Po(t,!0)}class Wc{constructor(t,e,n=1e3,r=1.5,s=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=r,this.Gi=s,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,e-n);r>0&&Pr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),t())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Jc{constructor(t,e,n,r,s,i){this.Oe=t,this.er=n,this.nr=r,this.credentialsProvider=s,this.listener=i,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Wc(t,e)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var t=this;return(0,_.Z)(function*(){t.ar()&&(yield t.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(t){this._r(),this.stream.send(t)}dr(){var t=this;return(0,_.Z)(function*(){if(t.cr())return t.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(t,e){var n=this;return(0,_.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==t?n.rr.reset():e&&e.code===zr.RESOURCE_EXHAUSTED?(Mr(e.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):e&&e.code===zr.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=t,yield n.listener.Ci(e)})()}mr(){}auth(){this.state=1;const t=this.gr(this.sr),e=this.sr;this.credentialsProvider.getToken().then(t=>{this.sr===e&&this.yr(t)},e=>{t(()=>{const t=new Gr(zr.UNKNOWN,"Fetching auth token failed: "+e.message);return this.pr(t)})})}yr(t){const e=this.gr(this.sr);this.stream=this.Er(t),this.stream.Si(()=>{e(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(t=>{e(()=>this.pr(t))}),this.stream.onMessage(t=>{e(()=>this.onMessage(t))})}ur(){var t=this;this.state=4,this.rr.Xi((0,_.Z)(function*(){t.state=0,t.start()}))}pr(t){return Pr("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(3,t)}gr(t){return e=>{this.Oe.enqueueAndForget(()=>this.sr===t?e():(Pr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yc extends Jc{constructor(t,e,n,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle",e,n,s),this.N=r}Er(t){return this.nr.ji("Listen",t)}onMessage(t){this.rr.reset();const e=function(t,e){let n;if("targetChange"in e){const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Br()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(t,e){return t.D?(jr(void 0===e||"string"==typeof e),ms.fromBase64String(e||"")):(jr(void 0===e||e instanceof Uint8Array),ms.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?zr.UNKNOWN:lo(t.code);return new Gr(e,t.message||"")}(o);n=new Do(r,s,i,a||null)}else if("documentChange"in e){const r=e.documentChange,s=Go(t,r.document.name),i=Bo(r.document.updateTime),o=new Bs({mapValue:{fields:r.document.fields}}),a=$s.newFoundDocument(s,i,o);n=new Co(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,s=Go(t,r.document),i=r.readTime?Bo(r.readTime):as.min(),o=$s.newNoDocument(s,i);n=new Co([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,s=Go(t,r.document);n=new Co([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Br();{const t=e.filter,r=new oo(t.count||0);n=new No(t.targetId,r)}}return n}(this.N,t),n=function(t){if(!("targetChange"in t))return as.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?as.min():e.readTime?Bo(e.readTime):as.min()}(t);return this.listener.Tr(e,n)}Ir(t){const e={};e.database=Qo(this.N),e.addTarget=function(t,e){let n;const r=e.target;return n=Qs(r)?{documents:ea(t,r)}:{query:na(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Fo(t,e.resumeToken):e.snapshotVersion.compareTo(as.min())>0&&(n.readTime=Mo(t,e.snapshotVersion.toTimestamp())),n}(this.N,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Br()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)}Ar(t){const e={};e.database=Qo(this.N),e.removeTarget=t,this.wr(e)}}class Xc extends Jc{constructor(t,e,n,r,s){super(t,"write_stream_connection_backoff","write_stream_idle",e,n,s),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(t){return this.nr.ji("Write",t)}onMessage(t){if(jr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();const e=function(t,e){return t&&t.length>0?(jr(void 0!==e),t.map(t=>function(t,e){let n=Bo(t.updateTime?t.updateTime:e);return n.isEqual(as.min())&&(n=Bo(e)),new $i(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=Bo(t.commitTime);return this.listener.vr(n,e)}return jr(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const t={};t.database=Qo(this.N),this.wr(t)}Pr(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>Xo(this.N,t))};this.wr(e)}}class tl extends class{}{constructor(t,e,n){super(),this.credentials=t,this.nr=e,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Gr(zr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(t,e,n,r)).catch(t=>{throw"FirebaseError"===t.name?(t.code===zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new Gr(zr.UNKNOWN,t.toString())})}Ki(t,e,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(t,e,n,r)).catch(t=>{throw"FirebaseError"===t.name?(t.code===zr.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new Gr(zr.UNKNOWN,t.toString())})}terminate(){this.Dr=!0}}class el{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(t){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Fr("Offline")))}set(t){this.Br(),this.Nr=0,"Online"===t&&(this.$r=!1),this.Fr(t)}Fr(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Mr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Mr(e),this.$r=!1):Pr("OnlineStateTracker",e)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class nl{constructor(t,e,n,r,s){var i=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=s,this.Qr.Ei(t=>{n.enqueueAndForget((0,_.Z)(function*(){var t;fl(i)&&(Pr("RemoteStore","Restarting streams for network reachability change."),yield(t=(0,_.Z)(function*(t){const e=$r(t);e.Kr.add(4),yield il(e),e.Wr.set("Unknown"),e.Kr.delete(4),yield rl(e)}),function(e){return t.apply(this,arguments)})(i))}))}),this.Wr=new el(n,r)}}function rl(t){return sl.apply(this,arguments)}function sl(){return(sl=(0,_.Z)(function*(t){if(fl(t))for(const e of t.jr)yield e(!0)})).apply(this,arguments)}function il(t){return ol.apply(this,arguments)}function ol(){return(ol=(0,_.Z)(function*(t){for(const e of t.jr)yield e(!1)})).apply(this,arguments)}function al(t,e){const n=$r(t);n.qr.has(e.targetId)||(n.qr.set(e.targetId,e),dl(n)?hl(n):Fl(n).cr()&&cl(n,e))}function ul(t,e){const n=$r(t),r=Fl(n);n.qr.delete(e),r.cr()&&ll(n,e),0===n.qr.size&&(r.cr()?r.lr():fl(n)&&n.Wr.set("Unknown"))}function cl(t,e){t.Gr.Y(e.targetId),Fl(t).Ir(e)}function ll(t,e){t.Gr.Y(e),Fl(t).Ar(e)}function hl(t){t.Gr=new Oo({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.qr.get(e)||null}),Fl(t).start(),t.Wr.Or()}function dl(t){return fl(t)&&!Fl(t).ar()&&t.qr.size>0}function fl(t){return 0===$r(t).Kr.size}function pl(t){t.Gr=void 0}function gl(t){return ml.apply(this,arguments)}function ml(){return(ml=(0,_.Z)(function*(t){t.qr.forEach((e,n)=>{cl(t,e)})})).apply(this,arguments)}function yl(t,e){return vl.apply(this,arguments)}function vl(){return(vl=(0,_.Z)(function*(t,e){pl(t),dl(t)?(t.Wr.Lr(e),hl(t)):t.Wr.set("Unknown")})).apply(this,arguments)}function wl(t,e,n){return bl.apply(this,arguments)}function bl(){return(bl=(0,_.Z)(function*(t,e,n){if(t.Wr.set("Online"),e instanceof Do&&2===e.state&&e.cause)try{yield(r=(0,_.Z)(function*(t,e){const n=e.cause;for(const r of e.targetIds)t.qr.has(r)&&(yield t.remoteSyncer.rejectListen(r,n),t.qr.delete(r),t.Gr.removeTarget(r))}),function(t,e){return r.apply(this,arguments)})(t,e)}catch(n){Pr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield _l(t,n)}else if(e instanceof Co?t.Gr.rt(e):e instanceof No?t.Gr.ft(e):t.Gr.ct(e),!n.isEqual(as.min()))try{const e=yield uc(t.localStore);n.compareTo(e)>=0&&(yield function(t,e){const n=t.Gr._t(e);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=t.qr.get(r);s&&t.qr.set(r,s.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(e=>{const n=t.qr.get(e);if(!n)return;t.qr.set(e,n.withResumeToken(ms.EMPTY_BYTE_STRING,n.snapshotVersion)),ll(t,e);const r=new Ya(n.target,e,1,n.sequenceNumber);cl(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n))}catch(e){Pr("RemoteStore","Failed to raise snapshot:",e),yield _l(t,e)}var r})).apply(this,arguments)}function _l(t,e,n){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,_.Z)(function*(t,e,n){if(!ja(e))throw e;t.Kr.add(1),yield il(t),t.Wr.set("Offline"),n||(n=()=>uc(t.localStore)),t.asyncQueue.enqueueRetryable((0,_.Z)(function*(){Pr("RemoteStore","Retrying IndexedDB access"),yield n(),t.Kr.delete(1),yield rl(t)}))})).apply(this,arguments)}function Il(t,e){return e().catch(n=>_l(t,n,e))}function Al(t){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,_.Z)(function*(t){const e=$r(t),n=Vl(e);let r=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;El(e);)try{const t=yield hc(e.localStore,r);if(null===t){0===e.Ur.length&&n.lr();break}r=t.batchId,kl(e,t)}catch(t){yield _l(e,t)}xl(e)&&Cl(e)})).apply(this,arguments)}function El(t){return fl(t)&&t.Ur.length<10}function kl(t,e){t.Ur.push(e);const n=Vl(t);n.cr()&&n.br&&n.Pr(e.mutations)}function xl(t){return fl(t)&&!Vl(t).ar()&&t.Ur.length>0}function Cl(t){Vl(t).start()}function Nl(t){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,_.Z)(function*(t){Vl(t).Sr()})).apply(this,arguments)}function Zl(t){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.Z)(function*(t){const e=Vl(t);for(const n of t.Ur)e.Pr(n.mutations)})).apply(this,arguments)}function Ll(t,e,n){return ql.apply(this,arguments)}function ql(){return(ql=(0,_.Z)(function*(t,e,n){const r=t.Ur.shift(),s=Ja.from(r,e,n);yield Il(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),yield Al(t)})).apply(this,arguments)}function Rl(t,e){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,_.Z)(function*(t,e){var n;e&&Vl(t).br&&(yield(n=(0,_.Z)(function*(t,e){if(co(n=e.code)&&n!==zr.ABORTED){const n=t.Ur.shift();Vl(t).hr(),yield Il(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),yield Al(t)}var n}),function(t,e){return n.apply(this,arguments)})(t,e)),xl(t)&&Cl(t)})).apply(this,arguments)}function Pl(t,e){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,_.Z)(function*(t,e){const n=$r(t);e?(n.Kr.delete(2),yield rl(n)):e||(n.Kr.add(2),yield il(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function Fl(t){return t.zr||(t.zr=function(t,e,n){const r=$r(t);return r.Cr(),new Yc(e,r.nr,r.credentials,r.N,n)}(t.datastore,t.asyncQueue,{Si:gl.bind(null,t),Ci:yl.bind(null,t),Tr:wl.bind(null,t)}),t.jr.push(function(){var e=(0,_.Z)(function*(e){e?(t.zr.hr(),dl(t)?hl(t):t.Wr.set("Unknown")):(yield t.zr.stop(),pl(t))});return function(t){return e.apply(this,arguments)}}())),t.zr}function Vl(t){return t.Hr||(t.Hr=function(t,e,n){const r=$r(t);return r.Cr(),new Xc(e,r.nr,r.credentials,r.N,n)}(t.datastore,t.asyncQueue,{Si:Nl.bind(null,t),Ci:Rl.bind(null,t),Vr:Zl.bind(null,t),vr:Ll.bind(null,t)}),t.jr.push(function(){var e=(0,_.Z)(function*(e){e?(t.Hr.hr(),yield Al(t)):(yield t.Hr.stop(),t.Ur.length>0&&(Pr("RemoteStore",`Stopping write stream with ${t.Ur.length} pending writes`),t.Ur=[]))});return function(t){return e.apply(this,arguments)}}())),t.Hr}class Bl{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}static createAndSchedule(t,e,n,r,s){const i=Date.now()+n,o=new Bl(t,e,i,r,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gr(zr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jl(t,e){if(Mr("AsyncQueue",`${e}: ${t}`),ja(t))return new Gr(zr.UNAVAILABLE,`${e}: ${t}`);throw t}class $l{constructor(t){this.comparator=t?(e,n)=>t(e,n)||ks.comparator(e.key,n.key):(t,e)=>ks.comparator(t.key,e.key),this.keyedMap=bo(),this.sortedSet=new ho(this.comparator)}static emptySet(t){return new $l(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof $l))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new $l;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class zl{constructor(){this.Jr=new ho(ks.comparator)}track(t){const e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Br():this.Jr=this.Jr.insert(e,t)}Yr(){const t=[];return this.Jr.inorderTraversal((e,n)=>{t.push(n)}),t}}class Gl{constructor(t,e,n,r,s,i,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const s=[];return e.forEach(t=>{s.push({type:0,doc:t})}),new Gl(t,e,$l.emptySet(e),s,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ti(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class Hl{constructor(){this.Xr=void 0,this.listeners=[]}}class Kl{constructor(){this.queries=new Mu(t=>Ii(t),Ti),this.onlineState="Unknown",this.Zr=new Set}}function Ql(t,e){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,_.Z)(function*(t,e){const n=$r(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Hl),s)try{i.Xr=yield n.onListen(r)}catch(t){const n=jl(t,`Initialization of query '${Ai(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,i),i.listeners.push(e),e.eo(n.onlineState),i.Xr&&e.no(i.Xr)&&eh(n)})).apply(this,arguments)}function Jl(t,e){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,_.Z)(function*(t,e){const n=$r(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const t=i.listeners.indexOf(e);t>=0&&(i.listeners.splice(t,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Xl(t,e){const n=$r(t);let r=!1;for(const s of e){const t=n.queries.get(s.query);if(t){for(const e of t.listeners)e.no(s)&&(r=!0);t.Xr=s}}r&&eh(n)}function th(t,e,n){const r=$r(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function eh(t){t.Zr.forEach(t=>{t.next()})}class nh{constructor(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Gl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.io?this.oo(t)&&(this.so.next(t),e=!0):this.ao(t,this.onlineState)&&(this.co(t),e=!0),this.ro=t,e}onError(t){this.so.error(t)}eo(t){this.onlineState=t;let e=!1;return this.ro&&!this.io&&this.ao(this.ro,t)&&(this.co(this.ro),e=!0),e}ao(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}oo(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(t){t=Gl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)}}class rh{constructor(t,e){this.payload=t,this.byteLength=e}ho(){return"metadata"in this.payload}}class sh{constructor(t){this.N=t}zn(t){return Go(this.N,t)}Hn(t){return t.metadata.exists?Yo(this.N,t.document,!1):$s.newNoDocument(this.zn(t.metadata.name),this.Jn(t.metadata.readTime))}Jn(t){return Bo(t)}}class ih{constructor(t,e,n){this.lo=t,this.localStore=e,this.N=n,this.queries=[],this.documents=[],this.progress=oh(t)}fo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}wo(t){const e=new Map,n=new sh(this.N);for(const r of t)if(r.metadata.queries){const t=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||Ao()).add(t);e.set(n,r)}}return e}complete(){var t=this;return(0,_.Z)(function*(){const e=yield function(t,e,n,r){return wc.apply(this,arguments)}(t.localStore,new sh(t.N),t.documents,t.lo.id),n=t.wo(t.documents);for(const r of t.queries)yield bc(t.localStore,r,n.get(r.name));return t.progress.taskState="Success",new Xu(Object.assign({},t.progress),e)})()}}function oh(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class ah{constructor(t){this.key=t}}class uh{constructor(t){this.key=t}}class ch{constructor(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=Ao(),this.mutatedKeys=Ao(),this.po=Ei(t),this.Eo=new $l(this.po)}get To(){return this._o}Io(t,e){const n=e?e.Ao:new zl,r=e?e.Eo:this.Eo;let s=e?e.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a=pi(this.query)&&r.size===this.query.limit?r.last():null,u=gi(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((t,e)=>{const c=r.get(t),l=Si(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ro(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.po(l,a)>0||u&&this.po(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(i=i.add(l),s=d?s.add(t):s.delete(t)):(i=i.delete(t),s=s.delete(t)))}),pi(this.query)||gi(this.query))for(;i.size>this.query.limit;){const t=pi(this.query)?i.last():i.first();i=i.delete(t.key),s=s.delete(t.key),n.track({type:1,doc:t})}return{Eo:i,Ao:n,Ln:o,mutatedKeys:s}}Ro(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;const s=t.Ao.Yr();s.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Br()}};return n(t)-n(e)}(t.type,e.type)||this.po(t.doc,e.doc)),this.bo(n);const i=e?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==s.length||a?{snapshot:new Gl(this.query,t.Eo,r,s,t.mutatedKeys,0===o,a,!1),vo:i}:{vo:i}}eo(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new zl,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations}bo(t){t&&(t.addedDocuments.forEach(t=>this._o=this._o.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this._o=this._o.delete(t)),this.current=t.current)}Po(){if(!this.current)return[];const t=this.yo;this.yo=Ao(),this.Eo.forEach(t=>{this.Vo(t.key)&&(this.yo=this.yo.add(t.key))});const e=[];return t.forEach(t=>{this.yo.has(t)||e.push(new uh(t))}),this.yo.forEach(n=>{t.has(n)||e.push(new ah(n))}),e}So(t){this._o=t.Gn,this.yo=Ao();const e=this.Io(t.documents);return this.applyChanges(e,!0)}Do(){return Gl.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class lh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class hh{constructor(t){this.key=t,this.Co=!1}}class dh{constructor(t,e,n,r,s,i){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.No={},this.xo=new Mu(t=>Ii(t),Ti),this.ko=new Map,this.$o=new Set,this.Oo=new ho(ks.comparator),this.Fo=new Map,this.Mo=new Ic,this.Lo={},this.Bo=new Map,this.Uo=Eu.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function fh(t,e){return ph.apply(this,arguments)}function ph(){return(ph=(0,_.Z)(function*(t,e){const n=rd(t);let r,s;const i=n.xo.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Do();else{const t=yield dc(n.localStore,bi(e)),i=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,s=yield gh(n,e,r,"current"===i),n.isPrimaryClient&&al(n.remoteStore,t)}return s})).apply(this,arguments)}function gh(t,e,n,r){return mh.apply(this,arguments)}function mh(){return(mh=(0,_.Z)(function*(t,e,n,r){t.Ko=(e,n,r)=>{return(s=(0,_.Z)(function*(t,e,n,r){let s=e.view.Io(n);s.Ln&&(s=yield gc(t.localStore,e.query,!1).then(({documents:t})=>e.view.Io(t,s)));const i=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(s,t.isPrimaryClient,i);return Lh(t,e.targetId,o.vo),o.snapshot}),function(t,e,n,r){return s.apply(this,arguments)})(t,e,n,r);var s};const s=yield gc(t.localStore,e,!0),i=new ch(e,s.Gn),o=i.Io(s.documents),a=xo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=i.applyChanges(o,t.isPrimaryClient,a);Lh(t,n,u.vo);const c=new lh(e,n,i);return t.xo.set(e,c),t.ko.has(n)?t.ko.get(n).push(e):t.ko.set(n,[e]),u.snapshot})).apply(this,arguments)}function yh(t,e){return vh.apply(this,arguments)}function vh(){return(vh=(0,_.Z)(function*(t,e){const n=$r(t),r=n.xo.get(e),s=n.ko.get(r.targetId);if(s.length>1)return n.ko.set(r.targetId,s.filter(t=>!Ti(t,e))),void n.xo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ul(n.remoteStore,r.targetId),Zh(n,r.targetId)}).catch(Du))):(Zh(n,r.targetId),yield fc(n.localStore,r.targetId,!0))})).apply(this,arguments)}function wh(){return(wh=(0,_.Z)(function*(t,e,n){const r=sd(t);try{const t=yield function(t,e){const n=$r(t),r=os.now(),s=e.reduce((t,e)=>t.add(e.key),Ao());let i;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>n.Qn.Pn(t,s).next(s=>{i=s;const o=[];for(const t of e){const e=Wi(t,i.get(t.key));null!=e&&o.push(new to(t.key,e,js(e.value.mapValue),zi.exists(!0)))}return n.In.addMutationBatch(t,r,o,e)})).then(t=>(t.applyToLocalDocumentSet(i),{batchId:t.batchId,changes:i}))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Lo[t.currentUser.toKey()];r||(r=new ho(rs)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,t.batchId,n),yield Uh(r,t.changes),yield Al(r.remoteStore)}catch(t){const e=jl(t,"Failed to persist write");n.reject(e)}})).apply(this,arguments)}function bh(t,e){return _h.apply(this,arguments)}function _h(){return(_h=(0,_.Z)(function*(t,e){const n=$r(t);try{const t=yield cc(n.localStore,e);e.targetChanges.forEach((t,e)=>{const r=n.Fo.get(e);r&&(jr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?jr(r.Co):t.removedDocuments.size>0&&(jr(r.Co),r.Co=!1))}),yield Uh(n,t,e)}catch(t){yield Du(t)}})).apply(this,arguments)}function Th(t,e,n){const r=$r(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.xo.forEach((n,r)=>{const s=r.view.eo(e);s.snapshot&&t.push(s.snapshot)}),function(t,e){const n=$r(t);n.onlineState=e;let r=!1;n.queries.forEach((t,n)=>{for(const s of n.listeners)s.eo(e)&&(r=!0)}),r&&eh(n)}(r.eventManager,e),t.length&&r.No.Tr(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ih(t,e,n){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,_.Z)(function*(t,e,n){const r=$r(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Fo.get(e),i=s&&s.key;if(i){let t=new ho(ks.comparator);t=t.insert(i,$s.newNoDocument(i,as.min()));const n=Ao().add(i),s=new ko(as.min(),new Map,new go(rs),t,n);yield bh(r,s),r.Oo=r.Oo.remove(i),r.Fo.delete(e),Rh(r)}else yield fc(r.localStore,e,!1).then(()=>Zh(r,e,n)).catch(Du)})).apply(this,arguments)}function Sh(t,e){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,_.Z)(function*(t,e){const n=$r(t),r=e.batch.batchId;try{const t=yield ac(n.localStore,e);Dh(n,r,null),Nh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Uh(n,t)}catch(t){yield Du(t)}})).apply(this,arguments)}function kh(t,e,n){return xh.apply(this,arguments)}function xh(){return(xh=(0,_.Z)(function*(t,e,n){const r=$r(t);try{const t=yield function(t,e){const n=$r(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let r;return n.In.lookupMutationBatch(t,e).next(e=>(jr(null!==e),r=e.keys(),n.In.removeMutationBatch(t,e))).next(()=>n.In.performConsistencyCheck(t)).next(()=>n.Qn.Pn(t,r))})}(r.localStore,e);Dh(r,e,n),Nh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Uh(r,t)}catch(n){yield Du(n)}})).apply(this,arguments)}function Ch(){return(Ch=(0,_.Z)(function*(t,e){const n=$r(t);fl(n.remoteStore)||Pr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=yield function(t){const e=$r(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",t=>e.In.getHighestUnacknowledgedBatchId(t))}(n.localStore);if(-1===t)return void e.resolve();const r=n.Bo.get(t)||[];r.push(e),n.Bo.set(t,r)}catch(t){const n=jl(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}})).apply(this,arguments)}function Nh(t,e){(t.Bo.get(e)||[]).forEach(t=>{t.resolve()}),t.Bo.delete(e)}function Dh(t,e,n){const r=$r(t);let s=r.Lo[r.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),r.Lo[r.currentUser.toKey()]=s}}function Zh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ko.get(e))t.xo.delete(r),n&&t.No.jo(r,n);t.ko.delete(e),t.isPrimaryClient&&t.Mo.cs(e).forEach(e=>{t.Mo.containsKey(e)||Oh(t,e)})}function Oh(t,e){t.$o.delete(e.path.canonicalString());const n=t.Oo.get(e);null!==n&&(ul(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.Fo.delete(n),Rh(t))}function Lh(t,e,n){for(const r of n)r instanceof ah?(t.Mo.addReference(r.key,e),qh(t,r)):r instanceof uh?(Pr("SyncEngine","Document no longer in limbo: "+r.key),t.Mo.removeReference(r.key,e),t.Mo.containsKey(r.key)||Oh(t,r.key)):Br()}function qh(t,e){const n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.$o.has(r)||(Pr("SyncEngine","New document in limbo: "+n),t.$o.add(r),Rh(t))}function Rh(t){for(;t.$o.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){const e=t.$o.values().next().value;t.$o.delete(e);const n=new ks(ds.fromString(e)),r=t.Uo.next();t.Fo.set(r,new hh(n)),t.Oo=t.Oo.insert(n,r),al(t.remoteStore,new Ya(bi(fi(n.path)),r,2,ts.T))}}function Uh(t,e,n){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,_.Z)(function*(t,e,n){const r=$r(t),s=[],i=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((t,a)=>{o.push(r.Ko(a,e,n).then(t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),s.push(t);const e=ec.kn(a.targetId,t);i.push(e)}}))}),yield Promise.all(o),r.No.Tr(s),yield(a=(0,_.Z)(function*(t,e){const n=$r(t);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>Pa.forEach(e,e=>Pa.forEach(e.Nn,r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r)).next(()=>Pa.forEach(e.xn,r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))}catch(t){if(!ja(t))throw t;Pr("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.Un.get(t),r=e.withLastLimboFreeSnapshotVersion(e.snapshotVersion);n.Un=n.Un.insert(t,r)}}}),function(t,e){return a.apply(this,arguments)})(r.localStore,i))})).apply(this,arguments)}function Mh(t,e){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,_.Z)(function*(t,e){const n=$r(t);if(!n.currentUser.isEqual(e)){Pr("SyncEngine","User change. New user:",e.toKey());const t=yield ic(n.localStore,e);n.currentUser=e,function(t,e){t.Bo.forEach(t=>{t.forEach(t=>{t.reject(new Gr(zr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),yield Uh(n,t.Wn)}})).apply(this,arguments)}function Vh(t,e){const n=$r(t),r=n.Fo.get(e);if(r&&r.Co)return Ao().add(r.key);{let t=Ao();const r=n.ko.get(e);if(!r)return t;for(const e of r){const r=n.xo.get(e);t=t.unionWith(r.view.To)}return t}}function Bh(t,e){return jh.apply(this,arguments)}function jh(){return(jh=(0,_.Z)(function*(t,e){const n=$r(t),r=yield gc(n.localStore,e.query,!0),s=e.view.So(r);return n.isPrimaryClient&&Lh(n,e.targetId,s.vo),s})).apply(this,arguments)}function $h(t){return zh.apply(this,arguments)}function zh(){return(zh=(0,_.Z)(function*(t){const e=$r(t);return yc(e.localStore).then(t=>Uh(e,t))})).apply(this,arguments)}function Gh(t,e,n,r){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,_.Z)(function*(t,e,n,r){const s=$r(t),i=yield function(t,e){const n=$r(t),r=$r(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",t=>r.Xt(t,e).next(e=>e?n.Qn.Pn(t,e):Pa.resolve(null)))}(s.localStore,e);null!==i?("pending"===n?yield Al(s.remoteStore):"acknowledged"===n||"rejected"===n?(Dh(s,e,r||null),Nh(s,e),function(t,e){$r($r(t).In).te(e)}(s.localStore,e)):Br(),yield Uh(s,i)):Pr("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Kh(){return(Kh=(0,_.Z)(function*(t,e){const n=$r(t);if(rd(n),sd(n),!0===e&&!0!==n.qo){const t=n.sharedClientState.getAllActiveQueryTargets(),e=yield Qh(n,t.toArray());n.qo=!0,yield Pl(n.remoteStore,!0);for(const r of e)al(n.remoteStore,r)}else if(!1===e&&!1!==n.qo){const t=[];let e=Promise.resolve();n.ko.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?t.push(s):e=e.then(()=>(Zh(n,s),fc(n.localStore,s,!0))),ul(n.remoteStore,s)}),yield e,yield Qh(n,t),function(t){const e=$r(t);e.Fo.forEach((t,n)=>{ul(e.remoteStore,n)}),e.Mo.us(),e.Fo=new Map,e.Oo=new ho(ks.comparator)}(n),n.qo=!1,yield Pl(n.remoteStore,!1)}})).apply(this,arguments)}function Qh(t,e,n){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,_.Z)(function*(t,e,n){const r=$r(t),s=[],i=[];for(const o of e){let t;const e=r.ko.get(o);if(e&&0!==e.length){t=yield dc(r.localStore,bi(e[0]));for(const t of e){const e=r.xo.get(t),n=yield Bh(r,e);n.snapshot&&i.push(n.snapshot)}}else{const e=yield mc(r.localStore,o);t=yield dc(r.localStore,e),yield gh(r,Jh(e),o,!1)}s.push(t)}return r.No.Tr(i),s})).apply(this,arguments)}function Jh(t){return di(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Yh(t){const e=$r(t);return $r($r(e.localStore).persistence).pn()}function Xh(t,e,n,r){return td.apply(this,arguments)}function td(){return(td=(0,_.Z)(function*(t,e,n,r){const s=$r(t);if(s.qo)Pr("SyncEngine","Ignoring unexpected query state notification.");else if(s.ko.has(e))switch(n){case"current":case"not-current":{const t=yield yc(s.localStore),r=ko.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield Uh(s,t,r);break}case"rejected":yield fc(s.localStore,e,!0),Zh(s,e,r);break;default:Br()}})).apply(this,arguments)}function ed(t,e,n){return nd.apply(this,arguments)}function nd(){return(nd=(0,_.Z)(function*(t,e,n){const r=rd(t);if(r.qo){for(const t of e){if(r.ko.has(t)){Pr("SyncEngine","Adding an already active target "+t);continue}const e=yield mc(r.localStore,t),n=yield dc(r.localStore,e);yield gh(r,Jh(e),n.targetId,!1),al(r.remoteStore,n)}for(const t of n)r.ko.has(t)&&(yield fc(r.localStore,t,!1).then(()=>{ul(r.remoteStore,t),Zh(r,t)}).catch(Du))}})).apply(this,arguments)}function rd(t){const e=$r(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ih.bind(null,e),e.No.Tr=Xl.bind(null,e.eventManager),e.No.jo=th.bind(null,e.eventManager),e}function sd(t){const e=$r(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kh.bind(null,e),e}class id{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,_.Z)(function*(){e.N=Qc(t.databaseInfo.databaseId),e.sharedClientState=e.Wo(t),e.persistence=e.Go(t),yield e.persistence.start(),e.gcScheduler=e.zo(t),e.localStore=e.Ho(t)})()}zo(t){return null}Ho(t){return sc(this.persistence,new nc,t.initialUser,this.N)}Go(t){return new Cc(Dc.Ns,this.N)}Wo(t){return new Vc}terminate(){var t=this;return(0,_.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class od extends id{constructor(t,e,n){super(),this.Jo=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,n=this;return(0,_.Z)(function*(){yield e().call(n,t),yield function(t){return vc.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,t),yield sd(n.Jo.syncEngine),yield Al(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(t){return sc(this.persistence,new nc,t.initialUser,this.N)}zo(t){return new qu(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}Go(t){const e=Yu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vu.withCacheSize(this.cacheSizeBytes):vu.DEFAULT;return new Qu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Hc(),Kc(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(t){return new Vc}}class ad extends od{constructor(t,e){super(t,e,!1),this.Jo=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,n=this;return(0,_.Z)(function*(){yield e().call(n,t);const r=n.Jo.syncEngine;n.sharedClientState instanceof Fc&&(n.sharedClientState.syncEngine={_i:Gh.bind(null,r),mi:Xh.bind(null,r),gi:ed.bind(null,r),pn:Yh.bind(null,r),wi:$h.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var t=(0,_.Z)(function*(t){yield function(t,e){return Kh.apply(this,arguments)}(n.Jo.syncEngine,t),n.gcScheduler&&(t&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):t||n.gcScheduler.stop())});return function(e){return t.apply(this,arguments)}}())})()}Wo(t){const e=Hc();if(!Fc.bt(e))throw new Gr(zr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Yu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fc(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class ud{initialize(t,e){var n=this;return(0,_.Z)(function*(){n.localStore||(n.localStore=t.localStore,n.sharedClientState=t.sharedClientState,n.datastore=n.createDatastore(e),n.remoteStore=n.createRemoteStore(e),n.eventManager=n.createEventManager(e),n.syncEngine=n.createSyncEngine(e,!t.synchronizeTabs),n.sharedClientState.onlineStateHandler=t=>Th(n.syncEngine,t,1),n.remoteStore.remoteSyncer.handleCredentialChange=Mh.bind(null,n.syncEngine),yield Pl(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Kl}createDatastore(t){const e=Qc(t.databaseInfo.databaseId),n=new Gc(t.databaseInfo);return function(t,e,n){return new tl(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,s=t=>Th(this.syncEngine,t,0),i=jc.bt()?new jc:new Bc,new nl(e,n,r,s,i);var e,n,r,s,i}createSyncEngine(t,e){return function(t,e,n,r,s,i,o){const a=new dh(t,e,n,r,s,i);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,_.Z)(function*(t){const e=$r(t);Pr("RemoteStore","RemoteStore shutting down."),e.Kr.add(5),yield il(e),e.Qr.shutdown(),e.Wr.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function cd(t,e=10240){let n=0;return{read:()=>(0,_.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ld{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Yo(this.observer.next,t)}error(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Xo(){this.muted=!0}Yo(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class hd{constructor(t,e){this.Zo=t,this.N=e,this.metadata=new Hr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(t=>{t&&t.ho()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.payload)}`))},t=>this.metadata.reject(t))}close(){return this.Zo.cancel()}getMetadata(){var t=this;return(0,_.Z)(function*(){return t.metadata.promise})()}Qo(){var t=this;return(0,_.Z)(function*(){return yield t.getMetadata(),t.ea()})()}ea(){var t=this;return(0,_.Z)(function*(){const e=yield t.na();if(null===e)return null;const n=t.ta.decode(e),r=Number(n);isNaN(r)&&t.sa(`length string (${n}) is not valid number`);const s=yield t.ia(r);return new rh(JSON.parse(s),e.length+r)})()}ra(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}na(){var t=this;return(0,_.Z)(function*(){for(;t.ra()<0&&!(yield t.oa()););if(0===t.buffer.length)return null;const e=t.ra();e<0&&t.sa("Reached the end of bundle when a length string is expected.");const n=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),n})()}ia(t){var e=this;return(0,_.Z)(function*(){for(;e.buffer.length<t;)(yield e.oa())&&e.sa("Reached the end of bundle when more is expected.");const n=e.ta.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),n})()}sa(t){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${t}`)}oa(){var t=this;return(0,_.Z)(function*(){const e=yield t.Zo.read();if(!e.done){const n=new Uint8Array(t.buffer.length+e.value.length);n.set(t.buffer),n.set(e.value,t.buffer.length),t.buffer=n}return e.done})()}}class dd{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,_.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Gr(zr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,_.Z)(function*(t,e){const n=$r(t),r=Qo(n.N)+"/documents",s={documents:e.map(t=>zo(n.N,t))},i=yield n.Ki("BatchGetDocuments",r,s),o=new Map;i.forEach(t=>{const e=function(t,e){return"found"in e?function(t,e){jr(!!e.found);const n=Go(t,e.found.name),r=Bo(e.found.updateTime),s=new Bs({mapValue:{fields:e.found.fields}});return $s.newFoundDocument(n,r,s)}(t,e):"missing"in e?function(t,e){jr(!!e.missing),jr(!!e.readTime);const n=Go(t,e.missing),r=Bo(e.readTime);return $s.newNoDocument(n,r)}(t,e):Br()}(n.N,t);o.set(e.key.toString(),e)});const a=[];return e.forEach(t=>{const e=o.get(t.toString());jr(!!e),a.push(e)}),a}),function(t,e){return r.apply(this,arguments)})(e.datastore,t);var r;return n.forEach(t=>e.recordVersion(t)),n})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new so(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,_.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var n;t.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,n)=>{const r=ks.fromPath(n);t.mutations.push(new io(r,t.precondition(r)))}),yield(n=(0,_.Z)(function*(t,e){const n=$r(t),r=Qo(n.N)+"/documents",s={writes:e.map(t=>Xo(n.N,t))};yield n.Li("Commit",r,s)}),function(t,e){return n.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Br();e=as.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gr(zr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?zi.updateTime(e):zi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(as.min()))throw new Gr(zr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zi.updateTime(e)}return zi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class fd{constructor(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Wc(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var t=this;this.rr.Xi((0,_.Z)(function*(){const e=new dd(t.datastore),n=t.ua(e);n&&n.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(e=>{t.ha(e)}))}).catch(e=>{t.ha(e)})}))}ua(t){try{const e=this.updateFunction(t);return!As(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(t){this.aa>0&&this.la(t)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(t)}la(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!co(e)}return!1}}class pd{constructor(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Lr.UNAUTHENTICATED,this.clientId=ns.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,function(){var t=(0,_.Z)(function*(t){Pr("FirestoreClient","Received user=",t.uid),yield r.credentialListener(t),r.user=t});return function(e){return t.apply(this,arguments)}}())}getConfiguration(){var t=this;return(0,_.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,credentials:t.credentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Gr(zr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.credentials.shutdown(),e.resolve()}catch(n){const t=jl(n,"Failed to shutdown persistence");e.reject(t)}})),e.promise}}function gd(t,e){return md.apply(this,arguments)}function md(){return(md=(0,_.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Pr("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var t=(0,_.Z)(function*(t){r.isEqual(t)||(yield ic(e.localStore,t),r=t)});return function(e){return t.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e})).apply(this,arguments)}function yd(t,e){return vd.apply(this,arguments)}function vd(){return(vd=(0,_.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield wd(t);Pr("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(t=>{return(n=(0,_.Z)(function*(t,e){const n=$r(t);n.asyncQueue.verifyOperationInProgress(),Pr("RemoteStore","RemoteStore received new credentials");const r=fl(n);n.Kr.add(3),yield il(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Kr.delete(3),yield rl(n)}),function(t,e){return n.apply(this,arguments)})(e.remoteStore,t);var n}),t.onlineComponents=e})).apply(this,arguments)}function wd(t){return bd.apply(this,arguments)}function bd(){return(bd=(0,_.Z)(function*(t){return t.offlineComponents||(Pr("FirestoreClient","Using default OfflineComponentProvider"),yield gd(t,new id)),t.offlineComponents})).apply(this,arguments)}function _d(t){return Td.apply(this,arguments)}function Td(){return(Td=(0,_.Z)(function*(t){return t.onlineComponents||(Pr("FirestoreClient","Using default OnlineComponentProvider"),yield yd(t,new ud)),t.onlineComponents})).apply(this,arguments)}function Id(t){return wd(t).then(t=>t.persistence)}function Ad(t){return wd(t).then(t=>t.localStore)}function Sd(t){return _d(t).then(t=>t.remoteStore)}function Ed(t){return _d(t).then(t=>t.syncEngine)}function kd(t){return xd.apply(this,arguments)}function xd(){return(xd=(0,_.Z)(function*(t){const e=yield _d(t),n=e.eventManager;return n.onListen=fh.bind(null,e.syncEngine),n.onUnlisten=yh.bind(null,e.syncEngine),n})).apply(this,arguments)}function Cd(t,e,n={}){const r=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(t,e,n,r,s){const i=new ld({next:i=>{e.enqueueAndForget(()=>Jl(t,o));const a=i.docs.has(n);!a&&i.fromCache?s.reject(new Gr(zr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&r&&"server"===r.source?s.reject(new Gr(zr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(i)},error:t=>s.reject(t)}),o=new nh(fi(n.path),i,{includeMetadataChanges:!0,uo:!0});return Ql(t,o)}(yield kd(t),t.asyncQueue,e,n,r)})),r.promise}function Nd(t,e,n={}){const r=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(t,e,n,r,s){const i=new ld({next:n=>{e.enqueueAndForget(()=>Jl(t,o)),n.fromCache&&"server"===r.source?s.reject(new Gr(zr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:t=>s.reject(t)}),o=new nh(n,i,{includeMetadataChanges:!0,uo:!0});return Ql(t,o)}(yield kd(t),t.asyncQueue,e,n,r)})),r.promise}class Dd{constructor(t,e,n,r,s,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Zd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Zd&&t.projectId===this.projectId&&t.database===this.database}}const Od=new Map;function Ld(t,e,n){if(!n)throw new Gr(zr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qd(t,e,n,r){if(!0===e&&!0===r)throw new Gr(zr.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rd(t){if(!ks.isDocumentKey(t))throw new Gr(zr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ud(t){if(ks.isDocumentKey(t))throw new Gr(zr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){if(t.constructor){const e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Br()}function Md(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Gr(zr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pd(t);throw new Gr(zr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Fd(t,e){if(e<=0)throw new Gr(zr.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class Vd{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Gr(zr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gr(zr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,qd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Bd{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vd({}),this._settingsFrozen=!1,t instanceof Zd?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Gr(zr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zd(t.options.projectId)}(t))}get app(){if(!this._app)throw new Gr(zr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Gr(zr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Qr;switch(t.type){case"gapi":const e=t.client;return jr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Xr(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Gr(zr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Od.get(t);e&&(Pr("ComponentProvider","Removing Datastore"),Od.delete(t),e.terminate())}(this),Promise.resolve()}}class jd{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new jd(this.firestore,t,this._key)}}class $d{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new $d(this.firestore,t,this._query)}}class zd extends $d{constructor(t,e,n){super(t,e,fi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new jd(this.firestore,null,new ks(t))}withConverter(t){return new zd(this.firestore,t,this._path)}}function Gd(t,e,...n){if(t=(0,S.m9)(t),Ld("collection","path",e),t instanceof Bd){const r=ds.fromString(e,...n);return Ud(r),new zd(t,null,r)}{if(!(t instanceof jd||t instanceof zd))throw new Gr(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ds.fromString(e,...n));return Ud(r),new zd(t.firestore,null,r)}}function Hd(t,e,...n){if(t=(0,S.m9)(t),1===arguments.length&&(e=ns.I()),Ld("doc","path",e),t instanceof Bd){const r=ds.fromString(e,...n);return Rd(r),new jd(t,null,new ks(r))}{if(!(t instanceof jd||t instanceof zd))throw new Gr(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ds.fromString(e,...n));return Rd(r),new jd(t.firestore,t instanceof zd?t.converter:null,new ks(r))}}function Kd(t,e){return t=(0,S.m9)(t),e=(0,S.m9)(e),(t instanceof jd||t instanceof zd)&&(e instanceof jd||e instanceof zd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Qd(t,e){return t=(0,S.m9)(t),e=(0,S.m9)(e),t instanceof $d&&e instanceof $d&&t.firestore===e.firestore&&Ti(t._query,e._query)&&t.converter===e.converter}class Wd{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Wc(this,"async_queue_retry"),this.Ea=()=>{const t=Kc();t&&Pr("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const t=Kc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ta(),this.Ia(t)}enterRestrictedMode(t){if(!this.wa){this.wa=!0,this.ya=t||!1;const e=Kc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ea)}}enqueue(t){if(this.Ta(),this.wa)return new Promise(()=>{});const e=new Hr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.da.push(t),this.Aa()))}Aa(){var t=this;return(0,_.Z)(function*(){if(0!==t.da.length){try{yield t.da[0](),t.da.shift(),t.rr.reset()}catch(e){if(!ja(e))throw e;Pr("AsyncQueue","Operation failed with retryable error: "+e)}t.da.length>0&&t.rr.Xi(()=>t.Aa())}})()}Ia(t){const e=this.fa.then(()=>(this.ga=!0,t().catch(t=>{throw this.ma=t,this.ga=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(t=>(this.ga=!1,t))));return this.fa=e,e}enqueueAfterDelay(t,e,n){this.Ta(),this.pa.indexOf(t)>-1&&(e=0);const r=Bl.createAndSchedule(this,t,e,n,t=>this.Ra(t));return this._a.push(r),r}Ta(){this.ma&&Br()}verifyOperationInProgress(){}ba(){var t=this;return(0,_.Z)(function*(){let e;do{e=t.fa,yield e}while(e!==t.fa)})()}Pa(t){for(const e of this._a)if(e.timerId===t)return!0;return!1}va(t){return this.ba().then(()=>{this._a.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this._a)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.ba()})}Va(t){this.pa.push(t)}Ra(t){const e=this._a.indexOf(t);this._a.splice(e,1)}}function Jd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(t)}class Yd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Xd extends Bd{constructor(t,e){super(t,e),this.type="firestore",this._queue=new Wd,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ef(this),this._firestoreClient.terminate()}}function tf(t){return t._firestoreClient||ef(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ef(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new Dd(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new pd(t._credentials,t._queue,r)}function nf(t,e,n){const r=new Hr;return t.asyncQueue.enqueue((0,_.Z)(function*(){try{yield gd(t,n),yield yd(t,e),r.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===zr.FAILED_PRECONDITION||t.code===zr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}})).then(()=>r.promise)}function rf(t){if(t._initialized||t._terminated)throw new Gr(zr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Gr(zr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class of{constructor(t){this._byteString=t}static fromBase64String(t){try{return new of(ms.fromBase64String(t))}catch(t){throw new Gr(zr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new of(ms.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class af{constructor(t){this._methodName=t}}class uf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Gr(zr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Gr(zr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rs(this._lat,t._lat)||rs(this._long,t._long)}}const cf=/^__.*__$/;class lf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new to(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xi(t,this.data,e,this.fieldTransforms)}}class hf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new to(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function df(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Br()}}class ff{constructor(t,e,n,r,s,i){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Sa(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(t){return new ff(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ca({path:n,xa:!1});return r.ka(t),r}$a(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(t){return this.Ca({path:void 0,xa:!0})}Fa(t){return Of(t,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Sa(){if(this.path)for(let t=0;t<this.path.length;t++)this.ka(this.path.get(t))}ka(t){if(0===t.length)throw this.Fa("Document fields must not be empty");if(df(this.Da)&&cf.test(t))throw this.Fa('Document fields cannot begin and end with "__"')}}class pf{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||Qc(t)}Ba(t,e,n,r=!1){return new ff({Da:t,methodName:e,La:n,path:ps.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function gf(t){const e=t._freezeSettings(),n=Qc(t._databaseId);return new pf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mf(t,e,n,r,s,i={}){const o=t.Ba(i.merge||i.mergeFields?2:0,e,n,s);Cf("Data must be an object, but it was:",o,r);const a=kf(r,o);let u,c;if(i.merge)u=new gs(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const t=[];for(const r of i.mergeFields){const s=Nf(e,r,n);if(!o.contains(s))throw new Gr(zr.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Lf(t,s)||t.push(s)}u=new gs(t),c=o.fieldTransforms.filter(t=>u.covers(t.field))}else u=null,c=o.fieldTransforms;return new lf(new Bs(a),u,c)}class yf extends af{_toFieldTransform(t){if(2!==t.Da)throw t.Fa(1===t.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof yf}}function vf(t,e,n){return new ff({Da:3,La:e.settings.La,methodName:t._methodName,xa:n},e.databaseId,e.N,e.ignoreUndefinedProperties)}class wf extends af{_toFieldTransform(t){return new ji(t.path,new qi)}isEqual(t){return t instanceof wf}}class bf extends af{constructor(t,e){super(t),this.Ua=e}_toFieldTransform(t){const e=vf(this,t,!0),n=this.Ua.map(t=>Ef(t,e)),r=new Ri(n);return new ji(t.path,r)}isEqual(t){return this===t}}class _f extends af{constructor(t,e){super(t),this.Ua=e}_toFieldTransform(t){const e=vf(this,t,!0),n=this.Ua.map(t=>Ef(t,e)),r=new Pi(n);return new ji(t.path,r)}isEqual(t){return this===t}}class Tf extends af{constructor(t,e){super(t),this.qa=e}_toFieldTransform(t){const e=new Fi(t.N,Ni(t.N,this.qa));return new ji(t.path,e)}isEqual(t){return this===t}}function If(t,e,n,r){const s=t.Ba(1,e,n);Cf("Data must be an object, but it was:",s,r);const i=[],o=Bs.empty();cs(r,(t,r)=>{const a=Zf(e,t,n);r=(0,S.m9)(r);const u=s.$a(a);if(r instanceof yf)i.push(a);else{const t=Ef(r,u);null!=t&&(i.push(a),o.set(a,t))}});const a=new gs(i);return new hf(o,a,s.fieldTransforms)}function Af(t,e,n,r,s,i){const o=t.Ba(1,e,n),a=[Nf(e,r,n)],u=[s];if(i.length%2!=0)throw new Gr(zr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(Nf(e,i[d])),u.push(i[d+1]);const c=[],l=Bs.empty();for(let d=a.length-1;d>=0;--d)if(!Lf(c,a[d])){const t=a[d];let e=u[d];e=(0,S.m9)(e);const n=o.$a(t);if(e instanceof yf)c.push(t);else{const r=Ef(e,n);null!=r&&(c.push(t),l.set(t,r))}}const h=new gs(c);return new hf(l,h,o.fieldTransforms)}function Sf(t,e,n,r=!1){return Ef(n,t.Ba(r?4:3,e))}function Ef(t,e){if(xf(t=(0,S.m9)(t)))return Cf("Unsupported field value:",e,t),kf(t,e);if(t instanceof af)return function(t,e){if(!df(e.Da))throw e.Fa(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Fa(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const s of t){let t=Ef(s,e.Oa(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,S.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ni(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=os.fromDate(t);return{timestampValue:Mo(e.N,n)}}if(t instanceof os){const n=new os(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mo(e.N,n)}}if(t instanceof uf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof of)return{bytesValue:Fo(e.N,t._byteString)};if(t instanceof jd){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:jo(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Fa(`Unsupported field value: ${Pd(t)}`)}(t,e)}function kf(t,e){const n={};return ls(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(t,r)=>{const s=Ef(r,e.Na(t));null!=s&&(n[t]=s)}),{mapValue:{fields:n}}}function xf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof os||t instanceof uf||t instanceof of||t instanceof jd||t instanceof af)}function Cf(t,e,n){if(!xf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Pd(n);throw e.Fa("an object"===r?t+" a custom object":t+" "+r)}}function Nf(t,e,n){if((e=(0,S.m9)(e))instanceof sf)return e._internalPath;if("string"==typeof e)return Zf(t,e);throw Of("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Df=new RegExp("[~\\*/\\[\\]]");function Zf(t,e,n){if(e.search(Df)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sf(...e.split("."))._internalPath}catch(r){throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Of(t,e,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Gr(zr.INVALID_ARGUMENT,a+t+u)}function Lf(t,e){return t.some(t=>t.isEqual(e))}class qf{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Uf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Rf extends qf{data(){return super.data()}}function Uf(t,e){return"string"==typeof e?Zf(t,e):e instanceof sf?e._internalPath:e._delegate._internalPath}class Pf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mf extends qf{constructor(t,e,n,r,s,i){super(t,e,n,r,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Uf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ff extends Mf{data(t={}){return super.data(t)}}class Vf{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Pf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Ff(this._firestore,this._userDataWriter,n.key,n,new Pf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gr(zr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>({type:"added",doc:new Ff(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Pf(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const r=new Ff(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Pf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,i=-1;return 0!==e.type&&(s=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),i=n.indexOf(e.doc.key)),{type:Bf(e.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Bf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Br()}}function jf(t,e){return t instanceof Mf&&e instanceof Mf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Vf&&e instanceof Vf&&t._firestore===e._firestore&&Qd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function $f(t){if(gi(t)&&0===t.explicitOrderBy.length)throw new Gr(zr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zf{}function Gf(t,...e){for(const n of e)t=n._apply(t);return t}class Hf extends zf{constructor(t,e,n){super(),this.Ka=t,this.ja=e,this.Qa=n,this.type="where"}_apply(t){const e=gf(t.firestore),n=function(t,e,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Gr(zr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on FieldPath.documentId().`);if("in"===i||"not-in"===i){tp(o,i);const e=[];for(const n of o)e.push(Xf(r,t,n));a={arrayValue:{values:e}}}else a=Xf(r,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||tp(o,i),a=Sf(n,"where",o,"in"===i||"not-in"===i);const u=Ws.create(s,i,a);return function(t,e){if(e.v()){const n=yi(t);if(null!==n&&!n.isEqual(e.field))throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const r=mi(t);null!==r&&ep(0,e.field,r)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Gr(zr.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,u),u}(t._query,0,e,t.firestore._databaseId,this.Ka,this.ja,this.Qa);return new $d(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}class Kf extends zf{constructor(t,e){super(),this.Ka=t,this.Wa=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ai(e,n);return function(t,e){if(null===mi(t)){const n=yi(t);null!==n&&ep(0,n,e.field)}}(t,r),r}(t._query,this.Ka,this.Wa);return new $d(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new hi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class Qf extends zf{constructor(t,e,n){super(),this.type=t,this.Ga=e,this.za=n}_apply(t){return new $d(t.firestore,t.converter,_i(t._query,this.Ga,this.za))}}class Wf extends zf{constructor(t,e,n){super(),this.type=t,this.Ha=e,this.Ja=n}_apply(t){const e=Yf(t,this.type,this.Ha,this.Ja);return new $d(t.firestore,t.converter,function(t,e){return new hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}class Jf extends zf{constructor(t,e,n){super(),this.type=t,this.Ha=e,this.Ja=n}_apply(t){const e=Yf(t,this.type,this.Ha,this.Ja);return new $d(t.firestore,t.converter,function(t,e){return new hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Yf(t,e,n,r){if(n[0]=(0,S.m9)(n[0]),n[0]instanceof qf)return function(t,e,n,r,s){if(!r)throw new Gr(zr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const i=[];for(const o of wi(t))if(o.field.isKeyField())i.push(qs(e,r.key));else{const t=r.data.field(o.field);if(_s(t))throw new Gr(zr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}i.push(t)}return new ii(i,s)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=gf(t.firestore);return function(t,e,n,r,s,i){const o=t.explicitOrderBy;if(s.length>o.length)throw new Gr(zr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<s.length;u++){const i=s[u];if(o[u].field.isKeyField()){if("string"!=typeof i)throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof i}`);if(!vi(t)&&-1!==i.indexOf("/"))throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${i}' contains a slash.`);const n=t.path.child(ds.fromString(i));if(!ks.isDocumentKey(n))throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new ks(n);a.push(qs(e,s))}else{const t=Sf(n,r,i);a.push(t)}}return new ii(a,i)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Xf(t,e,n){if("string"==typeof(n=(0,S.m9)(n))){if(""===n)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!vi(e)&&-1!==n.indexOf("/"))throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ds.fromString(n));if(!ks.isDocumentKey(r))throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qs(t,new ks(r))}if(n instanceof jd)return qs(t,n._key);throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pd(n)}.`)}function tp(t,e){if(!Array.isArray(t)||0===t.length)throw new Gr(zr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Gr(zr.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ep(t,e,n){if(!n.isEqual(e))throw new Gr(zr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class np{convertValue(t,e="none"){switch(xs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ws(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Br()}}convertObject(t,e){const n={};return cs(t.fields,(t,r)=>{n[t]=this.convertValue(r,e)}),n}convertGeoPoint(t){return new uf(ws(t.latitude),ws(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ts(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Is(t));default:return null}}convertTimestamp(t){const e=vs(t);return new os(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=ds.fromString(t);jr(pa(n));const r=new Zd(n.get(1),n.get(3)),s=new ks(n.popFirst(5));return r.isEqual(e)||Mr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function rp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class sp extends np{constructor(t){super(),this.firestore=t}convertBytes(t){return new of(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new jd(this.firestore,null,e)}}class ip{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=gf(t)}set(t,e,n){this._verifyNotCommitted();const r=op(t,this._firestore),s=rp(r.converter,e,n),i=mf(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,zi.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=op(t,this._firestore);let i;return i="string"==typeof(e=(0,S.m9)(e))||e instanceof sf?Af(this._dataReader,"WriteBatch.update",s._key,e,n,r):If(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(i.toMutation(s._key,zi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=op(t,this._firestore);return this._mutations=this._mutations.concat(new so(e._key,zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gr(zr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function op(t,e){if((t=(0,S.m9)(t)).firestore!==e)throw new Gr(zr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class ap extends np{constructor(t){super(),this.firestore=t}convertBytes(t){return new of(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new jd(this.firestore,null,e)}}function up(t,e,n){t=Md(t,jd);const r=Md(t.firestore,Xd),s=rp(t.converter,e,n);return hp(r,[mf(gf(r),"setDoc",t._key,s,null!==t.converter,n).toMutation(t._key,zi.none())])}function cp(t,e,n,...r){t=Md(t,jd);const s=Md(t.firestore,Xd),i=gf(s);let o;return o="string"==typeof(e=(0,S.m9)(e))||e instanceof sf?Af(i,"updateDoc",t._key,e,n,r):If(i,"updateDoc",t._key,e),hp(s,[o.toMutation(t._key,zi.exists(!0))])}function lp(t,...e){var n,r,s;t=(0,S.m9)(t);let i={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Jd(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Jd(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[o+2]=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}let u,c,l;if(t instanceof jd)c=Md(t.firestore,Xd),l=fi(t._key.path),u={next:n=>{e[o]&&e[o](dp(c,t,n))},error:e[o+1],complete:e[o+2]};else{const n=Md(t,$d);c=Md(n.firestore,Xd),l=n._query;const r=new ap(c);u={next:t=>{e[o]&&e[o](new Vf(c,r,n,t))},error:e[o+1],complete:e[o+2]},$f(t._query)}return function(t,e,n,r){const s=new ld(r),i=new nh(e,s,n);return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return Ql(yield kd(t),i)})),()=>{s.Xo(),t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return Jl(yield kd(t),i)}))}}(tf(c),l,a,u)}function hp(t,e){return function(t,e){const n=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(t,e,n){return wh.apply(this,arguments)}(yield Ed(t),e,n)})),n.promise}(tf(t),e)}function dp(t,e,n){const r=n.docs.get(e._key),s=new ap(t);return new Mf(t,s,e._key,r,new Pf(n.hasPendingWrites,n.fromCache),e.converter)}class fp extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=gf(t)}get(t){const e=op(t,this._firestore),n=new sp(this._firestore);return this._transaction.lookup([e._key]).then(t=>{if(!t||1!==t.length)return Br();const r=t[0];if(r.isFoundDocument())return new qf(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new qf(this._firestore,n,e._key,null,e.converter);throw Br()})}set(t,e,n){const r=op(t,this._firestore),s=rp(r.converter,e,n),i=mf(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(t,e,n,...r){const s=op(t,this._firestore);let i;return i="string"==typeof(e=(0,S.m9)(e))||e instanceof sf?Af(this._dataReader,"Transaction.update",s._key,e,n,r):If(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,i),this}delete(t){const e=op(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=op(t,this._firestore),n=new ap(this._firestore);return super.get(t).then(t=>new Mf(this._firestore,n,e._key,t._document,new Pf(!1,!1),e.converter))}}function pp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Gr("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function gp(){if("undefined"==typeof Uint8Array)throw new Gr("unimplemented","Uint8Arrays are not available in this environment.")}function mp(){if("undefined"==typeof atob)throw new Gr("unimplemented","Blobs are unavailable in Firestore in this environment.")}qr=T.SDK_VERSION,(0,T._registerComponent)(new I.wA("firestore",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=new Xd(n,new Jr(t.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),r._setSettings(e),r},"PUBLIC")),(0,T.registerVersion)("@firebase/firestore","3.0.2",void 0);class yp{constructor(t){this._delegate=t}static fromBase64String(t){return mp(),new yp(of.fromBase64String(t))}static fromUint8Array(t){return gp(),new yp(of.fromUint8Array(t))}toBase64(){return mp(),this._delegate.toBase64()}toUint8Array(){return gp(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(t)}class wp{enableIndexedDbPersistence(t,e){return function(t,e){rf(t=Md(t,Xd));const n=tf(t),r=t._freezeSettings(),s=new ud;return nf(n,s,new od(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(t){rf(t=Md(t,Xd));const e=tf(t),n=t._freezeSettings(),r=new ud;return nf(e,r,new ad(r,n.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(t){if(t._initialized&&!t._terminated)throw new Gr(zr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hr;return t._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(n=(0,_.Z)(function*(t){if(!Fa.bt())return Promise.resolve();const e=t+"main";yield Fa.delete(e)}),function(t){return n.apply(this,arguments)})(Yu(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var n})),e.promise}(t._delegate)}}class bp{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof Zd||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,n={}){!function(t,e,n,r={}){var s;const i=(t=Md(t,Bd))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Fr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=Lr.MOCK_USER;else{e=(0,S.Sg)(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Gr(zr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Lr(i)}t._credentials=new Wr(new Kr(e,n))}}(this._delegate,t,e,n)}enableNetwork(){return function(t){return t.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield Id(t),n=yield Sd(t);return e.setNetworkEnabled(!0),function(t){const e=$r(t);return e.Kr.delete(0),rl(e)}(n)}))}(tf(Md(this._delegate,Xd)))}disableNetwork(){return function(t){return t.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield Id(t),n=yield Sd(t);return e.setNetworkEnabled(!1),(r=(0,_.Z)(function*(t){const e=$r(t);e.Kr.add(0),yield il(e),e.Wr.set("Offline")}),function(t){return r.apply(this,arguments)})(n);var r}))}(tf(Md(this._delegate,Xd)))}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,qd("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(t){const e=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(t,e){return Ch.apply(this,arguments)}(yield Ed(t),e)})),e.promise}(tf(Md(this._delegate,Xd)))}onSnapshotsInSync(t){return e=t,function(t,e){const n=new ld(e);return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(t,e){$r(t).Zr.add(e),e.next()}(yield kd(t),n)})),()=>{n.Xo(),t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(t,e){$r(t).Zr.delete(e)}(yield kd(t),n)}))}}(tf(Md(this._delegate,Xd)),Jd(e)?e:{next:e});var e}get app(){if(!this._appCompat)throw new Gr("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Lp(this,Gd(this._delegate,t))}catch(e){throw Ep(e,"collection()","Firestore.collection()")}}doc(t){try{return new Sp(this,Hd(this._delegate,t))}catch(e){throw Ep(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Dp(this,function(t,e){if(t=Md(t,Bd),Ld("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gr(zr.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $d(t,null,function(t){return new hi(ds.emptyPath(),t)}(e))}(this._delegate,t))}catch(e){throw Ep(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return n=e=>t(new Tp(this,e)),function(t,e){const n=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const r=yield function(t){return _d(t).then(t=>t.datastore)}(t);new fd(t.asyncQueue,r,e,n).run()})),n.promise}(tf(e=this._delegate),t=>n(new fp(e,t)));var e,n}batch(){return tf(this._delegate),new Ip(new ip(this._delegate,t=>hp(this._delegate,t)))}loadBundle(t){return function(t,e){const n=tf(t=Md(t,Xd)),r=new Yd;return function(t,e,n,r){const s=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new hd(t,e)}(function(t,e){if(t instanceof Uint8Array)return cd(t,e);if(t instanceof ArrayBuffer)return cd(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,Qc(e));t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function(t,e,n){const r=$r(t);var s;(s=(0,_.Z)(function*(t,e,n){try{const r=yield e.getMetadata();if(yield function(t,e){const n=$r(t),r=Bo(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",t=>n.Je.getBundleMetadata(t,e.id)).then(t=>!!t&&t.createTime.compareTo(r)>=0)}(t.localStore,r))return yield e.close(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r));n._updateProgress(oh(r));const s=new ih(r,t.localStore,e.N);let i=yield e.Qo();for(;i;){const t=yield s.fo(i);t&&n._updateProgress(t),i=yield e.Qo()}const o=yield s.complete();yield Uh(t,o.Tn,void 0),yield function(t,e){const n=$r(t);return n.persistence.runTransaction("Save bundle","readwrite",t=>n.Je.saveBundleMetadata(t,e))}(t.localStore,r),n._completeWith(o.progress)}catch(t){Fr("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t)}}),function(t,e,n){return s.apply(this,arguments)})(r,e,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Ed(t),s,r)}))}(n,t._databaseId,e,r),r}(this._delegate,t)}namedQuery(t){return(e=this._delegate,n=t,function(t,e){return t.asyncQueue.enqueue((0,_.Z)(function*(){return function(t,e){const n=$r(t);return n.persistence.runTransaction("Get named query","readonly",t=>n.Je.getNamedQuery(t,e))}(yield Ad(t),e)}))}(tf(e=Md(e,Xd)),n).then(t=>t?new $d(e,null,t.query):null)).then(t=>t?new Dp(this,t):null);var e,n}}class _p extends np{constructor(t){super(),this.firestore=t}convertBytes(t){return new yp(new of(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Sp.forKey(e,this.firestore,null)}}class Tp{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}get(t){const e=qp(t);return this._delegate.get(e).then(t=>new Cp(this._firestore,new Mf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter)))}set(t,e,n){const r=qp(t);return n?(pp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){const s=qp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,n,...r),this}delete(t){const e=qp(t);return this._delegate.delete(e),this}}class Ip{constructor(t){this._delegate=t}set(t,e,n){const r=qp(t);return n?(pp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){const s=qp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,n,...r),this}delete(t){const e=qp(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Ap{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new Ff(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Np(this._firestore,n),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=Ap.INSTANCES;let r=n.get(t);r||(r=new WeakMap,n.set(t,r));let s=r.get(e);return s||(s=new Ap(t,new _p(t),e),r.set(e,s)),s}}Ap.INSTANCES=new WeakMap;class Sp{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}static forPath(t,e,n){if(t.length%2!=0)throw new Gr("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Sp(e,new jd(e._delegate,n,new ks(t)))}static forKey(t,e,n){return new Sp(e,new jd(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new Lp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Lp(this.firestore,Gd(this._delegate,t))}catch(e){throw Ep(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,S.m9)(t))instanceof jd&&Kd(this._delegate,t)}set(t,e){e=pp("DocumentReference.set",e);try{return e?up(this._delegate,t,e):up(this._delegate,t)}catch(n){throw Ep(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?cp(this._delegate,t):cp(this._delegate,t,e,...n)}catch(r){throw Ep(r,"updateDoc()","DocumentReference.update()")}}delete(){return hp(Md((t=this._delegate).firestore,Xd),[new so(t._key,zi.none())]);var t}onSnapshot(...t){const e=kp(t),n=xp(t,t=>new Cp(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)));return lp(this._delegate,e,n)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(t){t=Md(t,jd);const e=Md(t.firestore,Xd),n=tf(e),r=new ap(e);return function(t,e){const n=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(r=(0,_.Z)(function*(t,e,n){try{const r=yield function(t,e){const n=$r(t);return n.persistence.runTransaction("read document","readonly",t=>n.Qn.An(t,e))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Gr(zr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=jl(t,`Failed to get document '${e} from cache`);n.reject(r)}}),function(t,e,n){return r.apply(this,arguments)})(yield Ad(t),e,n);var r})),n.promise}(n,t._key).then(n=>new Mf(e,r,t._key,n,new Pf(null!==n&&n.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Md(t,jd);const e=Md(t.firestore,Xd);return Cd(tf(e),t._key,{source:"server"}).then(n=>dp(e,t,n))}(this._delegate):function(t){t=Md(t,jd);const e=Md(t.firestore,Xd);return Cd(tf(e),t._key).then(n=>dp(e,t,n))}(this._delegate),e.then(t=>new Cp(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)))}withConverter(t){return new Sp(this.firestore,this._delegate.withConverter(t?Ap.getInstance(this.firestore,t):null))}}function Ep(t,e,n){return t.message=t.message.replace(e,n),t}function kp(t){for(const e of t)if("object"==typeof e&&!vp(e))return e;return{}}function xp(t,e){var n,r;let s;return s=vp(t[0])?t[0]:vp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{s.next&&s.next(e(t))},error:null===(n=s.error)||void 0===n?void 0:n.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Cp{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Sp(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return jf(this._delegate,t._delegate)}}class Np extends Cp{data(t){const e=this._delegate.data(t);return void 0!==e||Br(),e}}class Dp{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}where(t,e,n){try{return new Dp(this.firestore,Gf(this._delegate,function(t,e,n){const r=e,s=Uf("where",t);return new Hf(s,r,n)}(t,e,n)))}catch(r){throw Ep(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Dp(this.firestore,Gf(this._delegate,function(t,e="asc"){const n=e,r=Uf("orderBy",t);return new Kf(r,n)}(t,e)))}catch(n){throw Ep(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Dp(this.firestore,Gf(this._delegate,(Fd("limit",e=t),new Qf("limit",e,"F"))))}catch(n){throw Ep(n,"limit()","Query.limit()")}var e}limitToLast(t){try{return new Dp(this.firestore,Gf(this._delegate,(Fd("limitToLast",e=t),new Qf("limitToLast",e,"L"))))}catch(n){throw Ep(n,"limitToLast()","Query.limitToLast()")}var e}startAt(...t){try{return new Dp(this.firestore,Gf(this._delegate,function(...t){return new Wf("startAt",t,!0)}(...t)))}catch(e){throw Ep(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Dp(this.firestore,Gf(this._delegate,function(...t){return new Wf("startAfter",t,!1)}(...t)))}catch(e){throw Ep(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Dp(this.firestore,Gf(this._delegate,function(...t){return new Jf("endBefore",t,!0)}(...t)))}catch(e){throw Ep(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Dp(this.firestore,Gf(this._delegate,function(...t){return new Jf("endAt",t,!1)}(...t)))}catch(e){throw Ep(e,"endAt()","Query.endAt()")}}isEqual(t){return Qd(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(t){t=Md(t,$d);const e=Md(t.firestore,Xd),n=tf(e),r=new ap(e);return function(t,e){const n=new Hr;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(r=(0,_.Z)(function*(t,e,n){try{const r=yield gc(t,e,!0),s=new ch(e,r.Gn),i=s.Io(r.documents),o=s.applyChanges(i,!1);n.resolve(o.snapshot)}catch(t){const r=jl(t,`Failed to execute query '${e} against cache`);n.reject(r)}}),function(t,e,n){return r.apply(this,arguments)})(yield Ad(t),e,n);var r})),n.promise}(n,t._query).then(n=>new Vf(e,r,t,n))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Md(t,$d);const e=Md(t.firestore,Xd),n=tf(e),r=new ap(e);return Nd(n,t._query,{source:"server"}).then(n=>new Vf(e,r,t,n))}(this._delegate):function(t){t=Md(t,$d);const e=Md(t.firestore,Xd),n=tf(e),r=new ap(e);return $f(t._query),Nd(n,t._query).then(n=>new Vf(e,r,t,n))}(this._delegate),e.then(t=>new Op(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)))}onSnapshot(...t){const e=kp(t),n=xp(t,t=>new Op(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)));return lp(this._delegate,e,n)}withConverter(t){return new Dp(this.firestore,this._delegate.withConverter(t?Ap.getInstance(this.firestore,t):null))}}class Zp{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Np(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Op{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Dp(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Np(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(t=>new Zp(this._firestore,t))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new Np(this._firestore,n))})}isEqual(t){return jf(this._delegate,t._delegate)}}class Lp extends Dp{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Sp(this.firestore,t):null}doc(t){try{return new Sp(this.firestore,void 0===t?Hd(this._delegate):Hd(this._delegate,t))}catch(e){throw Ep(e,"doc()","CollectionReference.doc()")}}add(t){return function(t,e){const n=Md(t.firestore,Xd),r=Hd(t),s=rp(t.converter,e);return hp(n,[mf(gf(t.firestore),"addDoc",r._key,s,null!==t.converter,{}).toMutation(r._key,zi.exists(!1))]).then(()=>r)}(this._delegate,t).then(t=>new Sp(this.firestore,t))}isEqual(t){return Kd(this._delegate,t._delegate)}withConverter(t){return new Lp(this.firestore,this._delegate.withConverter(t?Ap.getInstance(this.firestore,t):null))}}function qp(t){return Md(t,jd)}class Rp{constructor(...t){this._delegate=new sf(...t)}static documentId(){return new Rp(ps.keyField().canonicalString())}isEqual(t){return(t=(0,S.m9)(t))instanceof sf&&this._delegate._internalPath.isEqual(t._internalPath)}}class Up{constructor(t){this._delegate=t}static serverTimestamp(){const t=new wf("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Up(t)}static delete(){const t=new yf("deleteField");return t._methodName="FieldValue.delete",new Up(t)}static arrayUnion(...t){const e=function(...t){return new bf("arrayUnion",t)}(...t);return e._methodName="FieldValue.arrayUnion",new Up(e)}static arrayRemove(...t){const e=function(...t){return new _f("arrayRemove",t)}(...t);return e._methodName="FieldValue.arrayRemove",new Up(e)}static increment(t){const e=new Tf("increment",t);return e._methodName="FieldValue.increment",new Up(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Pp={Firestore:bp,GeoPoint:uf,Timestamp:os,Blob:yp,Transaction:Tp,WriteBatch:Ip,DocumentReference:Sp,DocumentSnapshot:Cp,Query:Dp,QueryDocumentSnapshot:Np,QuerySnapshot:Op,CollectionReference:Lp,FieldPath:Rp,FieldValue:Up,setLogLevel:function(t){Rr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Mp;(Mp=b.Z).INTERNAL.registerComponent(new I.wA("firestore-compat",t=>{return e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("firestore").getImmediate(),new bp(e,n,new wp);var e,n},"PUBLIC").setServiceProps(Object.assign({},Pp))),Mp.registerVersion("@firebase/firestore-compat","0.1.2");var Fp=n(3820);function Vp(t,e){return function(t,e=s.z){return new i.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Bp(t,e){return Vp(t,e).pipe((0,p.U)(t=>({payload:t,type:"query"})))}function jp(t,e){return Bp(t,e).pipe((0,f.O)(void 0),l(),(0,p.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,s)=>{const i=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));i&&JSON.stringify(i.doc.metadata)===JSON.stringify(e.metadata)||!i&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:s,newIndex:s,type:"modified",doc:e}})}),r}))}function $p(t,e,n){return jp(t,n).pipe((0,g.R)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return zp(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return zp(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zp(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),(0,m.x)(),(0,p.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function zp(t,e,n,...r){const s=t.slice();return s.splice(e,n,...r),s}function Gp(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}n(7841);class Hp{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=jp(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,p.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe((0,f.O)(void 0),l(),(0,y.h)(([t,e])=>e.length>0||!t),(0,p.U)(([t,e])=>e),u.iC)}auditTrail(t){return this.stateChanges(t).pipe((0,g.R)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Gp(t);return $p(this.query,e,this.afs.schedulers.outsideAngular).pipe(u.iC)}valueChanges(t={}){return Bp(this.query,this.afs.schedulers.outsideAngular).pipe((0,p.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),u.iC)}get(t){return(0,o.D)(this.query.get(t)).pipe(u.iC)}add(t){return this.ref.add(t)}doc(t){return new Kp(this.ref.doc(t),this.afs)}}class Kp{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:s}=tg(n,e);return new Hp(r,s,this.afs)}snapshotChanges(){return Vp(this.ref,this.afs.schedulers.outsideAngular).pipe((0,f.O)(void 0),l(),(0,p.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(u.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,p.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,o.D)(this.ref.get(t)).pipe(u.iC)}}class Qp{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?jp(this.query,this.afs.schedulers.outsideAngular).pipe((0,p.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),(0,y.h)(t=>t.length>0),u.iC):jp(this.query,this.afs.schedulers.outsideAngular).pipe(u.iC)}auditTrail(t){return this.stateChanges(t).pipe((0,g.R)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Gp(t);return $p(this.query,e,this.afs.schedulers.outsideAngular).pipe(u.iC)}valueChanges(t={}){return Bp(this.query,this.afs.schedulers.outsideAngular).pipe((0,p.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),u.iC)}get(t){return(0,o.D)(this.query.get(t)).pipe(u.iC)}}const Wp=new r.OlP("angularfire2.enableFirestorePersistence"),Jp=new r.OlP("angularfire2.firestore.persistenceSettings"),Yp=new r.OlP("angularfire2.firestore.settings"),Xp=new r.OlP("angularfire2.firestore.use-emulator");function tg(t,e=(t=>t)){return{query:e(t),ref:t}}let eg=(()=>{class t{constructor(t,e,n,r,s,i,c,l,h,d,f,p,g,m,y,b){this.schedulers=c;const _=(0,v.on)(t,i,e),T=h;d&&(0,Fp.nw)(_,i,f,g,m,y,p,b),[this.firestore,this.persistenceEnabled$]=(0,u.cc)(`${_.name}.firestore`,"AngularFirestore",_.name,()=>{const t=i.runOutsideAngular(()=>_.firestore());if(r&&t.settings(r),T&&t.useEmulator(...T),n&&!(0,w.PM)(s)){const e=()=>{try{return(0,o.D)(t.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),(0,a.of)(!1)}};return[t,i.runOutsideAngular(e)]}return[t,(0,a.of)(!1)]},[r,T,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:s}=tg(n,e),i=this.schedulers.ngZone.run(()=>r);return new Hp(i,s,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Qp(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Kp(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(v.Dh),r.LFG(v.xv,8),r.LFG(Wp,8),r.LFG(Yp,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(u.HU),r.LFG(Jp,8),r.LFG(Xp,8),r.LFG(Fp.zQ,8),r.LFG(Fp.Qv,8),r.LFG(Fp.L6,8),r.LFG(Fp._Q,8),r.LFG(Fp.rT,8),r.LFG(Fp.lh,8),r.LFG(Fp.f7,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})()},7063:(t,e,n)=>{"use strict";n.d(e,{Q1:()=>Xt});var r=n(7574),s=n(5917),i=n(4402),o=n(4395),a=n(8002),u=n(3190),c=n(9126),l=n(7716),h=n(8939),d=n(4486),f=n(6304),p=n(5452),g=n(4685),m=n(6034),y=(()=>(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(y||(y={})),y))();const v="firebasestorage.googleapis.com";class w extends g.ZR{constructor(t,e){super(b(t),`Firebase Storage: ${e} (${b(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,w.prototype)}_codeEquals(t){return b(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function b(t){return"storage/"+t}function _(){return new w("unknown","An unknown error occurred, please check the error payload for server response.")}function T(){return new w("canceled","User canceled the upload/download.")}function I(){return new w("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function A(){return new w("no-download-url","The given file does not have any download URLs.")}function S(t){return new w("invalid-argument",t)}function E(){return new w("app-deleted","The Firebase app was deleted.")}function k(t){return new w("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function x(t,e){return new w("invalid-format","String does not match format '"+t+"': "+e)}function C(t){throw new w("internal-error","Internal error: "+t)}class N{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=y.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=y.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=y.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,n,r){if(this.sent_)throw C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw C("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw C("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponseText(){if(!this.sent_)throw C("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class D{createConnection(){return new N}}class Z{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=Z.makeFromUrl(t,e)}catch(r){return new Z(t,"")}if(""===n.path)return n;throw new w("invalid-default-bucket","Invalid default bucket '"+t+"'.")}static makeFromUrl(t,e){let n=null;const r="([A-Za-z0-9.\\-_]+)",s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${e===v?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let u=0;u<a.length;u++){const e=a[u],r=e.regex.exec(t);if(r){let t=r[e.indices.path];t||(t=""),n=new Z(r[e.indices.bucket],t),e.postModify(n);break}}if(null==n)throw function(t){return new w("invalid-url","Invalid URL '"+t+"'.")}(t);return n}}class O{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function L(t){return"string"==typeof t||t instanceof String}function q(t){return R()&&t instanceof Blob}function R(){return"undefined"!=typeof Blob}function U(t,e,n,r){if(r<e)throw S(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw S(`Invalid value for '${t}'. Expected ${n} or less.`)}function P(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function M(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}class F{constructor(t,e,n,r,s,i,o,a,u,c,l){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=s.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=o,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()})}start_(){const t=this;function e(e,n){const r=t.resolve_,s=t.reject_,i=n.connection;if(n.wasSuccessCode)try{const e=t.callback_(i,i.getResponseText());void 0!==e?r(e):r()}catch(o){s(o)}else if(null!==i){const e=_();e.serverResponse=i.getResponseText(),s(t.errorCallback_?t.errorCallback_(i,e):e)}else s(n.canceled?t.appDelete_?E():T():new w("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new V(!1,null,!0)):this.backoffId_=function(e,n,r){let s=1,i=null,o=!1,a=0;function u(){return 2===a}let c=!1;function l(...t){c||(c=!0,n.apply(null,t))}function h(e){i=setTimeout(()=>{i=null,function(e,n){if(n)return void e(!1,new V(!1,null,!0));const r=t.pool_.createConnection();function s(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(s),r.send(t.url_,t.method_,t.body_,t.headers_).then(()=>{null!==t.progressCallback_&&r.removeUploadProgressListener(s),t.pendingConnection_=null;const n=r.getErrorCode()===y.NO_ERROR,i=r.getStatus();if(!n||t.isRetryStatusCode_(i)){const t=r.getErrorCode()===y.ABORT;return void e(!1,new V(!1,null,t))}const o=-1!==t.successCodes_.indexOf(i);e(!0,new V(o,r))})}(d,u())},e)}function d(t,...e){if(c)return;if(t)return void l.call(null,t,...e);if(u()||o)return void l.call(null,t,...e);let n;s<64&&(s*=2),1===a?(a=2,n=0):n=1e3*(s+Math.random()),h(n)}let f=!1;function p(t){f||(f=!0,c||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout(()=>{o=!0,p(!0)},r),p}(0,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r}}class V{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function B(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function j(...t){const e=B();if(void 0!==e){const n=new e;for(let e=0;e<t.length;e++)n.append(t[e]);return n.getBlob()}if(R())return new Blob(t);throw new w("unsupported-environment","This browser doesn't seem to support creating Blobs")}const $={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class z{constructor(t,e){this.data=t,this.contentType=e||null}}function G(t,e){switch(t){case $.RAW:return new z(H(e));case $.BASE64:case $.BASE64URL:return new z(K(t,e));case $.DATA_URL:return new z(function(t){const e=new Q(t);return e.base64?K($.BASE64,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(n){throw x($.DATA_URL,"Malformed data URL.")}return H(e)}(e.rest)}(e),new Q(e).contentType)}throw _()}function H(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function K(t,e){switch(t){case $.BASE64:{const n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw x(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case $.BASE64URL:{const n=-1!==e.indexOf("+"),r=-1!==e.indexOf("/");if(n||r)throw x(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(e)}catch(s){throw x(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Q{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw x($.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;var r,s;null!=n&&(this.base64=(r=n).length>=(s=";base64").length&&r.substring(r.length-s.length)===s,this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}class W{constructor(t,e){let n=0,r="";q(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(q(this.data_)){const i=(r=t,s=e,(n=this.data_).webkitSlice?n.webkitSlice(r,s):n.mozSlice?n.mozSlice(r,s):n.slice?n.slice(r,s):null);return null===i?null:new W(i)}var n,r,s;{const n=new Uint8Array(this.data_.buffer,t,e-t);return new W(n,!0)}}static getBlob(...t){if(R()){const e=t.map(t=>t instanceof W?t.data_:t);return new W(j.apply(null,e))}{const e=t.map(t=>L(t)?G($.RAW,t).data:t.data_);let n=0;e.forEach(t=>{n+=t.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(t=>{for(let e=0;e<t.length;e++)r[s++]=t[e]}),new W(r,!0)}}uploadData(){return this.data_}}function J(t){let e;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e;var n}function Y(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function X(t,e){return e}class tt{constructor(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||X}}let et=null;function nt(){if(et)return et;const t=[];t.push(new tt("bucket")),t.push(new tt("generation")),t.push(new tt("metageneration")),t.push(new tt("name","fullPath",!0));const e=new tt("name");e.xform=function(t,e){return function(t){return!L(t)||t.length<2?t:Y(t)}(e)},t.push(e);const n=new tt("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new tt("timeCreated")),t.push(new tt("updated")),t.push(new tt("md5Hash",null,!0)),t.push(new tt("cacheControl",null,!0)),t.push(new tt("contentDisposition",null,!0)),t.push(new tt("contentEncoding",null,!0)),t.push(new tt("contentLanguage",null,!0)),t.push(new tt("contentType",null,!0)),t.push(new tt("metadata","customMetadata",!0)),et=t,et}function rt(t,e,n){const r=J(e);return null===r?null:function(t,e,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const t=n[i];r[t.local]=t.xform(r,e[t.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=new Z(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function st(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const r=e[s];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class it{constructor(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ot(t){if(!t)throw _()}function at(t,e){return function(n,r){const s=rt(t,r,e);return ot(null!==s),s}}function ut(t){return function(e,n){let r;return r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new w("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new w("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new w("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new w("unauthorized","User does not have permission to access '"+t.path+"'."):n,r.serverResponse=n.serverResponse,r}}function ct(t){const e=ut(t);return function(n,r){let s=e(n,r);return 404===n.getStatus()&&(s=new w("object-not-found","Object '"+t.path+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function lt(t,e,n){const r=P(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,i=new it(r,"GET",at(t,n),s);return i.errorHandler=ct(e),i}function ht(t,e,n,r,s){const i={};i.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=P(e.bucketOnlyServerUrl(),t.host,t._protocol),a=t.maxOperationRetryTime,u=new it(o,"GET",function(t,e){return function(n,r){const s=function(t,e,n){const r=J(n);return null===r?null:function(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const s of n.prefixes){const n=s.replace(/\/$/,""),i=t._makeStorageReference(new Z(e,n));r.prefixes.push(i)}if(n.items)for(const s of n.items){const n=t._makeStorageReference(new Z(e,s.name));r.items.push(n)}return r}(t,e,r)}(t,e,r);return ot(null!==s),s}}(t,e.bucket),a);return u.urlParams=i,u.errorHandler=ut(e),u}function dt(t,e,n){const r=P(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,i=new it(r,"GET",function(t,e){return function(n,r){const s=rt(t,r,e);return ot(null!==s),function(t,e,n,r){const s=J(e);if(null===s)return null;if(!L(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const o=encodeURIComponent;return i.split(",").map(e=>{const s=t.fullPath;return P("/b/"+o(t.bucket)+"/o/"+o(s),n,r)+M({alt:"media",token:e})})[0]}(s,r,t.host,t._protocol)}}(t,n),s);return i.errorHandler=ct(e),i}function ft(t,e,n,r){const s=P(e.fullServerUrl(),t.host,t._protocol),i=st(n,r),o=t.maxOperationRetryTime,a=new it(s,"PATCH",at(t,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=i,a.errorHandler=ct(e),a}function pt(t,e){const n=P(e.fullServerUrl(),t.host,t._protocol),r=new it(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=ct(e),r}function gt(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class mt{constructor(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}function yt(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){ot(!1)}return ot(!!n&&-1!==(e||["active"]).indexOf(n)),n}const vt=262144,wt={STATE_CHANGED:"state_changed"},bt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _t(t){switch(t){case"running":case"pausing":case"canceling":return bt.RUNNING;case"paused":return bt.PAUSED;case"success":return bt.SUCCESS;case"canceled":return bt.CANCELED;case"error":default:return bt.ERROR}}class Tt{constructor(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=n?n:void 0;else{const e=t;this.next=e.next,this.error=e.error,this.complete=e.complete}}}function It(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class At{constructor(t,e,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=nt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=t=>{this._request=void 0,this._chunkMultiplier=1,t._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=t,this._transition("error"))},this._metadataErrorHandler=t=>{this._request=void 0,t._codeEquals("canceled")?this.completeTransitions_():(this._error=t,this._transition("error"))},this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,n])=>{switch(this._state){case"running":t(e,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const n=function(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=gt(e,r,s),a={name:o.fullPath},u=P(i,t.host,t._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=st(o,n),h=new it(u,"POST",function(t){let e;yt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){ot(!1)}return ot(L(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=ut(e),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,t,e);this._request=r,r.getPromise().then(t=>{this._request=void 0,this._uploadUrl=t,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,n)=>{const r=function(t,e,n,r){const s=new it(n,"POST",function(t){const e=yt(t,["active","final"]);let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(i){ot(!1)}n||ot(!1);const s=Number(n);return ot(!isNaN(s)),new mt(s,r.size(),"final"===e)},t.maxUploadRetryTime);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=ut(e),s}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,e,n);this._request=s,s.getPromise().then(t=>{t=t,this._request=void 0,this._updateProgress(t.current),this._needToFetchStatus=!1,t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=vt*this._chunkMultiplier,e=new mt(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,s)=>{let i;try{i=function(t,e,n,r,s,i,o,a){const u=new mt(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new w("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const c=u.total-u.current;let l=c;s>0&&(l=Math.min(l,s));const h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${u.current}`},f=r.slice(h,h+l);if(null===f)throw I();const p=new it(n,"POST",function(t,n){const s=yt(t,["active","final"]),o=u.current+l,a=r.size();let c;return c="final"===s?at(e,i)(t,n):null,new mt(o,a,"final"===s,c)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=ut(t),p}(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(i,r,s);this._request=o,o.getPromise().then(t=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(t.current),t.finalized?(this._metadata=t.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){vt*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const n=lt(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,t,e);this._request=r,r.getPromise().then(t=>{this._request=void 0,this._metadata=t,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const n=function(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const u=gt(e,r,s),c=st(u,n),l=W.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw I();const h={name:u.fullPath},d=P(i,t.host,t._protocol),f=t.maxUploadRetryTime,p=new it(d,"POST",at(t,n),f);return p.urlParams=h,p.headers=o,p.body=l.uploadData(),p.errorHandler=ut(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,t,e);this._request=r,r.getPromise().then(t=>{this._request=void 0,this._metadata=t,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=T(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=_t(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,n,r){const s=new Tt(e||void 0,n||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(_t(this._state)){case bt.SUCCESS:It(this._resolve.bind(null,this.snapshot))();break;case bt.CANCELED:case bt.ERROR:It(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(_t(this._state)){case bt.RUNNING:case bt.PAUSED:t.next&&It(t.next.bind(t,this.snapshot))();break;case bt.SUCCESS:t.complete&&It(t.complete.bind(t))();break;case bt.CANCELED:case bt.ERROR:t.error&&It(t.error.bind(t,this._error))();break;default:t.error&&It(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class St{constructor(t,e){this._service=t,this._location=e instanceof Z?e:Z.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new St(t,e)}get root(){const t=new Z(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new Z(this._location.bucket,t);return new St(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw k(t)}}function Et(t,e,n){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(t,e,n){const r={pageToken:n},s=yield xt(t,r);e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield Et(t,e,s.nextPageToken))})).apply(this,arguments)}function xt(t,e){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(t,e){null!=e&&"number"==typeof e.maxResults&&U("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=ht(t.storage,t._location,"/",n.pageToken,n.maxResults);return(yield t.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function Nt(){return(Nt=(0,f.Z)(function*(t){t._throwIfRoot("getMetadata");const e=lt(t.storage,t._location,nt());return(yield t.storage.makeRequestWithTokens(e)).getPromise()})).apply(this,arguments)}function Dt(){return(Dt=(0,f.Z)(function*(t,e){t._throwIfRoot("updateMetadata");const n=ft(t.storage,t._location,e,nt());return(yield t.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(t){t._throwIfRoot("getDownloadURL");const e=dt(t.storage,t._location,nt());return(yield t.storage.makeRequestWithTokens(e)).getPromise().then(t=>{if(null===t)throw A();return t})})).apply(this,arguments)}function Ot(){return(Ot=(0,f.Z)(function*(t){t._throwIfRoot("deleteObject");const e=pt(t.storage,t._location);return(yield t.storage.makeRequestWithTokens(e)).getPromise()})).apply(this,arguments)}function Lt(t,e){const n=function(t,e){const n=e.split("/").filter(t=>t.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Z(t._location.bucket,n);return new St(t.storage,r)}function qt(t,e){if(t instanceof Pt){const n=t;if(null==n._bucket)throw new w("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new St(n,n._bucket);return null!=e?qt(r,e):r}return void 0!==e?Lt(t,e):t}function Rt(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof Pt)return new St(t,e);throw S("To use ref(service, url), the first argument must be a Storage instance.")}return qt(t,e)}function Ut(t,e){const n=null==e?void 0:e.storageBucket;return null==n?null:Z.makeFromBucketSpec(n,t)}class Pt{constructor(t,e,n,r,s,i){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=v,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Z.makeFromBucketSpec(s,this._host):Ut(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Z.makeFromBucketSpec(this._url,t):Ut(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){U("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){U("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,f.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const t=yield e.getToken();if(null!==t)return t.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,f.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new St(this,t)}_makeRequest(t,e,n){if(this._deleted)return new O(E());{const r=function(t,e,n,r,s,i){const o=M(t.urlParams),a=t.url+o,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,i),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new F(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(()=>this._requests.delete(r),()=>this._requests.delete(r)),r}}makeRequestWithTokens(t){var e=this;return(0,f.Z)(function*(){const[n,r]=yield Promise.all([e._getAuthToken(),e._getAppCheckToken()]);return e._makeRequest(t,n,r)})()}}function Mt(t,e){return Rt(t=(0,g.m9)(t),e)}(0,p._registerComponent)(new m.wA("storage",function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Pt(n,r,s,new D,e,p.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)("@firebase/storage","0.8.2");class Ft{constructor(t,e,n){this._delegate=t,this.task=e,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Vt{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ft(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(e=>{if(t)return t(new Ft(e,this,this._ref))},e)}on(t,e,n,r){let s;return e&&(s="function"==typeof e?t=>e(new Ft(t,this,this._ref)):{next:e.next?t=>e.next(new Ft(t,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,n||void 0,r||void 0)}}class Bt{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new jt(t,this._service))}get items(){return this._delegate.items.map(t=>new jt(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jt{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(t,e){return Lt(t,e)}(this._delegate,t);return new jt(e,this.storage)}get root(){return new jt(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new jt(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Vt(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new At(t,new W(e),n)}(t=(0,g.m9)(t),e,n)}(this._delegate,t,e),this)}putString(t,e=$.RAW,n){this._throwIfRoot("putString");const r=G(e,t),s=Object.assign({},n);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new Vt(new At(this._delegate,new W(r.data,!0),s),this)}listAll(){return function(t){return function(t){const e={prefixes:[],items:[]};return Et(t,e).then(()=>e)}(t=(0,g.m9)(t))}(this._delegate).then(t=>new Bt(t,this.storage))}list(t){return function(t,e){return xt(t=(0,g.m9)(t),e)}(this._delegate,t||void 0).then(t=>new Bt(t,this.storage))}getMetadata(){return function(t){return function(t){return Nt.apply(this,arguments)}(t=(0,g.m9)(t))}(this._delegate)}updateMetadata(t){return function(t,e){return function(t,e){return Dt.apply(this,arguments)}(t=(0,g.m9)(t),e)}(this._delegate,t)}getDownloadURL(){return function(t){return function(t){return Zt.apply(this,arguments)}(t=(0,g.m9)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(t){return function(t){return Ot.apply(this,arguments)}(t=(0,g.m9)(t))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw k(t)}}class $t{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(zt(t))throw S("ref() expected a child path but got a URL, use refFromURL instead.");return new jt(Mt(this._delegate,t),this)}refFromURL(t){if(!zt(t))throw S("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Z.makeFromUrl(t,this._delegate.host)}catch(e){throw S("refFromUrl() expected a valid full URL but got an invalid one.")}return new jt(Mt(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,n={}){!function(t,e,n,r={}){!function(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken="string"==typeof s?s:(0,g.Sg)(s,t.app.options.projectId))}(t,e,n,r)}(this._delegate,t,e,n)}}function zt(t){return/^[A-Za-z]+:\/\//.test(t)}function Gt(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new $t(n,r)}function Ht(t){const e=function(t){return new r.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe((0,o.b)(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,a.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Kt(t){return{getDownloadURL:()=>(0,s.of)(void 0).pipe(c.fc,(0,u.w)(()=>t.getDownloadURL()),c.iC),getMetadata:()=>(0,s.of)(void 0).pipe(c.fc,(0,u.w)(()=>t.getMetadata()),c.iC),delete:()=>(0,i.D)(t.delete()),child:e=>Kt(t.child(e)),updateMetadata:e=>(0,i.D)(t.updateMetadata(e)),put:(e,n)=>Ht(t.put(e,n)),putString:(e,n,r)=>Ht(t.putString(e,n,r)),listAll:()=>(0,i.D)(t.listAll())}}!function(t){const e={TaskState:bt,TaskEvent:wt,StringFormat:$,Storage:$t,Reference:jt};t.INTERNAL.registerComponent(new m.wA("storage-compat",Gt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.1.2")}(d.Z),n(7841);const Qt=new l.OlP("angularfire2.storageBucket"),Wt=new l.OlP("angularfire2.storage.maxUploadRetryTime"),Jt=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Yt=new l.OlP("angularfire2.storage.use-emulator");let Xt=(()=>{class t{constructor(t,e,n,r,s,i,o,a,u){const l=(0,h.on)(t,s,e);this.storage=(0,c.cc)(`${l.name}.storage.${n}`,"AngularFireStorage",l.name,()=>{const t=s.runOutsideAngular(()=>l.storage(n||void 0)),e=u;return e&&t.useEmulator(...e),o&&t.setMaxUploadRetryTime(o),a&&t.setMaxOperationRetryTime(a),t},[o,a])}ref(t){return Kt(this.storage.ref(t))}refFromURL(t){return Kt(this.storage.refFromURL(t))}upload(t,e,n){return Kt(this.storage.ref(t)).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(h.Dh),l.LFG(h.xv,8),l.LFG(Qt,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(c.HU),l.LFG(Wt,8),l.LFG(Jt,8),l.LFG(Yt,8))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})()},7468:function(t,e){var n,r,s;!function(i,o){"use strict";"object"==typeof t.exports?t.exports=o():(r=[],void 0===(s="function"==typeof(n=o)?n.apply(e,r):n)||(t.exports=s))}(0,function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(s(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(e(t,n))return!1;return!0}return!1}function r(e){return t.call(e)}var s=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(t){var e=parseInt(t);return e.toString()===t?e:t}function o(t){var o,a,u=function(t){return Object.keys(u).reduce(function(e,n){return"create"===n||"function"==typeof u[n]&&(e[n]=u[n].bind(u,t)),e},{})};function c(t,e){if(o(t,e))return t[e]}function l(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return l(t,e.split(".").map(i),n,r);var s=e[0],o=a(t,s);return 1===e.length?(void 0!==o&&r||(t[s]=n),o):(void 0===o&&(t[s]="number"==typeof e[1]?[]:{}),l(t[s],e.slice(1),n,r))}return o=(t=t||{}).includeInheritedProps?function(){return!0}:function(t,n){return"number"==typeof n&&Array.isArray(t)||e(t,n)},a=t.includeInheritedProps?function(t,e){"string"!=typeof e&&"number"!=typeof e&&(e=String(e));var n=c(t,e);if("__proto__"===e||"prototype"===e||"constructor"===e&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(t,e){return c(t,e)},u.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var o=0;o<r.length;o++){var a=i(r[o]);if(!("number"==typeof a&&s(n)&&a<n.length||(t.includeInheritedProps?a in Object(n):e(n,a))))return!1;n=n[a]}return!0},u.ensureExists=function(t,e,n){return l(t,e,n,!0)},u.set=function(t,e,n,r){return l(t,e,n,r)},u.insert=function(t,e,n,r){var i=u.get(t,e);r=~~r,s(i)||u.set(t,e,i=[]),i.splice(r,0,n)},u.empty=function(t,e){var i,a;if(!n(e)&&null!=t&&(i=u.get(t,e))){if("string"==typeof i)return u.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===r(t)}(i))return u.set(t,e,!1);if("number"==typeof i)return u.set(t,e,0);if(s(i))i.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===r(t)}(i))return u.set(t,e,null);for(a in i)o(i,a)&&delete i[a]}}},u.push=function(t,e){var n=u.get(t,e);s(n)||u.set(t,e,n=[]),n.push.apply(n,Array.prototype.slice.call(arguments,2))},u.coalesce=function(t,e,n){for(var r,s=0,i=e.length;s<i;s++)if(void 0!==(r=u.get(t,e[s])))return r;return n},u.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return u.get(t,e.split("."),n);var r=i(e[0]),s=a(t,r);return void 0===s?n:1===e.length?s:u.get(t[r],e.slice(1),n)},u.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(n(e))return t;if("string"==typeof e)return u.del(t,e.split("."));var r=i(e[0]);return a(t,r),o(t,r)?1!==e.length?u.del(t[r],e.slice(1)):(s(t)?t.splice(r,1):delete t[r],t):t},u}var a=o();return a.create=o,a.withInheritedProps=o({includeInheritedProps:!0}),a})},4395:(t,e,n)=>{"use strict";n.d(e,{b:()=>i});var r=n(7393),s=n(3637);function i(t,e=s.P){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))}}class a extends r.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function u(t){t.debouncedNext()}},5721:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});let r=(()=>{class t{}return t.url="https://app.ouicare.cm/",t.url3="",t.emai_regex="^[A-Z0-9a-z\\._%+-]+@([A-Za-z0-9-]+\\.)+[A-Za-z]{2,4}$",t.mp_reqex="^.*(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9!@#$%]+$",t})()},7752:(t,e,n)=>{"use strict";n.r(e),n.d(e,{LayoutModule:()=>tn});var r=n(8583),s=n(2789),i=n(3318),o=n(4834),a=n(5469),u=n(7716),c=n(2340),l=n(6215),h=n(7468);const d={main:{componentName:"main",type:"default",primaryColor:"#009EF7",darkSkinEnabled:!0},loader:{componentName:"loader",display:!0,type:"default"},scrolltop:{componentName:"scroll-top",display:!0},header:{componentName:"header",display:!0,width:"fluid",left:"menu",fixed:{desktop:!0,tabletAndMobile:!0},menuIcon:"svg"},megaMenu:{componentName:"mega-menu",display:!0},aside:{componentName:"aside",display:!0,theme:"light",menu:"main",fixed:!0,minimized:!1,minimize:!0,hoverable:!0,menuIcon:"svg"},content:{componentName:"content",width:"fixed",layout:"default"},toolbar:{componentName:"toolbar",display:!0,width:"fluid",fixed:{desktop:!0,tabletAndMobileMode:!0},layout:"toolbar1",layouts:{toolbar1:{height:"55px",heightAndTabletMobileMode:"55px"},toolbar2:{height:"75px",heightAndTabletMobileMode:"65px"},toolbar3:{height:"55px",heightAndTabletMobileMode:"55px"},toolbar4:{height:"65px",heightAndTabletMobileMode:"65px"},toolbar5:{height:"75px",heightAndTabletMobileMode:"65px"}}},footer:{componentName:"footer",width:"fluid"},pageTitle:{componentName:"page-title",display:!0,breadCrumbs:!0,description:!1,layout:"default",direction:"row",responsive:!0,responsiveBreakpoint:"lg",responsiveTarget:"#kt_toolbar_container"}},f=`${c.N.appVersion}-layoutConfig`;let p=(()=>{class t{constructor(){this.layoutConfigSubject=new l.X(void 0),this.classes={header:[],headerContainer:[],headerMobile:[],headerMenu:[],aside:[],asideMenu:[],asideToggle:[],toolbar:[],toolbarContainer:[],content:[],contentContainer:[],footerContainer:[],sidebar:[],pageTitle:[]},this.attrs={asideMenu:{},headerMobile:{},headerMenu:{},headerContainer:{},pageTitle:{}}}initConfig(){const t=localStorage.getItem(f);if(t)try{return void this.layoutConfigSubject.next(JSON.parse(t))}catch(e){this.removeConfig(),console.error("config parse from local storage",e)}this.layoutConfigSubject.next(d)}removeConfig(){localStorage.removeItem(f)}refreshConfigToDefault(){this.setConfigWithPageRefresh(void 0)}getConfig(){return this.layoutConfigSubject.value||d}setConfig(t){t?localStorage.setItem(f,JSON.stringify(t)):this.removeConfig(),this.layoutConfigSubject.next(t)}updateConfig(t){const e=this.layoutConfigSubject.value;if(!e)return;const n=Object.assign(Object.assign({},e),t);this.classes={header:[],headerContainer:[],headerMobile:[],headerMenu:[],aside:[],asideMenu:[],asideToggle:[],toolbar:[],toolbarContainer:[],content:[],contentContainer:[],footerContainer:[],sidebar:[],pageTitle:[]},this.cssVariables={body:new Map},this.attrs=Object.assign({},{asideMenu:{},headerMobile:{},headerMenu:{},headerContainer:{},pageTitle:{}}),this.layoutConfigSubject.next(n)}setConfigWithoutLocalStorageChanges(t){this.layoutConfigSubject.next(t)}setConfigWithPageRefresh(t){this.setConfig(t),document.location.reload()}getProp(t){const e=this.layoutConfigSubject.value;if(e)return h.get(e,t)}setCSSClass(t,e){this.classes[t]||(this.classes[t]=[]),e.split(" ").forEach(e=>this.classes[t].push(e))}getCSSClasses(t){return this.classes[t]||[]}getStringCSSClasses(t){return this.getCSSClasses(t).join(" ")}getHTMLAttributes(t){return this.attrs[t]||{}}setHTMLAttribute(t,e,n){this.attrs[t]||(this.attrs[t]={}),this.attrs[t][e]=n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),g=(()=>{class t{constructor(t){this.layout=t}init(){this.layout.initConfig(),this.initLayout(),this.initHeader(),this.initPageTitle(),this.initToolbar(),this.initContent(),this.initAside(),this.initFooter()}update(t){this.layout.updateConfig(t),this.initLayout(),this.initHeader(),this.initPageTitle(),this.initToolbar(),this.initContent(),this.initAside(),this.initFooter()}initLayout(){document.body.setAttribute("style",""),document.body.setAttribute("id","kt_body");const t=this.layout.getProp("main.body.backgroundImage");t&&(document.body.style.backgroundImage=`url("${t}")`);const e=(this.layout.getProp("main.body.class")||"").toString();e&&e.split(" ").forEach(t=>document.body.classList.add(t))}initHeader(){this.layout.setCSSClass("headerContainer","fluid"===this.layout.getProp("header.width")?"container-fluid":"container-xxl"),this.layout.getProp("header.fixed.desktop")&&document.body.classList.add("header-fixed"),this.layout.getProp("header.fixed.tabletAndMobile")&&document.body.classList.add("header-tablet-and-mobile-fixed")}initPageTitle(){if(this.layout.getProp("pageTitle.display")&&("column"===this.layout.getProp("pageTitle.direction")?(this.layout.setCSSClass("pageTitle","flex-column"),this.layout.setCSSClass("pageTitle","align-items-start")):(this.layout.setCSSClass("pageTitle","align-items-center"),this.layout.setCSSClass("pageTitle","flex-wrap")),this.layout.setCSSClass("pageTitle","me-3"),this.layout.getProp("pageTitle.responsive"))){this.layout.setCSSClass("pageTitle","mb-5"),this.layout.setCSSClass("pageTitle","mb-lg-0"),this.layout.setHTMLAttribute("pageTitle","data-kt-swapper",!0),this.layout.setHTMLAttribute("pageTitle","data-kt-swapper-mode","prepend");const t=this.layout.getProp("pageTitle.responsiveBreakpoint"),e=this.layout.getProp("pageTitle.responsiveTarget");this.layout.setHTMLAttribute("pageTitle","data-kt-swapper-parent",`{ default: '#kt_content_container', '${t}': '${e}'}`)}}initToolbar(){if(!this.layout.getProp("toolbar.display"))return;document.body.classList.add("toolbar-enabled");const t=this.layout.getProp("toolbar.width");if(this.layout.setCSSClass("toolbarContainer","fluid"===t?"container-fluid":"container-xxl"),this.layout.getProp("toolbar.fixed.desktop")&&document.body.classList.add("toolbar-fixed"),this.layout.getProp("toolbar.fixed.tabletAndMobileMode")&&document.body.classList.add("toolbar-tablet-and-mobile-fixed"),"toolbar1"===this.layout.getProp("toolbar.layout")){const t=this.layout.getProp("toolbar.layouts.toolbar1.height"),e=this.layout.getProp("toolbar.layouts.toolbar1.heightAndTabletMobileMode");let n="";t&&(n+=` --kt-toolbar-height: ${t};`),e&&(n+=` --kt-toolbar-height-tablet-and-mobile: ${e};`),document.body.setAttribute("style",n)}}initContent(){const t=this.layout.getProp("content.width");this.layout.setCSSClass("contentContainer","fluid"===t?"container-fluid":"container-xxl")}initAside(){if(!this.layout.getProp("aside.display"))return;document.body.classList.add("aside-enabled");const t=this.layout.getProp("aside.theme");this.layout.setCSSClass("aside",`aside-${t}`),this.layout.getProp("aside.fixed")&&document.body.classList.add("aside-fixed"),this.layout.getProp("aside.minimized")&&document.body.setAttribute("data-kt-aside-minimize","on"),this.layout.getProp("aside.hoverable")&&this.layout.setCSSClass("aside","aside-hoverable")}initFooter(){const t=this.layout.getProp("footer.width");this.layout.setCSSClass("footerContainer","fluid"===t?"container-fluid":"container-xxl")}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(p))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function m(t,e){1&t&&(u.ynx(0),u.TgZ(1,"div",6),u.TgZ(2,"div",7),u._UZ(3,"span",8),u.qZA(),u.qZA(),u.BQk()),2&t&&(u.xp6(3),u.Q6J("inlineSVG","./assets/media/icons/duotune/text/txt001.svg"))}let y=(()=>{class t{constructor(t){this.layout=t,this.toolbarButtonMarginClass="ms-1 ms-lg-3",this.toolbarButtonHeightClass="w-30px h-30px w-md-40px h-md-40px",this.toolbarUserAvatarHeightClass="symbol-30px symbol-md-40px",this.toolbarButtonIconSizeClass="svg-icon-1",this.headerLeft="menu"}ngOnInit(){this.headerLeft=this.layout.getProp("header.left")}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-topbar"]],decls:13,vars:16,consts:[[1,"d-flex","align-items-center",3,"ngClass"],["data-kt-menu-trigger","click","data-kt-menu-attach","parent","data-kt-menu-placement","bottom-end","data-kt-menu-flip","bottom",1,"btn","btn-icon","btn-active-light-primary","position-relative",3,"ngClass"],[1,"svg-icon",3,"inlineSVG","ngClass"],["data-kt-menu-trigger","click","data-kt-menu-attach","parent","data-kt-menu-placement","bottom-end","data-kt-menu-flip","bottom",1,"btn","btn-icon","btn-active-light-primary",3,"ngClass"],["id","kt_header_user_menu_toggle",1,"d-flex","align-items-center",3,"ngClass"],[4,"ngIf"],["title","Show header menu",1,"d-flex","align-items-center","d-lg-none","ms-2","me-n3"],["id","kt_header_menu_mobile_toggle",1,"btn","btn-icon","btn-active-light-primary","w-30px","h-30px","w-md-40px","h-md-40px"],[1,"svg-icon","svg-icon-1",3,"inlineSVG"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._UZ(2,"span",2),u.qZA(),u.qZA(),u._UZ(3,"div",0),u.TgZ(4,"div",0),u.TgZ(5,"div",1),u._UZ(6,"span",2),u.qZA(),u.qZA(),u._UZ(7,"div",0),u.TgZ(8,"div",0),u.TgZ(9,"div",3),u._UZ(10,"span",2),u.qZA(),u.qZA(),u._UZ(11,"div",4),u.YNc(12,m,4,1,"ng-container",5)),2&t&&(u.Q6J("ngClass",e.toolbarButtonMarginClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonHeightClass),u.xp6(1),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen021.svg")("ngClass",e.toolbarButtonIconSizeClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonMarginClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonMarginClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonHeightClass),u.xp6(1),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen022.svg")("ngClass",e.toolbarButtonIconSizeClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonMarginClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonMarginClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonHeightClass),u.xp6(1),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen025.svg")("ngClass",e.toolbarButtonIconSizeClass),u.xp6(1),u.Q6J("ngClass",e.toolbarButtonMarginClass),u.xp6(1),u.Q6J("ngIf","menu"===e.headerLeft))},directives:[r.mk,s.d$,r.O5],styles:[""]}),t})(),v=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}calculateMenuItemCssClass(t){return w(this.router.url,t)?"active":""}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(i.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-header-menu"]],decls:196,vars:10,consts:[[1,"menu-item","me-lg-1"],["routerLinkActive","active","routerLink","/",1,"menu-link","py-3"],[1,"menu-title"],["routerLinkActive","active","routerLink","/builder",1,"menu-link","py-3"],["data-kt-menu-trigger","click","data-kt-menu-placement","bottom-start",1,"menu-item","menu-lg-down-accordion","me-lg-1","menu-dropdown"],[1,"menu-link","py-3",3,"ngClass"],[1,"menu-arrow","d-lg-none"],["data-kt-menu-dismiss","true","data-popper-placement","bottom-start",1,"menu-sub","menu-sub-lg-down-accordion","menu-sub-lg-dropdown","menu-rounded-0","py-lg-4","w-lg-225px"],["data-kt-menu-trigger","{default:'click', lg: 'hover'}","data-kt-menu-placement","right-start",1,"menu-item","menu-lg-down-accordion","me-lg-1"],[1,"menu-icon"],[1,"bi","fs-3","bi-archive"],[1,"menu-arrow"],["data-kt-menu-dismiss","true",1,"menu-sub","menu-sub-lg-down-accordion","menu-sub-lg-dropdown","menu-rounded-0","py-lg-4","w-lg-225px"],[1,"menu-bullet"],[1,"bullet","bullet-dot"],["data-link","/crafted/pages/profile",1,"menu-title"],["routerLinkActive","active","routerLink","/crafted/pages/profile/overview",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/pages/profile/projects",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/pages/profile/campaigns",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/pages/profile/documents",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/pages/profile/connections",1,"menu-link","py-3"],["data-link","/crafted/pages/wizards",1,"menu-title"],["routerLinkActive","active","routerLink","/crafted/pages/wizards/horizontal",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/pages/wizards/vertical",1,"menu-link","py-3"],[1,"bi","fs-3","bi-person"],["data-link","/crafted/account",1,"menu-title"],["routerLinkActive","active","routerLink","/crafted/account/overview",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/account/settings",1,"menu-link","py-3"],[1,"bi","fs-3","bi-sticky"],["data-link","/error",1,"menu-title"],["routerLinkActive","active","routerLink","/error/404",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/error/500",1,"menu-link","py-3"],[1,"bi","fs-3","bi-layers"],["data-link","/crafted/widgets",1,"menu-title"],["routerLinkActive","active","routerLink","/crafted/widgets/lists",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/widgets/statistics",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/widgets/charts",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/widgets/mixed",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/widgets/tables",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/crafted/widgets/feeds",1,"menu-link","py-3"],["data-kt-menu-trigger","click","data-kt-menu-placement","bottom-start",1,"menu-item","menu-lg-down-accordion","me-lg-1"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],["data-link","/apps/chat",1,"menu-title"],["routerLinkActive","active","routerLink","/apps/chat/private-chat",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/apps/chat/group-chat",1,"menu-link","py-3"],["routerLinkActive","active","routerLink","/apps/chat/drawer-chat",1,"menu-link","py-3"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"a",1),u.TgZ(2,"span",2),u._uU(3,"ACCUEIL"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(4,"div",0),u.TgZ(5,"a",3),u.TgZ(6,"span",2),u._uU(7,"TWITTER"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"div",4),u.TgZ(9,"span",5),u.TgZ(10,"span",2),u._uU(11,"Console Google play"),u.qZA(),u._UZ(12,"span",6),u.qZA(),u.TgZ(13,"div",7),u.TgZ(14,"div",8),u.TgZ(15,"span",5),u.TgZ(16,"span",9),u._UZ(17,"i",10),u.qZA(),u.TgZ(18,"span",2),u._uU(19,"APP store"),u.qZA(),u._UZ(20,"span",11),u.qZA(),u.TgZ(21,"div",12),u.TgZ(22,"div",8),u.TgZ(23,"span",5),u.TgZ(24,"span",13),u._UZ(25,"span",14),u.qZA(),u.TgZ(26,"span",15),u._uU(27,"Profile"),u.qZA(),u._UZ(28,"span",11),u.qZA(),u.TgZ(29,"div",12),u.TgZ(30,"div",0),u.TgZ(31,"a",16),u.TgZ(32,"span",13),u._UZ(33,"span",14),u.qZA(),u.TgZ(34,"span",2),u._uU(35,"Overview"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"div",0),u.TgZ(37,"a",17),u.TgZ(38,"span",13),u._UZ(39,"span",14),u.qZA(),u.TgZ(40,"span",2),u._uU(41,"Projects"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(42,"div",0),u.TgZ(43,"a",18),u.TgZ(44,"span",13),u._UZ(45,"span",14),u.qZA(),u.TgZ(46,"span",2),u._uU(47,"Campaigns"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(48,"div",0),u.TgZ(49,"a",19),u.TgZ(50,"span",13),u._UZ(51,"span",14),u.qZA(),u.TgZ(52,"span",2),u._uU(53,"Documents"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(54,"div",0),u.TgZ(55,"a",20),u.TgZ(56,"span",13),u._UZ(57,"span",14),u.qZA(),u.TgZ(58,"span",2),u._uU(59,"Connections"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(60,"div",8),u.TgZ(61,"span",5),u.TgZ(62,"span",13),u._UZ(63,"span",14),u.qZA(),u.TgZ(64,"span",21),u._uU(65,"Wizards"),u.qZA(),u._UZ(66,"span",11),u.qZA(),u.TgZ(67,"div",12),u.TgZ(68,"div",0),u.TgZ(69,"a",22),u.TgZ(70,"span",13),u._UZ(71,"span",14),u.qZA(),u.TgZ(72,"span",2),u._uU(73,"Horizontal"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(74,"div",0),u.TgZ(75,"a",23),u.TgZ(76,"span",13),u._UZ(77,"span",14),u.qZA(),u.TgZ(78,"span",2),u._uU(79,"Vertical"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(80,"div",8),u.TgZ(81,"span",5),u.TgZ(82,"span",9),u._UZ(83,"i",24),u.qZA(),u.TgZ(84,"span",25),u._uU(85,"Accounts"),u.qZA(),u._UZ(86,"span",11),u.qZA(),u.TgZ(87,"div",12),u.TgZ(88,"div",0),u.TgZ(89,"a",26),u.TgZ(90,"span",13),u._UZ(91,"span",14),u.qZA(),u.TgZ(92,"span",2),u._uU(93,"Overview"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(94,"div",0),u.TgZ(95,"a",27),u.TgZ(96,"span",13),u._UZ(97,"span",14),u.qZA(),u.TgZ(98,"span",2),u._uU(99,"Settings"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(100,"div",8),u.TgZ(101,"span",5),u.TgZ(102,"span",9),u._UZ(103,"i",28),u.qZA(),u.TgZ(104,"span",29),u._uU(105,"Errors"),u.qZA(),u._UZ(106,"span",11),u.qZA(),u.TgZ(107,"div",12),u.TgZ(108,"div",0),u.TgZ(109,"a",30),u.TgZ(110,"span",13),u._UZ(111,"span",14),u.qZA(),u.TgZ(112,"span",2),u._uU(113,"Error 404"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(114,"div",0),u.TgZ(115,"a",31),u.TgZ(116,"span",13),u._UZ(117,"span",14),u.qZA(),u.TgZ(118,"span",2),u._uU(119,"Error 500"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(120,"div",8),u.TgZ(121,"span",5),u.TgZ(122,"span",9),u._UZ(123,"i",32),u.qZA(),u.TgZ(124,"span",33),u._uU(125,"Widgets"),u.qZA(),u._UZ(126,"span",11),u.qZA(),u.TgZ(127,"div",12),u.TgZ(128,"div",0),u.TgZ(129,"a",34),u.TgZ(130,"span",13),u._UZ(131,"span",14),u.qZA(),u.TgZ(132,"span",2),u._uU(133,"Lists"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(134,"div",0),u.TgZ(135,"a",35),u.TgZ(136,"span",13),u._UZ(137,"span",14),u.qZA(),u.TgZ(138,"span",2),u._uU(139,"Statistics"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(140,"div",0),u.TgZ(141,"a",36),u.TgZ(142,"span",13),u._UZ(143,"span",14),u.qZA(),u.TgZ(144,"span",2),u._uU(145,"Charts"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(146,"div",0),u.TgZ(147,"a",37),u.TgZ(148,"span",13),u._UZ(149,"span",14),u.qZA(),u.TgZ(150,"span",2),u._uU(151,"Mixed"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(152,"div",0),u.TgZ(153,"a",38),u.TgZ(154,"span",13),u._UZ(155,"span",14),u.qZA(),u.TgZ(156,"span",2),u._uU(157,"Tables"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(158,"div",0),u.TgZ(159,"a",39),u.TgZ(160,"span",13),u._UZ(161,"span",14),u.qZA(),u.TgZ(162,"span",2),u._uU(163,"Feeds"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(164,"div",40),u.TgZ(165,"span",5),u.TgZ(166,"span",2),u._uU(167,"APP STORE"),u.qZA(),u._UZ(168,"span",6),u.qZA(),u.TgZ(169,"div",12),u.TgZ(170,"div",8),u.TgZ(171,"span",5),u.TgZ(172,"span",9),u._UZ(173,"span",41),u.qZA(),u.TgZ(174,"span",42),u._uU(175,"Chat"),u.qZA(),u._UZ(176,"span",11),u.qZA(),u.TgZ(177,"div",12),u.TgZ(178,"div",0),u.TgZ(179,"a",43),u.TgZ(180,"span",13),u._UZ(181,"span",14),u.qZA(),u.TgZ(182,"span",2),u._uU(183,"Private Chat"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(184,"div",0),u.TgZ(185,"a",44),u.TgZ(186,"span",13),u._UZ(187,"span",14),u.qZA(),u.TgZ(188,"span",2),u._uU(189,"Group Chart"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(190,"div",0),u.TgZ(191,"a",45),u.TgZ(192,"span",13),u._UZ(193,"span",14),u.qZA(),u.TgZ(194,"span",2),u._uU(195,"Drawer Chart"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Q6J("ngClass",e.calculateMenuItemCssClass("/crafted")),u.xp6(6),u.Q6J("ngClass",e.calculateMenuItemCssClass("/crafted/pages")),u.xp6(8),u.Q6J("ngClass",e.calculateMenuItemCssClass("/crafted/pages/profile")),u.xp6(38),u.Q6J("ngClass",e.calculateMenuItemCssClass("/crafted/pages/wizards")),u.xp6(20),u.Q6J("ngClass",e.calculateMenuItemCssClass("/crafted/account")),u.xp6(20),u.Q6J("ngClass",e.calculateMenuItemCssClass("/error")),u.xp6(20),u.Q6J("ngClass",e.calculateMenuItemCssClass("/crafted/widgets")),u.xp6(44),u.Q6J("ngClass",e.calculateMenuItemCssClass("/apps")),u.xp6(6),u.Q6J("ngClass",e.calculateMenuItemCssClass("/apps/chat")),u.xp6(2),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen022.svg"))},directives:[i.yS,i.Od,r.mk,s.d$],styles:["[_nghost-%COMP%]{height:inherit;width:inherit}"]}),t})();const w=(t,e)=>{const n=(t=>t.split(/[?#]/)[0])(t);return!(!n||!e)&&(n===e||n.indexOf(e)>-1)};let b=(()=>{class t{constructor(){this.title=new l.X("Dashboard"),this.description=new l.X(""),this.breadcrumbs=new l.X([])}setTitle(t){this.title.next(t)}updateTitle(t){setTimeout(()=>{this.setTitle(t)},1)}setDescription(t){this.description.next(t)}updateDescription(t){setTimeout(()=>{this.setDescription(t)},1)}setBreadcrumbs(t){this.breadcrumbs.next(t)}updateBreadcrumbs(t){setTimeout(()=>{this.setBreadcrumbs(t)},20)}calculateTitle(){const t=this.calculateTitleInMenu("asideMenu"),e=this.calculateTitleInMenu("#kt_header_menu");this.setTitle(t||e||"")}calculateTitleInMenu(t){const e=document.getElementById(t);if(!e)return;const n=Array.from(e.querySelectorAll("a.menu-link")).filter(t=>t.classList.contains("active"));if(!n||0===n.length)return;const r=n[0].querySelector("span.menu-title");return r?r.innerText:void 0}calculateBreadcrumbs(){const t=this.calculateBreadcrumbsInMenu("asideMenu"),e=this.calculateBreadcrumbsInMenu("#kt_header_menu");this.setBreadcrumbs((t&&t.length>0?t:e)||[])}calculateBreadcrumbsInMenu(t){const e=[],n=document.getElementById(t);if(!n)return;const r=Array.from(n.querySelectorAll("div.menu-item")).filter(t=>t.classList.contains("here"));return r&&0!==r.length?(r.forEach(t=>{const n=t.querySelector("span.menu-title");if(!n)return;const r=n.innerText,s=n.getAttribute("data-link");s&&(e.push({title:r,path:s,isSeparator:!1,isActive:!1}),e.push({title:"",path:"",isSeparator:!0,isActive:!1}))}),e):void 0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _(t,e){if(1&t&&(u.ynx(0),u.TgZ(1,"h1",1),u._uU(2),u.qZA(),u.BQk()),2&t){const t=u.oxw().ngIf;u.xp6(2),u.hij(" ",t," ")}}function T(t,e){1&t&&(u.ynx(0),u._UZ(1,"span",5),u.BQk())}function I(t,e){if(1&t&&(u.ynx(0),u.TgZ(1,"a",7),u._uU(2),u.qZA(),u.BQk()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("routerLink",t.path),u.xp6(1),u.hij(" ",t.title," ")}}function A(t,e){1&t&&(u.ynx(0),u._UZ(1,"span",8),u.BQk())}function S(t,e){if(1&t&&(u.TgZ(0,"li",6),u.YNc(1,I,3,2,"ng-container",0),u.YNc(2,A,2,0,"ng-container",0),u.qZA()),2&t){const t=e.$implicit;u.Q6J("ngClass",!t.isSeparator&&t.isActive?"text-dark":"")("ngClass",t.isSeparator||t.isActive?"":"text-muted"),u.xp6(1),u.Q6J("ngIf",!t.isSeparator),u.xp6(1),u.Q6J("ngIf",t.isSeparator)}}function E(t,e){if(1&t&&(u.ynx(0),u.YNc(1,T,2,0,"ng-container",0),u.TgZ(2,"ul",2),u.YNc(3,S,3,4,"li",3),u.TgZ(4,"li",4),u._uU(5),u.qZA(),u.qZA(),u.BQk()),2&t){const t=u.oxw().ngIf,e=u.oxw(2).ngIf,n=u.oxw();u.xp6(1),u.Q6J("ngIf","row"===n.pageTitleDirection),u.xp6(2),u.Q6J("ngForOf",t),u.xp6(2),u.Oqu(e)}}function k(t,e){if(1&t&&(u.ynx(0),u.YNc(1,E,6,3,"ng-container",0),u.BQk()),2&t){const t=e.ngIf;u.xp6(1),u.Q6J("ngIf",t.length>0)}}function x(t,e){if(1&t&&(u.ynx(0),u.YNc(1,k,2,1,"ng-container",0),u.ALo(2,"async"),u.BQk()),2&t){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,t.bc$))}}function C(t,e){if(1&t&&(u.ynx(0),u.YNc(1,_,3,1,"ng-container",0),u.YNc(2,x,3,3,"ng-container",0),u.BQk()),2&t){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.showTitle),u.xp6(1),u.Q6J("ngIf",t.showBC)}}let N=(()=>{class t{constructor(t,e){this.pageInfo=t,this.layout=e,this.unsubscribe=[],this.showTitle=!0,this.showBC=!0,this.pageTitleCssClass="",this.pageTitleDirection="row"}ngOnInit(){this.title$=this.pageInfo.title.asObservable(),this.description$=this.pageInfo.description.asObservable(),this.bc$=this.pageInfo.breadcrumbs.asObservable(),this.showTitle=this.layout.getProp("pageTitle.display"),this.showBC=this.layout.getProp("pageTitle.breadCrumbs"),this.pageTitleCssClass=this.layout.getStringCSSClasses("pageTitle"),this.pageTitleDirection=this.layout.getProp("pageTitle.direction")}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(b),u.Y36(p))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-page-title"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"d-flex","align-items-center","text-dark","fw-bolder","my-1","fs-3"],[1,"breadcrumb","breadcrumb-separatorless","fw-bold","fs-7","my-1"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item","text-dark"],[1,"h-20px","border-gray-200","border-start","mx-4"],[1,"breadcrumb-item",3,"ngClass"],[1,"text-muted","text-hover-primary",3,"routerLink"],[1,"bullet","bg-gray-200","w-5px","h-2px"]],template:function(t,e){1&t&&(u.YNc(0,C,3,2,"ng-container",0),u.ALo(1,"async")),2&t&&u.Q6J("ngIf",u.lcZ(1,1,e.title$))},directives:[r.O5,r.sg,r.mk,i.yS],pipes:[r.Ov],encapsulation:2}),t})();const D=["ktPageTitle"];function Z(t,e){1&t&&(u.ynx(0),u.TgZ(1,"div",7),u.TgZ(2,"div",8),u._UZ(3,"span",9),u.qZA(),u.qZA(),u.BQk()),2&t&&(u.xp6(3),u.Q6J("inlineSVG","./assets/media/icons/duotune/abstract/abs015.svg"))}function O(t,e){1&t&&(u.ynx(0),u.TgZ(1,"div",10),u.TgZ(2,"div",11),u._UZ(3,"app-header-menu",12),u.qZA(),u.qZA(),u.BQk())}function L(t,e){if(1&t&&(u.ynx(0),u.TgZ(1,"div",13),u._UZ(2,"app-page-title",14,15),u.qZA(),u.BQk()),2&t){const t=u.oxw();u.xp6(2),u.Q6J("ngClass",t.pageTitleCssClasses)}}let q=(()=>{class t{constructor(t,e){this.layout=t,this.router=e,this.headerContainerCssClasses="",this.asideDisplay=!0,this.headerLeft="menu",this.pageTitleCssClasses="",this.unsubscribe=[],this.routingChanges()}ngOnInit(){this.headerContainerCssClasses=this.layout.getStringCSSClasses("headerContainer"),this.asideDisplay=this.layout.getProp("aside.display"),this.headerLeft=this.layout.getProp("header.left"),this.pageTitleCssClasses=this.layout.getStringCSSClasses("pageTitle"),this.pageTitleAttributes=this.layout.getHTMLAttributes("pageTitle")}ngAfterViewInit(){if(this.ktPageTitle)for(const t in this.pageTitleAttributes)this.pageTitleAttributes.hasOwnProperty(t)&&(this.ktPageTitle.nativeElement.attributes[t]=this.pageTitleAttributes[t])}routingChanges(){const t=this.router.events.subscribe(t=>{});this.unsubscribe.push(t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p),u.Y36(i.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-header"]],viewQuery:function(t,e){if(1&t&&u.Gf(D,7),2&t){let t;u.iGM(t=u.CRH())&&(e.ktPageTitle=t.first)}},decls:10,vars:4,consts:[[1,"d-flex","align-items-stretch","justify-content-between",3,"ngClass"],[4,"ngIf"],[1,"d-flex","align-items-center","flex-grow-1","flex-lg-grow-0"],["routerLink","/",1,"d-lg-none"],["src","./assets/logo.png",1,"h-40px"],[1,"d-flex","align-items-stretch","justify-content-between","flex-lg-grow-1"],[1,"d-flex","align-items-stretch","flex-shrink-0"],["title","Show aside menu",1,"d-flex","align-items-center","d-lg-none","ms-n3","me-1"],["id","kt_aside_mobile_toggle",1,"btn","btn-icon","btn-active-light-primary","w-30px","h-30px","w-md-40px","h-md-40px"],[1,"svg-icon","svg-icon-2x","mt-1",3,"inlineSVG"],["id","kt_header_nav",1,"d-flex","align-items-stretch"],["data-kt-drawer","true","data-kt-drawer-name","header-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","{default:'200px', '300px': '250px'}","data-kt-drawer-direction","end","data-kt-drawer-toggle","#kt_header_menu_mobile_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav'}",1,"header-menu","align-items-stretch"],["id","#kt_header_menu","data-kt-menu","true",1,"menu","menu-lg-rounded","menu-column","menu-lg-row","menu-state-bg","menu-title-gray-700","menu-state-title-primary","menu-state-icon-primary","menu-state-bullet-primary","menu-arrow-gray-400","fw-bold","my-5","my-lg-0","align-items-stretch"],["id","kt_header_nav",1,"d-flex","align-items-center"],[1,"page-title","d-flex",3,"ngClass"],["ktPageTitle",""]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.YNc(1,Z,4,1,"ng-container",1),u.TgZ(2,"div",2),u.TgZ(3,"a",3),u._UZ(4,"img",4),u.qZA(),u.qZA(),u.TgZ(5,"div",5),u.YNc(6,O,4,0,"ng-container",1),u.YNc(7,L,4,1,"ng-container",1),u.TgZ(8,"div",6),u._UZ(9,"app-topbar",6),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.Q6J("ngClass",e.headerContainerCssClasses),u.xp6(1),u.Q6J("ngIf",e.asideDisplay),u.xp6(5),u.Q6J("ngIf","menu"===e.headerLeft),u.xp6(1),u.Q6J("ngIf","page-title"===e.headerLeft))},directives:[r.mk,r.O5,i.yS,y,s.d$,v,N],styles:[""]}),t})(),R=(()=>{class t{constructor(t){this.router=t,this.unsubscribe=[]}ngOnInit(){this.routingChanges()}routingChanges(){const t=this.router.events.subscribe(t=>{});this.unsubscribe.push(t)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(i.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-content"]],decls:1,vars:0,template:function(t,e){1&t&&u._UZ(0,"router-outlet")},directives:[i.lC],styles:[""]}),t})(),U=(()=>{class t{constructor(t){this.layout=t,this.footerContainerCssClasses="",this.currentDateStr=(new Date).getFullYear().toString()}ngOnInit(){this.footerContainerCssClasses=this.layout.getStringCSSClasses("footerContainer")}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-footer"]],decls:6,vars:2,consts:[[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-between",3,"ngClass"],[1,"text-dark","order-2","order-md-1"],[1,"text-muted","fw-bold","me-2"],[1,"text-gray-800","text-hover-primary","cursor-pointer"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"span",2),u._uU(3),u.qZA(),u.TgZ(4,"a",3),u._uU(5," La taniere237 "),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.Q6J("ngClass",e.footerContainerCssClasses),u.xp6(3),u.hij("",e.currentDateStr," \xa9"))},directives:[r.mk],styles:[""]}),t})();var P=n(5435);class M{static set(t,e,n,r){r?t.style.setProperty(e,n,"important"):t.style.setProperty(e,n)}static get(t,e){return t.style.getPropertyValue(e)}static remove(t,e){t.style.removeProperty(e)}}class F{static set(t,e,n){if(!t)return;const r=F.store.get(t);if(r)r.set(e,n);else{const r=(new Map).set(e,n);F.store.set(t,r)}}static get(t,e){const n=F.store.get(t);if(n)return n.get(e)}static remove(t,e){const n=F.store.get(t);n&&n.delete(e)}static has(t,e){const n=F.store.get(t);return!!n&&n.has(e)}static getAllInstancesByKey(t){const e=[];return F.store.forEach(n=>{n.forEach((n,r)=>{r===t&&e.push(n)})}),e}}function V(t,e){const n=new Map(Object.entries(t));if(t.hasOwnProperty(e)&&n)return n.get(e)}function B(t){const e=Math.floor(Math.random()*(new Date).getTime()).toString();return t?`${t}${e}`:e}function j(t){return t.replace(/(\-\w)/g,function(t){return t[1].toUpperCase()})}F.store=new Map;class ${static on(t,e,n,r){const s=B("DOMEvent");return $.store.set(s,n=>{const s=t.querySelectorAll(e);let i=n.target;for(;i&&i!==t;){for(let t=0;t<s.length;t++)i===s[t]&&r.call(i,n);i=i.parentElement?i.parentElement:null}}),t.addEventListener(n,$.store.get(s)),s}static off(t,e,n){const r=$.store.get(n);r&&(t.removeEventListener(e,r),$.store.delete(n))}static one(t,e,n){t.addEventListener(e,function e(r){return r.target&&r.target.removeEventListener&&r.target.removeEventListener(r.type,e),t&&r&&r.currentTarget&&r.currentTarget.removeEventListener(r.type,e),n(r)})}}$.store=new Map;class z{static animate(t,e,n,r,s){s||(s=function(){});const i=e-t;r(t);const o=window.performance&&window.performance.now?window.performance.now():+new Date;window.requestAnimationFrame(function a(u){var c=(u||+new Date)-o;c>=0&&r(i*c/n+t),c>=0&&c>=n?(r(e),s&&s()):window.requestAnimationFrame(a)})}static animateClass(t,e,n){const r=e.split(" ");r.forEach(e=>t.classList.add(e)),$.one(t,"animationend",function(){r.forEach(e=>t.classList.remove(e))}),n&&$.one(t,"animationend",n)}static transitionEnd(t,e){$.one(t,"transitionend",e)}static animationEnd(t,e){$.one(t,"animationend",e)}static animationDelay(t,e){M.set(t,"animation-delay",e)}static animationDuration(t,e){M.set(t,"animation-duration",e)}static scrollTo(t,e,n=500){let r=t?K(t).top:0,s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;e&&(s+=e,r-=e),z.animate(s,r,n,function(t){document.documentElement.scrollTop=t,document.body.scrollTop=t})}static scrollTop(t,e){z.scrollTo(null,t,e)}}function G(t,e){const n=(t.ownerDocument||document).defaultView;return n?(e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getComputedStyle(t,null).getPropertyValue(e)):""}function H(t,e){const n=Element.prototype;return!(!t||!t.tagName)&&(n.matches||n.webkitMatchesSelector).call(t,e)}function K(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;return n?{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}:e}function Q(){return(document.scrollingElement||document.documentElement).scrollTop}function W(){return{width:window.innerWidth,height:window.innerHeight}}function J(t){return!(0===t.offsetWidth&&0===t.offsetHeight)}function Y(t,e,n){t||(t=window.setTimeout(function(){e(),t=void 0},n))}function X(t,e){const n=function(t,e){if(!t||!t.childNodes)return null;const n=[];for(let r=0;r<t.childNodes.length;r++){const s=t.childNodes[r];1===s.nodeType&&H(s,e)&&n.push(s)}return n}(t,e);return n?n[0]:null}function tt(t,e,n,r){if(!t||"up"===e&&!1===J(t)||"down"===e&&!0===J(t))return;n=n||600;let s=function(t){return function(t,e,n){let r="";t.getAttribute("kt-hidden-"+e);{let n;return r=t.style.cssText,t.style.cssText="position: absolute; visibility: hidden; display: block;",n=t.offsetHeight,t.style.cssText=r,void 0!==n?(t.setAttribute("kt-hidden-"+e,n.toString()),parseFloat(n.toString())):0}}(t,"height")}(t),i=0,o=0;M.get(t,"padding-top")&&!0!==F.get(t,"slide-padding-top")&&F.set(t,"slide-padding-top",M.get(t,"padding-top")),M.get(t,"padding-bottom")&&!0!==F.has(t,"slide-padding-bottom")&&F.set(t,"slide-padding-bottom",M.get(t,"padding-bottom")),F.has(t,"slide-padding-top")&&(i=parseInt(F.get(t,"slide-padding-top"))),F.has(t,"slide-padding-bottom")&&(o=parseInt(F.get(t,"slide-padding-bottom"))),"up"===e?(t.style.cssText="display: block; overflow: hidden;",i&&z.animate(0,i,n,function(e){t.style.paddingTop=i-e+"px"}),o&&z.animate(0,o,n,function(e){t.style.paddingBottom=o-e+"px"}),z.animate(0,s||0,n,function(e){t.style.height=(s||0)-e+"px"},function(){t.style.height="",t.style.display="none","function"==typeof r&&r()})):"down"===e&&(t.style.cssText="display: block; overflow: hidden;",i&&z.animate(0,i,n,function(e){t.style.paddingTop=e+"px"},function(){t.style.paddingTop=""}),o&&z.animate(0,o,n,function(e){t.style.paddingBottom=e+"px"},function(){t.style.paddingBottom=""}),z.animate(0,s||0,n,function(e){t.style.height=e+"px"},function(){t.style.height="",t.style.display="",t.style.overflow="","function"==typeof r&&r()}))}function et(t){let e=function(t){let e=getComputedStyle(document.documentElement).getPropertyValue(t);return e&&e.length>0&&(e=e.trim()),e}("--bs-"+t);return e&&(e=parseInt(e.trim())),e}function nt(t){let e=function(t){if("string"!=typeof t)return t;if(t){var e=t.toString().split("").map(t=>"'"!==t?t:'"').join("").replace(/(\w+:)|(\w+ :)/g,function(t){return'"'+t.substring(0,t.length-1)+'":'});try{return JSON.parse(e)}catch(n){return}}}(t);if("object"!=typeof e)return t;const n=W().width;let r,s,i=-1;for(let o in e)s="default"===o?0:et(o)?+et(o):parseInt(o),s<=n&&s>i&&(r=o,i=s);return r?V(e,r):e}class rt{static setEventMetasByName(t,e){rt.store.set(t,e)}static getEventMetasByName(t){return rt.store.get(t)}static setEventMetaByNameAndHandlerId(t,e,n){let r=rt.getEventMetasByName(t);r||(r=new Map),r.set(e,n),rt.setEventMetasByName(t,r)}static getEventsMetaByHandlerId(t,e){const n=rt.store.get(t);if(n)return n.get(e)}static setFiredByNameAndHandlerId(t,e,n){const r=rt.getEventsMetaByHandlerId(t,e);r&&(r.fired=n,rt.setEventMetaByNameAndHandlerId(t,e,r))}static addEvent(t,e,n,r=!1){const s=B("event");F.set(t,e,s),rt.setEventMetaByNameAndHandlerId(e,s,{name:e,callback:n,one:r,fired:!1})}static removeEvent(t,e){const n=F.get(t,e);if(!n)return;const r=rt.getEventMetasByName(e);r&&(r.delete(n),rt.setEventMetasByName(e,r))}static trigger(t,e,n){if(F.has(t,e)){const r=F.get(t,e);if(!r)return;const s=rt.getEventsMetaByHandlerId(e,r);if(s&&s.name===e){if(!0!==s.one)return s.callback.call(this,n);if(!1===s.fired)return rt.setFiredByNameAndHandlerId(e,r,!0),s.callback.call(this,n)}}return null}static one(t,e,n){rt.addEvent(t,e,n,!0)}static off(t,e){rt.removeEvent(t,e)}}rt.store=new Map,rt.on=function(t,e,n){rt.addEvent(t,e,n,!1)};const st={overlay:!0,baseClass:"drawer",overlayClass:"drawer-overlay",direction:"end"};let it=(()=>{class t{constructor(t,e){this.overlayElement=null,this.toggleElement=null,this.name="",this.shown=!1,this.lastWidth=0,this.closeElement=null,this._handlers=()=>{const t=this._getOption("toggle"),e=this._getOption("close");null!==t&&t.length>0&&$.on(document.body,t,"click",e=>{e.preventDefault(),this.toggleElement=document.getElementById(t),this._toggle()}),null!==e&&e.length>0&&$.on(document.body,e,"click",t=>{t.preventDefault(),this.closeElement=document.getElementById(e),this._hide()})},this._update=()=>{const t=String(this._getOption("width")),e=String(this._getOption("direction")),n=this.element.classList.contains(`${this.options.baseClass}-on`),r=String(document.body.getAttribute(`data-kt-drawer-${this.name}-`));this.shown=!0===n&&"on"===r,!0===this._getOption("activate")?(this.element.classList.add(this.options.baseClass),this.element.classList.add(`${this.options.baseClass}-${e}`),M.set(this.element,"width",t,!0),this.lastWidth=parseInt(t)):(M.set(this.element,"width",""),this.element.classList.remove(this.options.baseClass),this.element.classList.remove(`${this.options.baseClass}-${e}`),this._hide())},this._getOption=t=>{const e=this.element.getAttribute(`data-kt-drawer-${t}`);if(e){let t=nt(e);return null!==t&&"true"===String(t)||(null===t||"false"!==String(t))&&t}{const e=j(t),n=V(this.options,e);return n?nt(n):null}},this._toggle=()=>{!1!==rt.trigger(this.element,"kt.drawer.toggle")&&(this.shown?this._hide():this._show(),rt.trigger(this.element,"kt.drawer.toggled"))},this._hide=()=>{!1!==rt.trigger(this.element,"kt.drawer.hide")&&(this.shown=!1,this._deleteOverlay(),document.body.removeAttribute(`data-kt-drawer-${this.name}`),document.body.removeAttribute("data-kt-drawer"),this.element.classList.remove(`${this.options.baseClass}-on`),null!=this.toggleElement&&this.toggleElement.classList.remove("active"),rt.trigger(this.element,"kt.drawer.after.hidden"))},this._show=()=>{!1!==rt.trigger(this.element,"kt.drawer.show")&&(this.shown=!0,this._createOverlay(),document.body.setAttribute(`data-kt-drawer-${this.name}`,"on"),document.body.setAttribute("data-kt-drawer","on"),this.element.classList.add(`${this.options.baseClass}-on`),null!==this.toggleElement&&this.toggleElement.classList.add("active"),rt.trigger(this.element,"kt.drawer.shown"))},this._createOverlay=()=>{if(!0===this._getOption("overlay")){this.overlayElement=document.createElement("DIV");const t=G(this.element,"z-index");if(t){const e=parseInt(t)-1;M.set(this.overlayElement,"z-index",e)}document.body.append(this.overlayElement);const e=this._getOption("overlay-class");e&&this.overlayElement.classList.add(e.toString()),this.overlayElement.addEventListener("click",t=>{t.preventDefault(),this._hide()})}},this._deleteOverlay=()=>{null!==this.overlayElement&&this.overlayElement.parentNode&&this.overlayElement.parentNode.removeChild(this.overlayElement)},this._getDirection=()=>"left"===String(this._getOption("direction"))?"left":"right",this._getWidth=()=>{let t=this._getOption("width");return t&&"auto"===t&&(t=G(this.element,"width")),t},this.toggle=()=>{this._toggle()},this.show=()=>{this._show()},this.hide=()=>{this._hide()},this.isShown=()=>this.shown,this.update=()=>{this._update()},this.goElement=()=>this.element,this.on=(t,e)=>rt.on(this.element,t,e),this.one=(t,e)=>rt.one(this.element,t,e),this.off=t=>rt.off(this.element,t),this.trigger=(t,e)=>rt.trigger(this.element,t,e),this.element=t,this.options=Object.assign(st,e),this.instanceUid=B("drawer"),this.overlayElement=null,this.name=this.element.getAttribute("data-kt-drawer-name")||"",this.shown=!1,this.toggleElement=null,this._handlers(),this._update(),F.set(this.element,"drawer",this)}static createInstances(e){document.body.querySelectorAll(e).forEach(e=>{const n=e;let r=t.getInstance(n);r||(r=new t(n,st)),r.hide()})}static initGlobalHandlers(){window.addEventListener("resize",function(){Y(void 0,()=>{document.body.querySelectorAll('[data-kt-drawer="true"]').forEach(e=>{const n=t.getInstance(e);n&&n.update()})},200)})}}return t.hasInstace=t=>F.has(t,"drawer"),t.getInstance=t=>F.get(t,"drawer"),t.hideAll=()=>{F.getAllInstancesByKey("drawer").forEach(t=>{t.hide()})},t.updateAll=()=>{F.getAllInstancesByKey("drawer").forEach(t=>{t.update()})},t.handleDismiss=()=>{$.on(document.body,'[data-kt-drawer-dismiss="true"]',"click",()=>{const e=(void 0).closest('[data-kt-drawer="true"]');if(e){const n=t.getInstance(e);n&&n.isShown()&&n.hide()}})},t.bootstrap=()=>{t.createInstances('[data-kt-drawer="true"]'),t.initGlobalHandlers(),t.handleDismiss()},t.reinitialization=()=>{t.createInstances('[data-kt-drawer="true"]'),t.hideAll(),t.updateAll(),t.handleDismiss()},t})();class ot{static get(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}static set(t,e,n){const r=Object.assign({path:"/"},n);r.expires instanceof Date&&(r.expires=r.expires.toUTCString());let s=encodeURIComponent(t)+"="+encodeURIComponent(e);for(let i in r){s+="; "+i;let t=r[i];!0!==t&&(s+="="+t)}document.cookie=s}static delete(t){ot.set(t,"",{"max-age":-1})}}const at={saveState:!0};let ut=(()=>{class t{constructor(t,e){this.getOption=t=>{if(!0===this.element.hasAttribute("data-kt-scroll-"+t)){let e=nt(this.element.getAttribute("data-kt-scroll-"+t)||"");return null!==e&&"true"===String(e)?e=!0:null!==e&&"false"===String(e)&&(e=!1),e}{const e=j(t),n=V(this.options,e);return n?nt(n):null}},this.getHeightType=()=>this.getOption("height")?"height":this.getOption("min-height")?"min-height":this.getOption("max-height")?"max-height":"",this.getAutoHeight=()=>{let t=W().height;const e=this.getOption("dependencies"),n=this.getOption("wrappers"),r=this.getOption("offset");if(null!==e){const n=document.querySelectorAll(e);if(n&&n.length>0)for(let e=0,r=n.length;e<r;e++){const r=n[e];if(!1===J(r))continue;t-=parseInt(G(r,"height")),t-=parseInt(G(r,"margin-top")),t-=parseInt(G(r,"margin-bottom"));const s=G(r,"border-top");s&&(t-=parseInt(s));const i=G(r,"border-bottom");i&&(t-=parseInt(i))}}if(null!==n){var s=document.querySelectorAll(n);if(s&&s.length>0)for(let e=0,n=s.length;e<n;e++){const n=s[e];if(!J(n))continue;t-=parseInt(G(n,"margin-top")),t-=parseInt(G(n,"margin-bottom")),t-=parseInt(G(n,"padding-top")),t-=parseInt(G(n,"padding-bottom"));const r=G(n,"border-top");r&&(t-=parseInt(r));const i=G(n,"border-bottom");i&&(t-=parseInt(i))}}null!==r&&(t-=parseInt(r)),t-=parseInt(G(this.element,"margin-top")),t-=parseInt(G(this.element,"margin-bottom"));const i=G(this.element,"border-top");i&&(t-=parseInt(i));const o=G(this.element,"border-bottom");return o&&(t-=parseInt(o)),t=String(t)+"px",t},this.setupHeight=()=>{let t=this.getHeight(),e=this.getHeightType();M.set(this.element,e,null!==t&&t.length>0?t:"")},this.setupState=()=>{if(!0===this.getOption("save-state")&&this.id){const e=ot.get(this.id+"st");if(e){var t=parseInt(e);t>0&&(this.element.scrollTop=t)}}},this.setupScrollHandler=()=>{!0===this.getOption("save-state")&&this.id?this.element.addEventListener("scroll",this.scrollHandler):this.element.removeEventListener("scroll",this.scrollHandler)},this.scrollHandler=()=>{ot.set(this.id+"st",this.element.scrollTop,{})},this.destroyScrollHandler=()=>{this.element.removeEventListener("scroll",this.scrollHandler)},this.resetHeight=()=>{const t=this.getHeightType();t&&M.set(this.element,t,"")},this.update=()=>{!0!==this.getOption("activate")&&this.element.hasAttribute("data-kt-scroll-activate")?(this.resetHeight(),this.destroyScrollHandler()):(this.setupHeight(),this.setupScrollHandler(),this.setupState())},this.getHeight=()=>{const t=this.getHeightType(),e=this.getOption(t||"");return e instanceof Function?e.call(e):null!==e&&"string"==typeof e&&"auto"===e.toLowerCase()?this.getAutoHeight():e},this.getElement=()=>this.element,this.element=t,this.options=Object.assign(at,e),this.id=this.element.getAttribute("id")||"",this.update(),F.set(this.element,"scroll",this)}static hasInstace(t){return F.has(t,"scroll")}static getInstance(e){if(null!==e&&t.hasInstace(e))return F.get(e,"scroll")}static createInstances(e){document.body.querySelectorAll(e).forEach(e=>{const n=e;let r=t.getInstance(n);r||(r=new t(n,at))})}static destroyAll(t='[data-kt-scroll="true"]'){}static bootstrap(e='[data-kt-scroll="true"]'){t.createInstances(e),t.resize()}static reinitialization(e='[data-kt-scroll="true"]'){t.createInstances(e)}static resize(){window.addEventListener("resize",function(){Y(void 0,()=>{document.body.querySelectorAll('[data-kt-scroll="true"]').forEach(e=>{const n=t.getInstance(e);n&&n.update()})},200)})}}return t.createInstance=(e,n=at)=>{let r=t.getInstance(e);return r||(r=new t(e,n)),r},t})();const ct={offset:200,speed:600};let lt=(()=>{class t{constructor(t,e){this._handlers=()=>{window.addEventListener("scroll",()=>{Y(void 0,()=>{this._scroll()})}),this.element.addEventListener("click",t=>{t.preventDefault(),this._go()})},this._scroll=()=>{const t=parseInt(this._getOption("offset"));Q()>t?document.body.hasAttribute("data-kt-scrolltop")||document.body.setAttribute("data-kt-scrolltop","on"):document.body.hasAttribute("data-kt-scrolltop")&&document.body.removeAttribute("data-kt-scrolltop")},this._go=()=>{const t=parseInt(this._getOption("speed"));z.scrollTop(0,t)},this._getOption=t=>{const e=this.element.getAttribute(`data-kt-scrolltop-${t}`);if(e){const t=nt(e);return null!==t&&"true"===String(t)}const n=j(t),r=V(this.options,n);return r?nt(r):null},this.go=()=>this._go(),this.getElement=()=>this.element,this.element=t,this.options=Object.assign(ct,e),this.instanceUid=B("scrolltop"),this._handlers(),F.set(this.element,"scrolltop",this)}}return t.getInstance=t=>F.get(t,"scrolltop")||null,t.createInstances=e=>{document.body.querySelectorAll(e).forEach(e=>{const n=e;let r=t.getInstance(n);r||(r=new t(n,ct))})},t.createInsance=(e,n=ct)=>{const r=document.body.querySelector(e);if(!r)return;const s=r;let i=t.getInstance(s);return i||(i=new t(s,n)),i},t.bootstrap=()=>{t.createInstances('[data-kt-scrolltop="true"]')},t.reinitialization=()=>{t.createInstances('[data-kt-scrolltop="true"]')},t.goTop=()=>{z.scrollTop(0,ct.speed)},t})();const ht={offset:200,reverse:!1,animation:!0,animationSpeed:"0.3s",animationClass:"animation-slide-in-down"};let dt=(()=>{class t{constructor(t,e){this.instanceName="",this.scroll=()=>{let t=this.getOption("offset"),e=this.getOption("reverse");if(!1===t)return;let n=0;"string"==typeof t&&(n=parseInt(t));const r=Q();if(!0===e)return r>n&&this.lastScrollTop<r?(!1===document.body.hasAttribute(this.attributeName)&&(this.enable(),document.body.setAttribute(this.attributeName,"on")),!0===this.eventTriggerState&&(rt.trigger(this.element,"kt.sticky.on"),rt.trigger(this.element,"kt.sticky.change"),this.eventTriggerState=!1)):(document.body.hasAttribute(this.attributeName)&&(this.disable(),document.body.removeAttribute(this.attributeName)),!1===this.eventTriggerState&&(rt.trigger(this.element,"kt.sticky.off"),rt.trigger(this.element,"kt.sticky.change"),this.eventTriggerState=!0)),void(this.lastScrollTop=r);r>n?(!1===document.body.hasAttribute(this.attributeName)&&(this.enable(),document.body.setAttribute(this.attributeName,"on")),!0===this.eventTriggerState&&(rt.trigger(this.element,"kt.sticky.on"),rt.trigger(this.element,"kt.sticky.change"),this.eventTriggerState=!1)):(!0===document.body.hasAttribute(this.attributeName)&&(this.disable(),document.body.removeAttribute(this.attributeName)),!1===this.eventTriggerState&&(rt.trigger(this.element,"kt.sticky.off"),rt.trigger(this.element,"kt.sticky.change"),this.eventTriggerState=!0))},this.getOption=t=>{const e="data-kt-sticky-"+t;if(!0===this.element.hasAttribute(e)){const t=nt(this.element.getAttribute(e)||"");return null!==t&&"true"===String(t)||(null===t||"false"!==String(t))&&t}{const e=j(t),n=V(this.options,e);if(n)return nt(n)}},this.disable=()=>{M.remove(this.element,"top"),M.remove(this.element,"width"),M.remove(this.element,"left"),M.remove(this.element,"right"),M.remove(this.element,"z-index"),M.remove(this.element,"position")},this.enable=(t=!1)=>{const e=this.getOption("top"),n=this.getOption("left");let r=this.getOption("width");const s=this.getOption("zindex");if(!0!==t&&!0===this.getOption("animation")&&(M.set(this.element,"animationDuration",this.getOption("animationSpeed")),z.animateClass(this.element,"animation "+this.getOption("animationClass"))),null!==s&&(M.set(this.element,"z-index",s),M.set(this.element,"position","fixed")),null!==e&&M.set(this.element,"top",e),null!=r){const t=V(r,"target");if(t){const e=document.querySelector(t);e&&(r=G(e,"width"))}M.set(this.element,"width",r)}if(null!==n&&"auto"===String(n).toLowerCase()){var i=K(this.element).left;i>0&&M.set(this.element,"left",String(i)+"px")}},this.update=()=>{!0===document.body.hasAttribute(this.attributeName)&&(this.disable(),document.body.removeAttribute(this.attributeName),this.enable(!0),document.body.setAttribute(this.attributeName,"on"))},this.on=(t,e)=>rt.on(this.element,t,e),this.one=(t,e)=>rt.one(this.element,t,e),this.off=t=>rt.off(this.element,t),this.trigger=t=>rt.trigger(this.element,t),this.element=t,this.options=Object.assign(ht,e),this.instanceUid=B("sticky"),this.instanceName=this.element.getAttribute("data-kt-sticky-name"),this.attributeName="data-kt-sticky-"+this.instanceName,this.eventTriggerState=!0,this.lastScrollTop=0,window.addEventListener("scroll",this.scroll),this.scroll(),F.set(this.element,"sticky",this)}static hasInstace(t){return F.has(t,"sticky")}static getInstance(e){if(null!==e&&t.hasInstace(e))return F.get(e,"sticky")}static createInstances(e){document.body.querySelectorAll(e).forEach(e=>{const n=e;let r=t.getInstance(n);r||(r=new t(n,ht))})}static bootstrap(e='[data-kt-sticky="true"]'){t.createInstances(e)}static reInitialization(e='[data-kt-sticky="true"]'){t.createInstances(e)}}return t.createInsance=(e,n=ht)=>{const r=document.body.querySelector(e);if(!r)return;const s=r;let i=t.getInstance(s);return i||(i=new t(s,n)),i},t})();const ft={saveState:!1};let pt=(()=>{class t{constructor(t,e){this.state="",this.target=null,this.attribute="",this._handlers=()=>{this.element.addEventListener("click",t=>{t.preventDefault(),this._toggle()})},this._toggle=()=>(rt.trigger(this.element,"kt.toggle.change"),this._isEnabled()?this._disable():this._enable(),rt.trigger(this.element,"kt.toggle.changed"),this),this._enable=()=>{var t;if(!this._isEnabled())return rt.trigger(this.element,"kt.toggle.enable"),null===(t=this.target)||void 0===t||t.setAttribute(this.attribute,"on"),this.state.length>0&&this.element.classList.add(this.state),this.options.saveState&&ot.set(this.attribute,"on",{}),rt.trigger(this.element,"kt.toggle.enabled"),this},this._disable=()=>{var t;return!!this._isEnabled()&&(rt.trigger(this.element,"kt.toggle.disable"),null===(t=this.target)||void 0===t||t.removeAttribute(this.attribute),this.state.length>0&&this.element.classList.remove(this.state),this.options.saveState&&ot.delete(this.attribute),rt.trigger(this.element,"kt.toggle.disabled"),this)},this._isEnabled=()=>!!this.target&&"on"===String(this.target.getAttribute(this.attribute)).toLowerCase(),this.toggle=()=>this._toggle(),this.enable=()=>this._enable(),this.disable=()=>this._disable(),this.isEnabled=()=>this._isEnabled(),this.goElement=()=>this.element,this.on=(t,e)=>rt.on(this.element,t,e),this.one=(t,e)=>rt.one(this.element,t,e),this.off=t=>rt.off(this.element,t),this.trigger=(t,e)=>rt.trigger(this.element,t,e),this.options=Object.assign(ft,e),this.instanceUid=B("toggle"),this.element=t;const n=this.element.getAttribute("data-kt-toggle-target");n&&(this.target=document.querySelector(n));const r=this.element.getAttribute("data-kt-toggle-state");this.state=r||"",this.attribute="data-kt-"+this.element.getAttribute("data-kt-toggle-name"),this._handlers(),F.set(this.element,"toggle",this)}}return t.getInstance=t=>F.get(t,"toggle")||null,t.createInstances=e=>{document.body.querySelectorAll(e).forEach(e=>{const n=e;let r=t.getInstance(n);r||(r=new t(n,ft))})},t.createInsance=(e,n=ft)=>{const r=document.body.querySelector(e);if(!r)return;const s=r;let i=t.getInstance(s);return i||(i=new t(s,n)),i},t.reinitialization=()=>{t.createInstances("[data-kt-toggle]")},t.bootstrap=()=>{t.createInstances("[data-kt-toggle]")},t})();const gt={mode:"append"},mt={componentName:"place",instanseQuery:'[data-kt-place="true"]',attrQuery:"data-kt-place-"};let yt=(()=>{class t{constructor(t,e,n){this.update=()=>{var t;const e=null===(t=this.getOption("parent"))||void 0===t?void 0:t.toString(),n=this.getOption("mode"),r=e?document.querySelector(e):null;r&&this.element.parentNode!==r&&("prepend"===n?r.prepend(this.element):"append"===n&&r.append(this.element))},this.on=(t,e)=>rt.on(this.element,t,e),this.one=(t,e)=>rt.one(this.element,t,e),this.off=t=>rt.off(this.element,t),this.trigger=(t,e)=>rt.trigger(this.element,t,e),this.element=t,this.options=Object.assign(gt,e),this.queries=n,this.update(),F.set(this.element,this.queries.componentName,this)}getOption(t){const e=this.element.getAttribute(`${this.queries.attrQuery}${t}`);if(e){let t=nt(e);return null!=e&&"true"===String(t)||(null===t||"false"!==String(t))&&t}{const e=j(t),n=V(this.options,e);return n?nt(n):null}}}return t.getInstance=(t,e=mt.componentName)=>F.get(t,e)||null,t.createInstances=(e=mt.instanseQuery,n=gt,r=mt)=>{document.body.querySelectorAll(e).forEach(e=>{const s=e;let i=t.getInstance(s);i||(i=new t(s,n,r))})},t.createInsance=(e=mt.instanseQuery,n=gt,r=mt)=>{const s=document.body.querySelector(e);if(!s)return;const i=s;let o=t.getInstance(i);return o||(o=new t(i,n,r)),o},t.bootstrap=(e=mt.instanseQuery)=>{t.createInstances(e)},t.reinitialization=(e=mt.instanseQuery)=>{t.createInstances(e)},t})();function vt(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function wt(t){return t instanceof vt(t).Element||t instanceof Element}function bt(t){return t instanceof vt(t).HTMLElement||t instanceof HTMLElement}function _t(t){return"undefined"!=typeof ShadowRoot&&(t instanceof vt(t).ShadowRoot||t instanceof ShadowRoot)}window.addEventListener("resize",function(){Y(void 0,()=>{document.querySelectorAll(mt.instanseQuery).forEach(t=>{const e=yt.getInstance(t);e&&e.update()})},200)});var Tt=Math.round;function It(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),r=1,s=1;if(bt(t)&&e){var i=t.offsetHeight,o=t.offsetWidth;o>0&&(r=n.width/o||1),i>0&&(s=n.height/i||1)}return{width:Tt(n.width/r),height:Tt(n.height/s),top:Tt(n.top/s),right:Tt(n.right/r),bottom:Tt(n.bottom/s),left:Tt(n.left/r),x:Tt(n.left/r),y:Tt(n.top/s)}}function At(t){var e=vt(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function St(t){return t?(t.nodeName||"").toLowerCase():null}function Et(t){return((wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function kt(t){return It(Et(t)).left+At(t).scrollLeft}function xt(t){return vt(t).getComputedStyle(t)}function Ct(t){var e=xt(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function Nt(t,e,n){void 0===n&&(n=!1);var r,s,i=bt(e),o=bt(e)&&function(t){var e=t.getBoundingClientRect();return 1!==(e.width/t.offsetWidth||1)||1!==(e.height/t.offsetHeight||1)}(e),a=Et(e),u=It(t,o),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==St(e)||Ct(a))&&(c=(r=e)!==vt(r)&&bt(r)?{scrollLeft:(s=r).scrollLeft,scrollTop:s.scrollTop}:At(r)),bt(e)?((l=It(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=kt(a))),{x:u.left+c.scrollLeft-l.x,y:u.top+c.scrollTop-l.y,width:u.width,height:u.height}}function Dt(t){var e=It(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Zt(t){return"html"===St(t)?t:t.assignedSlot||t.parentNode||(_t(t)?t.host:null)||Et(t)}function Ot(t){return["html","body","#document"].indexOf(St(t))>=0?t.ownerDocument.body:bt(t)&&Ct(t)?t:Ot(Zt(t))}function Lt(t,e){var n;void 0===e&&(e=[]);var r=Ot(t),s=r===(null==(n=t.ownerDocument)?void 0:n.body),i=vt(r),o=s?[i].concat(i.visualViewport||[],Ct(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Lt(Zt(o)))}function qt(t){return["table","td","th"].indexOf(St(t))>=0}function Rt(t){return bt(t)&&"fixed"!==xt(t).position?t.offsetParent:null}function Ut(t){for(var e=vt(t),n=Rt(t);n&&qt(n)&&"static"===xt(n).position;)n=Rt(n);return n&&("html"===St(n)||"body"===St(n)&&"static"===xt(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&bt(t)&&"fixed"===xt(t).position)return null;for(var n=Zt(t);bt(n)&&["html","body"].indexOf(St(n))<0;){var r=xt(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var Pt="top",Mt="bottom",Ft="right",Vt="left",Bt="auto",jt=[Pt,Mt,Ft,Vt],$t="start",zt="end",Gt="viewport",Ht="popper",Kt=jt.reduce(function(t,e){return t.concat([e+"-"+$t,e+"-"+zt])},[]),Qt=[].concat(jt,[Bt]).reduce(function(t,e){return t.concat([e,e+"-"+$t,e+"-"+zt])},[]),Wt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Jt(t){var e=new Map,n=new Set,r=[];function s(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!n.has(t)){var r=e.get(t);r&&s(r)}}),r.push(t)}return t.forEach(function(t){e.set(t.name,t)}),t.forEach(function(t){n.has(t.name)||s(t)}),r}var Yt={placement:"bottom",modifiers:[],strategy:"absolute"};function Xt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function te(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,r=t.defaultOptions,s=void 0===r?Yt:r;return function(t,e,r){void 0===r&&(r=s);var i,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yt,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},u=[],c=!1,l={state:a,setOptions:function(r){var i="function"==typeof r?r(a.options):r;h(),a.options=Object.assign({},s,a.options,i),a.scrollParents={reference:wt(t)?Lt(t):t.contextElement?Lt(t.contextElement):[],popper:Lt(e)};var o,c,d=function(t){var e=Jt(t);return Wt.reduce(function(t,n){return t.concat(e.filter(function(t){return t.phase===n}))},[])}((o=[].concat(n,a.options.modifiers),c=o.reduce(function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t},{}),Object.keys(c).map(function(t){return c[t]})));return a.orderedModifiers=d.filter(function(t){return t.enabled}),a.orderedModifiers.forEach(function(t){var e=t.options,n=t.effect;if("function"==typeof n){var r=n({state:a,name:t.name,instance:l,options:void 0===e?{}:e});u.push(r||function(){})}}),l.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,n=t.popper;if(Xt(e,n)){a.rects={reference:Nt(e,Ut(n),"fixed"===a.options.strategy),popper:Dt(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(t){return a.modifiersData[t.name]=Object.assign({},t.data)});for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var s=a.orderedModifiers[r],i=s.fn,o=s.options;"function"==typeof i&&(a=i({state:a,options:void 0===o?{}:o,name:s.name,instance:l})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise(function(t){l.forceUpdate(),t(a)})},function(){return o||(o=new Promise(function(t){Promise.resolve().then(function(){o=void 0,t(i())})})),o}),destroy:function(){h(),c=!0}};if(!Xt(t,e))return l;function h(){u.forEach(function(t){return t()}),u=[]}return l.setOptions(r).then(function(t){!c&&r.onFirstUpdate&&r.onFirstUpdate(t)}),l}}var ee={passive:!0};function ne(t){return t.split("-")[0]}function re(t){return t.split("-")[1]}function se(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ie(t){var e,n=t.reference,r=t.element,s=t.placement,i=s?ne(s):null,o=s?re(s):null,a=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(i){case Pt:e={x:a,y:n.y-r.height};break;case Mt:e={x:a,y:n.y+n.height};break;case Ft:e={x:n.x+n.width,y:u};break;case Vt:e={x:n.x-r.width,y:u};break;default:e={x:n.x,y:n.y}}var c=i?se(i):null;if(null!=c){var l="y"===c?"height":"width";switch(o){case $t:e[c]=e[c]-(n[l]/2-r[l]/2);break;case zt:e[c]=e[c]+(n[l]/2-r[l]/2)}}return e}var oe=Math.max,ae=Math.min,ue=Math.round,ce={top:"auto",right:"auto",bottom:"auto",left:"auto"};function le(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,u=t.gpuAcceleration,c=t.adaptive,l=t.roundOffsets,h=!0===l?function(t){var e=t.y,n=window.devicePixelRatio||1;return{x:ue(ue(t.x*n)/n)||0,y:ue(ue(e*n)/n)||0}}(o):"function"==typeof l?l(o):o,d=h.x,f=void 0===d?0:d,p=h.y,g=void 0===p?0:p,m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),v=Vt,w=Pt,b=window;if(c){var _=Ut(n),T="clientHeight",I="clientWidth";_===vt(n)&&"static"!==xt(_=Et(n)).position&&"absolute"===a&&(T="scrollHeight",I="scrollWidth"),_=_,s!==Pt&&(s!==Vt&&s!==Ft||i!==zt)||(w=Mt,g-=_[T]-r.height,g*=u?1:-1),s!==Vt&&(s!==Pt&&s!==Mt||i!==zt)||(v=Ft,f-=_[I]-r.width,f*=u?1:-1)}var A,S=Object.assign({position:a},c&&ce);return Object.assign({},S,u?((A={})[w]=y?"0":"",A[v]=m?"0":"",A.transform=(b.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",A):((e={})[w]=y?g+"px":"",e[v]=m?f+"px":"",e.transform="",e))}var he={left:"right",right:"left",bottom:"top",top:"bottom"};function de(t){return t.replace(/left|right|bottom|top/g,function(t){return he[t]})}var fe={start:"end",end:"start"};function pe(t){return t.replace(/start|end/g,function(t){return fe[t]})}function ge(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&_t(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function me(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ye(t,e){return e===Gt?me(function(t){var e=vt(t),n=Et(t),r=e.visualViewport,s=n.clientWidth,i=n.clientHeight,o=0,a=0;return r&&(s=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:i,x:o+kt(t),y:a}}(t)):bt(e)?function(t){var e=It(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):me(function(t){var e,n=Et(t),r=At(t),s=null==(e=t.ownerDocument)?void 0:e.body,i=oe(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=oe(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+kt(t),u=-r.scrollTop;return"rtl"===xt(s||n).direction&&(a+=oe(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:u}}(Et(t)))}function ve(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function we(t,e){return e.reduce(function(e,n){return e[n]=t,e},{})}function be(t,e){void 0===e&&(e={});var n=e.placement,r=void 0===n?t.placement:n,s=e.boundary,i=void 0===s?"clippingParents":s,o=e.rootBoundary,a=void 0===o?Gt:o,u=e.elementContext,c=void 0===u?Ht:u,l=e.altBoundary,h=void 0!==l&&l,d=e.padding,f=void 0===d?0:d,p=ve("number"!=typeof f?f:we(f,jt)),g=t.rects.popper,m=t.elements[h?c===Ht?"reference":Ht:c],y=function(t,e,n){var r="clippingParents"===e?function(t){var e=Lt(Zt(t)),n=["absolute","fixed"].indexOf(xt(t).position)>=0&&bt(t)?Ut(t):t;return wt(n)?e.filter(function(t){return wt(t)&&ge(t,n)&&"body"!==St(t)}):[]}(t):[].concat(e),s=[].concat(r,[n]),i=s.reduce(function(e,n){var r=ye(t,n);return e.top=oe(r.top,e.top),e.right=ae(r.right,e.right),e.bottom=ae(r.bottom,e.bottom),e.left=oe(r.left,e.left),e},ye(t,s[0]));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}(wt(m)?m:m.contextElement||Et(t.elements.popper),i,a),v=It(t.elements.reference),w=ie({reference:v,element:g,strategy:"absolute",placement:r}),b=me(Object.assign({},g,w)),_=c===Ht?b:v,T={top:y.top-_.top+p.top,bottom:_.bottom-y.bottom+p.bottom,left:y.left-_.left+p.left,right:_.right-y.right+p.right},I=t.modifiersData.offset;if(c===Ht&&I){var A=I[r];Object.keys(T).forEach(function(t){var e=[Ft,Mt].indexOf(t)>=0?1:-1,n=[Pt,Mt].indexOf(t)>=0?"y":"x";T[t]+=A[n]*e})}return T}function _e(t,e,n){return oe(t,ae(e,n))}function Te(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ie(t){return[Pt,Ft,Mt,Vt].some(function(e){return t[e]>=0})}var Ae=te({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=void 0===s||s,o=r.resize,a=void 0===o||o,u=vt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(t){t.addEventListener("scroll",n.update,ee)}),a&&u.addEventListener("resize",n.update,ee),function(){i&&c.forEach(function(t){t.removeEventListener("scroll",n.update,ee)}),a&&u.removeEventListener("resize",n.update,ee)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state;e.modifiersData[t.name]=ie({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=void 0===r||r,i=n.adaptive,o=void 0===i||i,a=n.roundOffsets,u=void 0===a||a,c={placement:ne(e.placement),variation:re(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,le(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,le(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];bt(s)&&St(s)&&(Object.assign(s.style,n),Object.keys(r).forEach(function(t){var e=r[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)}))})},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(t){var r=e.elements[t],s=e.attributes[t]||{},i=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce(function(t,e){return t[e]="",t},{});bt(r)&&St(r)&&(Object.assign(r.style,i),Object.keys(s).forEach(function(t){r.removeAttribute(t)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.name,r=t.options.offset,s=void 0===r?[0,0]:r,i=Qt.reduce(function(t,n){return t[n]=function(t,e,n){var r=ne(t),s=[Vt,Pt].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[Vt,Ft].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,s),t},{}),o=i[e.placement],a=o.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=o.x,e.modifiersData.popperOffsets.y+=a),e.modifiersData[n]=i}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=void 0===s||s,o=n.altAxis,a=void 0===o||o,u=n.fallbackPlacements,c=n.padding,l=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,y=ne(m),v=u||(y!==m&&p?function(t){if(ne(t)===Bt)return[];var e=de(t);return[pe(t),e,pe(e)]}(m):[de(m)]),w=[m].concat(v).reduce(function(t,n){return t.concat(ne(n)===Bt?function(t,e){void 0===e&&(e={});var n=e.boundary,r=e.rootBoundary,s=e.padding,i=e.flipVariations,o=e.allowedAutoPlacements,a=void 0===o?Qt:o,u=re(e.placement),c=u?i?Kt:Kt.filter(function(t){return re(t)===u}):jt,l=c.filter(function(t){return a.indexOf(t)>=0});0===l.length&&(l=c);var h=l.reduce(function(e,i){return e[i]=be(t,{placement:i,boundary:n,rootBoundary:r,padding:s})[ne(i)],e},{});return Object.keys(h).sort(function(t,e){return h[t]-h[e]})}(e,{placement:n,boundary:l,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:g}):n)},[]),b=e.rects.reference,_=e.rects.popper,T=new Map,I=!0,A=w[0],S=0;S<w.length;S++){var E=w[S],k=ne(E),x=re(E)===$t,C=[Pt,Mt].indexOf(k)>=0,N=C?"width":"height",D=be(e,{placement:E,boundary:l,rootBoundary:h,altBoundary:d,padding:c}),Z=C?x?Ft:Vt:x?Mt:Pt;b[N]>_[N]&&(Z=de(Z));var O=de(Z),L=[];if(i&&L.push(D[k]<=0),a&&L.push(D[Z]<=0,D[O]<=0),L.every(function(t){return t})){A=E,I=!1;break}T.set(E,L)}if(I)for(var q=function(t){var e=w.find(function(e){var n=T.get(e);if(n)return n.slice(0,t).every(function(t){return t})});if(e)return A=e,"break"},R=p?3:1;R>0&&"break"!==q(R);R--);e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=void 0===s||s,o=n.altAxis,a=void 0!==o&&o,u=n.tether,c=void 0===u||u,l=n.tetherOffset,h=void 0===l?0:l,d=be(e,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),f=ne(e.placement),p=re(e.placement),g=!p,m=se(f),y="x"===m?"y":"x",v=e.modifiersData.popperOffsets,w=e.rects.reference,b=e.rects.popper,_="function"==typeof h?h(Object.assign({},e.rects,{placement:e.placement})):h,T={x:0,y:0};if(v){if(i||a){var I="y"===m?Pt:Vt,A="y"===m?Mt:Ft,S="y"===m?"height":"width",E=v[m],k=v[m]+d[I],x=v[m]-d[A],C=c?-b[S]/2:0,N=p===$t?w[S]:b[S],D=p===$t?-b[S]:-w[S],Z=e.elements.arrow,O=c&&Z?Dt(Z):{width:0,height:0},L=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=L[I],R=L[A],U=_e(0,w[S],O[S]),P=g?w[S]/2-C-U-q-_:N-U-q-_,M=g?-w[S]/2+C+U+R+_:D+U+R+_,F=e.elements.arrow&&Ut(e.elements.arrow),V=e.modifiersData.offset?e.modifiersData.offset[e.placement][m]:0,B=v[m]+P-V-(F?"y"===m?F.clientTop||0:F.clientLeft||0:0),j=v[m]+M-V;if(i){var $=_e(c?ae(k,B):k,E,c?oe(x,j):x);v[m]=$,T[m]=$-E}if(a){var z=v[y],G=z+d["x"===m?Pt:Vt],H=z-d["x"===m?Mt:Ft],K=_e(c?ae(G,B):G,z,c?oe(H,j):H);v[y]=K,T[y]=K-z}}e.modifiersData[r]=T}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ne(n.placement),u=se(a),c=[Vt,Ft].indexOf(a)>=0?"height":"width";if(i&&o){var l=function(t,e){return ve("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:we(t,jt))}(s.padding,n),h=Dt(i),d="y"===u?Pt:Vt,f="y"===u?Mt:Ft,p=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],g=o[u]-n.rects.reference[u],m=Ut(i),y=m?"y"===u?m.clientHeight||0:m.clientWidth||0:0,v=y/2-h[c]/2+(p/2-g/2),w=_e(l[d],v,y-h[c]-l[f]);n.modifiersData[r]=((e={})[u]=w,e.centerOffset=w-v,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&ge(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=be(e,{elementContext:"reference"}),a=be(e,{altBoundary:!0}),u=Te(o,r),c=Te(a,s,i),l=Ie(u),h=Ie(c);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}}]});const Se={dropdown:{hoverTimeout:200,zindex:105},accordion:{slideSpeed:250,expand:!1}};let Ee=(()=>{class t{constructor(e,n){return this.triggerElement=null,this._setTriggerElement=()=>{const t=document.querySelector(`[data-kt-menu-target="#${this.element.getAttribute("id")}"`);if(t)this.triggerElement=t;else if(this.element.closest("[data-kt-menu-trigger]"))this.triggerElement=this.element.closest("[data-kt-menu-trigger]");else if(this.element.parentNode&&X(this.element.parentNode,"[data-kt-menu-trigger]")){const t=X(this.element.parentNode,"[data-kt-menu-trigger]");t&&(this.triggerElement=t)}this.triggerElement&&F.set(this.triggerElement,"menu",this)},this._isTriggerElement=t=>this.triggerElement===t,this._getItemOption=(t,e)=>{let n=null;return t&&t.hasAttribute("data-kt-menu-"+e)&&(n=nt(t.getAttribute("data-kt-menu-"+e)||""),null!==n&&"true"===String(n)?n=!0:null!==n&&"false"===String(n)&&(n=!1)),n},this._getItemElement=t=>{if(this._isTriggerElement(t))return t;if(t.hasAttribute("data-kt-menu-trigger"))return t;const e=F.get(t,"item");if(e)return e;const n=t.closest(".menu-item[data-kt-menu-trigger]");if(n)return n;const r=t.closest(".menu-sub");if(r){const t=F.get(r,"item");if(t)return t}},this._getItemParentElement=t=>{const e=t.closest(".menu-sub");if(!e)return null;const n=F.get(e,"item");if(n)return n;const r=e.closest(".menu-item[data-kt-menu-trigger]");return e&&r?r:null},this._getItemParentElements=t=>{const e=[];let n,r=0,s=t;do{n=this._getItemParentElement(s),n&&(e.push(n),s=n),r++}while(null!==n&&r<20);return this.triggerElement&&e.unshift(this.triggerElement),e},this._getDropdownPopperConfig=t=>{const e=this._getItemOption(t,"placement");let n="right";e&&(n=e);const r=this._getItemOption(t,"flip"),s=(r&&r.toString().split(","),this._getItemOption(t,"offset")),i=s?s.toString().split(","):[];return{placement:n,strategy:!0===this._getItemOption(t,"overflow")?"absolute":"fixed",modifiers:[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{altAxis:!1!==this._getItemOption(t,"flip")}},{name:"flip",options:{flipVariations:!1}}]}},this._getItemChildElement=t=>{let e=t;const n=F.get(t,"sub");if(n&&(e=n),e){const t=e.querySelector(".menu-item[data-kt-menu-trigger]");if(t)return t}return null},this._getItemChildElements=t=>{const e=[];let n,r=0,s=t;do{n=this._getItemChildElement(s),n&&(e.push(n),s=n),r++}while(null!==n&&r<20);return e},this._getItemSubElement=t=>t?this._isTriggerElement(t)?this.element:t.classList.contains("menu-sub")?t:F.has(t,"sub")?F.get(t,"sub"):X(t,".menu-sub"):null,this._getCss=(t,e)=>{const n=(t.ownerDocument||document).defaultView;return n?(e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getComputedStyle(t,null).getPropertyValue(e)):""},this._getItemSubType=t=>{const e=this._getItemSubElement(t);return e&&parseInt(this._getCss(e,"z-index"))>0?"dropdown":"accordion"},this._isItemSubShown=t=>{let e=this._getItemSubElement(t);return!!e&&("dropdown"===this._getItemSubType(t)?e.classList.contains("show")&&e.hasAttribute("data-popper-placement"):t.classList.contains("show"))},this._isItemDropdownPermanent=t=>!0===this._getItemOption(t,"permanent"),this._isItemParentShown=t=>function(t,e){Element.prototype.matches||(Element.prototype.matches=function(t){const e=(document||this.ownerDocument).querySelectorAll(t);let n=e.length;for(;--n>=0&&e.item(n)!==this;);return n>-1});const n=[];let r=t;for(;r&&r!==document.body;r=r.parentElement)r.matches(".menu-item.show")&&n.push(r);return n}(t).length>0,this._isItemSubElement=t=>t.classList.contains("menu-sub"),this._hasItemSub=t=>t.classList.contains("menu-item")&&t.hasAttribute("data-kt-menu-trigger"),this._getItemLinkElement=t=>X(t,".menu-link"),this._getItemToggleElement=t=>this.triggerElement?this.triggerElement:this._getItemLinkElement(t),this._showDropdown=e=>{if(!1===rt.trigger(this.element,"kt.menu.dropdown.show"))return;t.hideDropdowns(e);const n=this._getItemSubElement(e),r=this._getItemOption(e,"width"),s=this._getItemOption(e,"height");let i=this.options.dropdown.zindex;const o=function(t){let e=t,n=t;for(;e&&e!==document;){const t=n.style.getPropertyValue("position");if("absolute"===t||"relative"===t||"fixed"===t){const t=parseInt(n.style.getPropertyValue("z-index"));if(!isNaN(t)&&0!==t)return t}e=e.parentNode,n=e}return null}(e);null!==o&&o>=i&&(i=o+1),i&&M.set(n,"z-index",i),r&&M.set(n,"width",r),s&&M.set(n,"height",s),this.initDropdownPopper(e,n),e.classList.add("show"),e.classList.add("menu-dropdown"),n.classList.add("show"),!0===this._getItemOption(e,"overflow")?(document.body.appendChild(n),F.set(e,"sub",n),F.set(n,"item",e),F.set(n,"menu",this)):F.set(n,"item",e),rt.trigger(this.element,"kt.menu.dropdown.shown")},this.initDropdownPopper=(t,e)=>{let n;const r=this._getItemOption(t,"attach");if(n=r?"parent"===r?t.parentNode:document.querySelector(r):t,n){const r=Ae(n,e,this._getDropdownPopperConfig(t));F.set(t,"popper",r)}},this._hideDropdown=t=>{if(!1===rt.trigger(this.element,"kt.menu.dropdown.hide"))return;const e=this._getItemSubElement(t);var n,r;M.set(e,"z-index",""),M.set(e,"width",""),M.set(e,"height",""),t.classList.remove("show"),t.classList.remove("menu-dropdown"),e.classList.remove("show"),!0===this._getItemOption(t,"overflow")&&(t.classList.contains("menu-item")?t.appendChild(e):null===(r=(n=t).parentNode)||void 0===r||r.insertBefore(this.element,n.nextSibling),F.remove(t,"sub"),F.remove(e,"item"),F.remove(e,"menu")),!0===F.has(t,"popper")&&(F.get(t,"popper").destroy(),F.remove(t,"popper")),this.destroyDropdownPopper(t),rt.trigger(this.element,"kt.menu.dropdown.hidden")},this.destroyDropdownPopper=t=>{!0===F.has(t,"popper")&&(F.get(t,"popper").destroy(),F.remove(t,"popper")),rt.trigger(this.element,"kt.menu.dropdown.hidden")},this._showAccordion=t=>{if(!1===rt.trigger(this.element,"kt.menu.accordion.show"))return;!1===this.options.accordion.expand&&this._hideAccordions(t),!0===F.has(t,"popper")&&this._hideDropdown(t),t.classList.add("hover"),t.classList.add("showing");const e=this._getItemSubElement(t);if(e){const n=e;tt(n,"down",this.options.accordion.slideSpeed,()=>{t.classList.remove("showing"),t.classList.add("show"),n.classList.add("show"),rt.trigger(this.element,"kt.menu.accordion.shown")})}},this._hideAccordion=t=>{if(!1===rt.trigger(this.element,"kt.menu.accordion.hide"))return;const e=this._getItemSubElement(t);t.classList.add("hiding"),e&&tt(e,"up",this.options.accordion.slideSpeed,()=>{t.classList.remove("hiding"),t.classList.remove("show"),e.classList.remove("show"),t.classList.remove("hover"),rt.trigger(this.element,"kt.menu.accordion.hidden")})},this._hideAccordions=t=>{const e=this.element.querySelectorAll(".show[data-kt-menu-trigger]");if(e&&e.length>0)for(var n=0,r=e.length;n<r;n++){const r=e[n];"accordion"===this._getItemSubType(r)&&r!==t&&!1===t.contains(r)&&!1===r.contains(t)&&this._hideAccordion(r)}},this._reset=t=>{if(!1===this._hasItemSub(t))return;const e=this._getItemSubElement(t);F.has(t,"type")&&F.get(t,"type")!==this._getItemSubType(t)&&(t.classList.remove("hover"),t.classList.remove("show"),t.classList.remove("show"),e&&e.removeClass&&e.removeClass(e,"show"))},this._destroy=()=>{},this._update=()=>{this.element.querySelectorAll(".menu-item[data-kt-menu-trigger]").forEach(t=>this._reset(t))},this._hide=t=>{t&&!1!==this._isItemSubShown(t)&&("dropdown"===this._getItemSubType(t)?this._hideDropdown(t):"accordion"===this._getItemSubType(t)&&this._hideAccordion(t))},this._show=t=>{t&&!0!==this._isItemSubShown(t)&&("dropdown"===this._getItemSubType(t)?this._showDropdown(t):"accordion"===this._getItemSubType(t)&&this._showAccordion(t),F.set(t,"type",this._getItemSubType(t)))},this._toggle=t=>{t&&(!0===this._isItemSubShown(t)?this._hide(t):this._show(t))},this._mouseout=(t,e)=>{const n=this._getItemElement(t);if(!n)return;if("hover"!==this._getItemOption(n,"trigger"))return;const r=setTimeout(()=>{"1"===F.get(n,"hover")&&this._hide(n)},this.options.dropdown.hoverTimeout);F.set(n,"hover","1"),F.set(n,"timeout",r)},this._mouseover=(t,e)=>{const n=this._getItemElement(t);n&&"hover"===this._getItemOption(n,"trigger")&&("1"===F.get(n,"hover")&&(clearTimeout(F.get(n,"timeout")),F.remove(n,"hover"),F.remove(n,"timeout")),this._show(n))},this._dismiss=(t,e)=>{const n=this._getItemElement(t),r=this._getItemChildElements(n),s=this._getItemSubType(n);if(null!==n&&"dropdown"===s&&(this._hide(n),r.length>0))for(let i=0,o=r.length;i<o;i++)null!==r[i]&&"dropdown"===this._getItemSubType(r[i])&&this._hide(r[i])},this._link=(e,n)=>{!1!==rt.trigger(this.element,"kt.menu.link.click")&&(t.hideDropdowns(void 0),rt.trigger(this.element,"kt.menu.link.clicked"))},this._click=(t,e)=>{e.preventDefault();const n=this._getItemElement(t);"click"===this._getItemOption(n,"trigger")&&(!1===this._getItemOption(n,"toggle")?this._show(n):this._toggle(n))},this.click=(t,e)=>this._click(t,e),this.link=(t,e)=>this._link(t,e),this.dismiss=(t,e)=>this._dismiss(t,e),this.mouseover=(t,e)=>this._mouseover(t,e),this.mouseout=(t,e)=>this._mouseout(t,e),this.getItemTriggerType=t=>this._getItemOption(t,"trigger"),this.getItemSubType=t=>this._getItemSubType(t),this.show=t=>this._show(t),this.hide=t=>this._hide(t),this.reset=t=>this._reset(t),this.update=()=>this._update(),this.getElement=()=>this.element,this.getItemLinkElement=t=>this._getItemLinkElement(t),this.getItemToggleElement=t=>this._getItemToggleElement(t),this.getItemSubElement=t=>this._getItemSubElement(t),this.getItemParentElements=t=>this._getItemParentElements(t),this.isItemSubShown=t=>this._isItemSubShown(t),this.isItemParentShown=t=>this._isItemParentShown(t),this.getTriggerElement=()=>this.triggerElement,this.isItemDropdownPermanent=t=>this._isItemDropdownPermanent(t),this.hideAccordions=t=>this._hideAccordions(t),this.on=(t,e)=>rt.on(this.element,t,e),this.one=(t,e)=>rt.one(this.element,t,e),this.off=t=>rt.off(this.element,t),this.element=e,this.options=Object.assign(Se,n),this.instanceUid=B("menu"),this._setTriggerElement(),this._update(),F.set(this.element,"menu",this),this}}return t.getInstance=t=>{const e=F.get(t,"menu");if(e)return e;const n=t.closest(".menu");if(n){const t=F.get(n,"menu");if(t)return t}if(t.classList.contains("menu-link")){const e=t.closest(".menu-sub");if(e){const t=F.get(e,"menu");if(t)return t}}return null},t.hideDropdowns=e=>{const n=document.querySelectorAll(".show.menu-dropdown[data-kt-menu-trigger]");if(n&&n.length>0)for(let r=0,s=n.length;r<s;r++){const s=n[r],i=t.getInstance(s);i&&"dropdown"===i.getItemSubType(s)&&(e?!1===i.getItemSubElement(s).contains(e)&&!1===s.contains(e)&&s!==e&&i.hide(s):i.hide(s))}},t.updateDropdowns=()=>{const t=document.querySelectorAll(".show.menu-dropdown[data-kt-menu-trigger]");if(t&&t.length>0)for(var e=0,n=t.length;e<n;e++){var r=t[e];F.has(r,"popper")&&F.get(r,"popper").forceUpdate()}},t.createInstances=e=>{document.querySelectorAll(e).forEach(e=>{let n=t.getInstance(e);n||(n=new t(e,Se))})},t.initGlobalHandlers=()=>{document.addEventListener("click",e=>{const n=document.querySelectorAll(".show.menu-dropdown[data-kt-menu-trigger]");if(n&&n.length>0)for(let r=0;r<n.length;r++){const s=n[r],i=t.getInstance(s);if(i&&"dropdown"===i.getItemSubType(s)){i.getElement();const t=i.getItemSubElement(s);if(s===e.target||s.contains(e.target))continue;if(t&&(t===e.target||t.contains(e.target)))continue;i.hide(s)}}}),$.on(document.body,'.menu-item[data-kt-menu-trigger] > .menu-link, [data-kt-menu-trigger]:not(.menu-item):not([data-kt-menu-trigger="auto"])',"click",function(e){const n=t.getInstance(this);if(n)return n.click(this,e)}),$.on(document.body,".menu-item:not([data-kt-menu-trigger]) > .menu-link","click",function(e){e.stopPropagation();const n=t.getInstance(this);if(n&&n.link)return n.link(this,e)}),$.on(document.body,'[data-kt-menu-dismiss="true"]',"click",function(e){const n=t.getInstance(this);if(n)return n.dismiss(this,e)}),$.on(document.body,"[data-kt-menu-trigger], .menu-sub","mouseover",function(e){const n=t.getInstance(this);if(n&&"dropdown"===n.getItemSubType(this))return n.mouseover(this,e)}),$.on(document.body,"[data-kt-menu-trigger], .menu-sub","mouseout",function(e){const n=t.getInstance(this);if(n&&"dropdown"===n.getItemSubType(this))return n.mouseout(this,e)}),window.addEventListener("resize",()=>{Y(void 0,()=>{document.querySelectorAll('[data-kt-menu="true"]').forEach(e=>{const n=t.getInstance(e);n&&n.update()})},200)})},t.bootstrap=()=>{t.initGlobalHandlers(),t.createInstances('[data-kt-menu="true"]')},t.reinitialization=()=>{t.createInstances('[data-kt-menu="true"]')},t.createInsance=(e,n=Se)=>{const r=document.body.querySelector(e);if(!r)return;const s=r;let i=t.getInstance(s);return i||(i=new t(s,n)),i},t})(),ke=(()=>{class t{constructor(t,e,n){this.layout=t,this.pageInfo=e,this.router=n,this.unsubscribe=[];const r=()=>{setTimeout(()=>{this.pageInfo.calculateTitle(),this.pageInfo.calculateBreadcrumbs()},10)};r(),this.router.events.pipe((0,P.h)(t=>t instanceof i.Av)).subscribe(r)}ngOnInit(){this.layoutConfig$=this.layout.layoutConfigSubject.asObservable();const t=this.layoutConfig$.subscribe(()=>{this.pluginsInitialization()});this.unsubscribe.push(t)}pluginsInitialization(){setTimeout(()=>{pt.bootstrap(),lt.bootstrap(),it.bootstrap(),dt.bootstrap(),Ee.bootstrap(),ut.bootstrap()},200)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p),u.Y36(b),u.Y36(i.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-scripts-init"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var xe=n(7556),Ce=n(9082);function Ne(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"h4",27),u._uU(2,"Confirmation de suppression"),u.qZA(),u.TgZ(3,"button",28),u.NdJ("click",function(){return u.CHM(t).$implicit.dismiss("cancel")}),u.TgZ(4,"span",29),u._uU(5,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",30),u.TgZ(7,"p"),u._uU(8,"Voulez-vous vraiment vous deconnecter ?"),u.qZA(),u.qZA(),u.TgZ(9,"div",31),u.TgZ(10,"button",32),u.NdJ("click",function(){return u.CHM(t).$implicit.close("confirm")}),u._uU(11,"Oui"),u.qZA(),u.TgZ(12,"button",33),u.NdJ("click",function(){return u.CHM(t).$implicit.dismiss("cancel")}),u._uU(13,"Annuler"),u.qZA(),u.qZA()}}const De=function(){return{exact:!0}};let Ze=(()=>{class t{constructor(t,e,n,r){this.auth=t,this.router=e,this.share=n,this.modalService=r}ngOnInit(){}logout(){this.auth.logout().then(()=>{this.router.navigate(["/auth/login"])}).catch(t=>{console.log("Erreur lors de la d\xe9connexion :",t)})}openConfirmationModal(t){this.modalService.open(t,{centered:!0}).result.then(t=>{"confirm"===t&&(console.log("fermet"),this.logout())},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(xe.e),u.Y36(i.F0),u.Y36(Ce.F),u.Y36(o.FF))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-aside-menu"]],decls:97,vars:18,consts:[[1,"menu-item"],["routerLink","/","routerLinkActive","active",1,"menu-link","without-sub",3,"routerLinkActiveOptions"],[1,"menu-icon"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"menu-title"],["routerLink","/articles/add","routerLinkActive","active",1,"menu-link","without-sub",3,"routerLinkActiveOptions"],[1,"menu-content","pt-8","pb-2"],[1,"menu-section","text-muted","text-uppercase","fs-8","ls-1"],["data-kt-menu-trigger","click","routerLinkActive","here show",1,"menu-item","menu-accordion"],[1,"menu-link"],["data-link","/articles",1,"menu-title"],[1,"menu-arrow"],["routerLinkActive","menu-active-bg",1,"menu-sub","menu-sub-accordion"],["routerLink","/articles","routerLinkActive","active",1,"menu-link","without-sub",3,"routerLinkActiveOptions"],[1,"menu-bullet"],[1,"bullet","bullet-dot"],["routerLink","/articles/add-article","routerLinkActive","active",1,"menu-link","without-sub",3,"routerLinkActiveOptions"],["data-link","/podcast",1,"menu-title"],["routerLink","/podcast","routerLinkActive","active",1,"menu-link","without-sub",3,"routerLinkActiveOptions"],["routerLink","/podcast/add-podcast","routerLinkActive","active",1,"menu-link","without-sub",3,"routerLinkActiveOptions"],["data-link","/apps/chat",1,"menu-title"],[1,"menu-link","without-sub"],[1,"menu-link","without-sub",3,"click"],[1,"menu-content"],[1,"separator","mx-1","my-4"],["confirmationModal",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"a",1),u.TgZ(2,"span",2),u._UZ(3,"span",3),u.qZA(),u.TgZ(4,"span",4),u._uU(5,"Tableau de bord"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",0),u.TgZ(7,"a",5),u.TgZ(8,"span",2),u._UZ(9,"span",3),u.qZA(),u.TgZ(10,"span",4),u._uU(11,"Mon profil"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",0),u.TgZ(13,"div",6),u.TgZ(14,"span",7),u._uU(15,"ADMINISTRATION"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",8),u.TgZ(17,"span",9),u.TgZ(18,"span",2),u._UZ(19,"span",3),u.qZA(),u.TgZ(20,"span",10),u._uU(21,"Articles"),u.qZA(),u._UZ(22,"span",11),u.qZA(),u.TgZ(23,"div",12),u.TgZ(24,"div",0),u.TgZ(25,"a",13),u.TgZ(26,"span",14),u._UZ(27,"span",15),u.qZA(),u.TgZ(28,"span",4),u._uU(29,"Gerer les articles"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"div",0),u.TgZ(31,"a",16),u.TgZ(32,"span",14),u._UZ(33,"span",15),u.qZA(),u.TgZ(34,"span",4),u._uU(35,"Ajouter un article"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"div",8),u.TgZ(37,"span",9),u.TgZ(38,"span",2),u._UZ(39,"span",3),u.qZA(),u.TgZ(40,"span",17),u._uU(41,"PodCast"),u.qZA(),u._UZ(42,"span",11),u.qZA(),u.TgZ(43,"div",12),u.TgZ(44,"div",0),u.TgZ(45,"a",18),u.TgZ(46,"span",14),u._UZ(47,"span",15),u.qZA(),u.TgZ(48,"span",4),u._uU(49,"Gerer les podcasts"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(50,"div",0),u.TgZ(51,"a",19),u.TgZ(52,"span",14),u._UZ(53,"span",15),u.qZA(),u.TgZ(54,"span",4),u._uU(55,"Ajouter un podcast"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(56,"div",0),u.TgZ(57,"div",6),u.TgZ(58,"span",7),u._uU(59,"Apps"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(60,"div",8),u.TgZ(61,"span",9),u.TgZ(62,"span",2),u._UZ(63,"span",3),u.qZA(),u.TgZ(64,"span",20),u._uU(65,"Autres actions"),u.qZA(),u._UZ(66,"span",11),u.qZA(),u.TgZ(67,"div",12),u.TgZ(68,"div",0),u.TgZ(69,"a",21),u.TgZ(70,"span",14),u._UZ(71,"span",15),u.qZA(),u.TgZ(72,"span",4),u._uU(73,"Envoyer un mail"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(74,"div",0),u.TgZ(75,"a",21),u.TgZ(76,"span",14),u._UZ(77,"span",15),u.qZA(),u.TgZ(78,"span",4),u._uU(79,"Envoyer un push"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(80,"div",0),u.TgZ(81,"a",21),u.TgZ(82,"span",14),u._UZ(83,"span",15),u.qZA(),u.TgZ(84,"span",4),u._uU(85,"Statistiques"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(86,"div",0),u.TgZ(87,"a",22),u.NdJ("click",function(){u.CHM(t);const n=u.MAs(96);return e.openConfirmationModal(n)}),u.TgZ(88,"span",2),u._UZ(89,"span",3),u.qZA(),u.TgZ(90,"span",4),u._uU(91,"Deconnexion"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(92,"div",0),u.TgZ(93,"div",23),u._UZ(94,"div",24),u.qZA(),u.qZA(),u.YNc(95,Ne,14,0,"ng-template",null,25,u.W1O)}2&t&&(u.xp6(1),u.Q6J("routerLinkActiveOptions",u.DdM(12,De)),u.xp6(2),u.Q6J("inlineSVG","./assets/media/icons/duotune/art/art002.svg"),u.xp6(4),u.Q6J("routerLinkActiveOptions",u.DdM(13,De)),u.xp6(2),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen019.svg"),u.xp6(10),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen022.svg"),u.xp6(6),u.Q6J("routerLinkActiveOptions",u.DdM(14,De)),u.xp6(6),u.Q6J("routerLinkActiveOptions",u.DdM(15,De)),u.xp6(8),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen022.svg"),u.xp6(6),u.Q6J("routerLinkActiveOptions",u.DdM(16,De)),u.xp6(6),u.Q6J("routerLinkActiveOptions",u.DdM(17,De)),u.xp6(12),u.Q6J("inlineSVG","./assets/media/icons/duotune/communication/com012.svg"),u.xp6(26),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen019.svg"))},directives:[i.yS,i.Od,s.d$],styles:[""]}),t})();const Oe=["ktAsideScroll"];function Le(t,e){1&t&&(u.ynx(0),u.TgZ(1,"a",11),u._UZ(2,"img",12),u.qZA(),u.BQk())}function qe(t,e){1&t&&(u.ynx(0),u.TgZ(1,"a",11),u._UZ(2,"img",13),u.qZA(),u.BQk())}function Re(t,e){1&t&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"span",15),u.qZA(),u.BQk()),2&t&&(u.xp6(2),u.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr079.svg"))}let Ue=(()=>{class t{constructor(t,e){this.layout=t,this.router=e,this.asideTheme="",this.asideMinimize=!1,this.asideMenuCSSClasses="",this.appPreviewDocsUrl=c.N.appPreviewDocsUrl,this.unsubscribe=[]}ngOnInit(){this.asideTheme=this.layout.getProp("aside.theme"),this.asideMinimize=this.layout.getProp("aside.minimize"),this.asideMenuCSSClasses=this.layout.getStringCSSClasses("asideMenu"),this.routingChanges()}routingChanges(){const t=this.router.events.subscribe(t=>{(t instanceof i.m2||t instanceof i.gk)&&this.menuReinitialization()});this.unsubscribe.push(t)}menuReinitialization(){setTimeout(()=>{Ee.reinitialization(),it.reinitialization(),pt.reinitialization(),ut.reinitialization(),this.ktAsideScroll&&this.ktAsideScroll.nativeElement&&(this.ktAsideScroll.nativeElement.scrollTop=0)},50)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p),u.Y36(i.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-aside"]],viewQuery:function(t,e){if(1&t&&u.Gf(Oe,7),2&t){let t;u.iGM(t=u.CRH())&&(e.ktAsideScroll=t.first)}},decls:14,vars:5,consts:[["id","kt_aside_logo",1,"aside-logo","flex-column-auto"],[4,"ngIf"],[1,"aside-menu","flex-column-fluid"],["id","kt_aside_menu_wrapper","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-height","auto","data-kt-scroll-dependencies","#kt_aside_logo, #kt_aside_footer","data-kt-scroll-wrappers","#kt_aside_menu","data-kt-scroll-offset","0",1,"hover-scroll-overlay-y","my-5","my-lg-5"],["ktAsideScroll",""],["id","#kt_aside_menu","data-kt-menu","true",1,"menu","menu-column","menu-title-gray-800","menu-state-title-primary","menu-state-icon-primary","menu-state-bullet-primary","menu-arrow-gray-500"],["id","asideMenu"],["id","kt_aside_footer",1,"aside-footer","flex-column-auto","pt-5","pb-7","px-5",2,"display","none"],["target","_blank","data-bs-toggle","tooltip","data-bs-trigger","hover","data-bs-dismiss-","click","ngbDropdown","Check out the complete documentation with over 100 components",1,"btn","btn-custom","btn-primary","w-100",3,"href"],[1,"btn-label"],[1,"svg-icon","btn-icon","svg-icon-2",3,"inlineSVG"],["routerLink","/dashboard"],["alt","Logo","src","./assets/media/logos/logo-1-dark.svg",1,"h-25px","logo"],["alt","Logo","src","./assets/logo.png",1,"h-70px","logo"],["id","kt_aside_toggle","data-kt-toggle","true","data-kt-toggle-state","active","data-kt-toggle-target","body","data-kt-toggle-name","aside-minimize",1,"btn","btn-icon","w-auto","px-0","btn-active-color-primary","aside-toggle"],[1,"svg-icon","svg-icon-1","rotate-180",3,"inlineSVG"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.YNc(1,Le,3,0,"ng-container",1),u.YNc(2,qe,3,0,"ng-container",1),u.YNc(3,Re,3,1,"ng-container",1),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"div",3,4),u.TgZ(7,"div",5),u._UZ(8,"app-aside-menu",6),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",7),u.TgZ(10,"a",8),u.TgZ(11,"span",9),u._uU(12,"Docs & Components"),u.qZA(),u._UZ(13,"span",10),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf","dark"===e.asideTheme),u.xp6(1),u.Q6J("ngIf","light"===e.asideTheme),u.xp6(1),u.Q6J("ngIf",e.asideMinimize),u.xp6(7),u.Q6J("href",e.appPreviewDocsUrl,u.LSH),u.xp6(3),u.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen005.svg"))},directives:[r.O5,Ze,o.jt,s.d$,i.yS],styles:[""]}),t})();const Pe=["ktPageTitle"];let Me=(()=>{class t{constructor(t){this.layout=t,this.toolbarContainerCssClasses="",this.pageTitleCssClasses=""}ngOnInit(){this.toolbarContainerCssClasses=this.layout.getStringCSSClasses("toolbarContainer"),this.pageTitleCssClasses=this.layout.getStringCSSClasses("pageTitle"),this.pageTitleAttributes=this.layout.getHTMLAttributes("pageTitle")}ngAfterViewInit(){if(this.ktPageTitle)for(const t in this.pageTitleAttributes)this.pageTitleAttributes.hasOwnProperty(t)&&this.ktPageTitle.nativeElement&&(this.ktPageTitle.nativeElement.attributes[t]=this.pageTitleAttributes[t])}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-toolbar"]],viewQuery:function(t,e){if(1&t&&u.Gf(Pe,7),2&t){let t;u.iGM(t=u.CRH())&&(e.ktPageTitle=t.first)}},decls:5,vars:2,consts:[["id","kt_toolbar_container",1,"d-flex","flex-stack",3,"ngClass"],[1,"page-title","d-flex",3,"ngClass"],["ktPageTitle",""],[1,"d-flex","align-items-center","py-1"],[1,"me-4"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"app-page-title",1,2),u.TgZ(3,"div",3),u._UZ(4,"div",4),u.qZA(),u.qZA()),2&t&&(u.Q6J("ngClass",e.toolbarContainerCssClasses),u.xp6(1),u.Q6J("ngClass",e.pageTitleCssClasses))},directives:[r.mk,N],styles:[""]}),t})();const Fe=["ktAside"],Ve=["ktHeaderMobile"],Be=["ktHeader"];function je(t,e){if(1&t&&u._UZ(0,"app-aside",11),2&t){const t=u.oxw();u.Q6J("ngClass",t.asideCSSClasses)}}function $e(t,e){1&t&&(u.ynx(0),u._UZ(1,"app-toolbar",12),u.BQk())}let ze=(()=>{class t{constructor(t,e){this.initService=t,this.layout=e,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.initService.init()}ngOnInit(){this.asideDisplay=this.layout.getProp("aside.display"),this.toolbarDisplay=this.layout.getProp("toolbar.display"),this.contentContainerClasses=this.layout.getStringCSSClasses("contentContainer"),this.asideCSSClasses=this.layout.getStringCSSClasses("aside"),this.headerCSSClasses=this.layout.getStringCSSClasses("header"),this.headerHTMLAttributes=this.layout.getHTMLAttributes("headerMenu")}ngAfterViewInit(){if(this.ktHeader)for(const t in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(t)&&(this.ktHeader.nativeElement.attributes[t]=this.headerHTMLAttributes[t])}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(g),u.Y36(p))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-layout"]],viewQuery:function(t,e){if(1&t&&(u.Gf(Fe,7),u.Gf(Ve,7),u.Gf(Be,7)),2&t){let t;u.iGM(t=u.CRH())&&(e.ktAside=t.first),u.iGM(t=u.CRH())&&(e.ktHeaderMobile=t.first),u.iGM(t=u.CRH())&&(e.ktHeader=t.first)}},decls:12,vars:4,consts:[[1,"d-flex","flex-column","flex-root"],[1,"page","d-flex","flex-row","flex-column-fluid"],["id","kt_aside","data-kt-drawer","true","data-kt-drawer-name","aside","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","{default:'200px', '300px': '250px'}","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_aside_mobile_toggle","class","aside",3,"ngClass",4,"ngIf"],["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_header",1,"header","align-items-stretch",3,"ngClass"],["ktHeader",""],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[4,"ngIf"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",3,"ngClass"],["id","kt_footer",1,"footer","py-4","d-flex","flex-lg-column"],["id","kt_aside","data-kt-drawer","true","data-kt-drawer-name","aside","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","{default:'200px', '300px': '250px'}","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_aside_mobile_toggle",1,"aside",3,"ngClass"],["id","kt_toolbar",1,"toolbar"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.YNc(2,je,1,1,"app-aside",2),u.TgZ(3,"div",3),u._UZ(4,"app-header",4,5),u.TgZ(6,"div",6),u.YNc(7,$e,2,0,"ng-container",7),u.TgZ(8,"div",8),u._UZ(9,"app-content",9),u.qZA(),u.qZA(),u._UZ(10,"app-footer",10),u.qZA(),u.qZA(),u.qZA(),u._UZ(11,"app-scripts-init")),2&t&&(u.xp6(2),u.Q6J("ngIf",e.asideDisplay),u.xp6(2),u.Q6J("ngClass",e.headerCSSClasses),u.xp6(3),u.Q6J("ngIf",e.toolbarDisplay),u.xp6(2),u.Q6J("ngClass",e.contentContainerClasses))},directives:[r.O5,q,r.mk,R,U,ke,Ue,Me],styles:["[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}"]}),t})();var Ge=n(6782),He=n(8002),Ke=n(5093);let Qe=(()=>{class t{constructor(t,e){this.firestore=t,this.share=e}getNombreUtilisateurs(){return this.firestore.collection("users").valueChanges().pipe((0,Ge.R)(this.share.ngUnsubscribe$),(0,He.U)(t=>t.length))}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(Ke.ST),u.LFG(Ce.F))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var We=n(597),Je=n(1577);let Ye=(()=>{class t{constructor(t,e,n){this.userService=t,this.podcastService=e,this.articleService=n,this.revenupublicitaire=25}ngOnInit(){this.userService.getNombreUtilisateurs().subscribe(t=>{this.nombreutilisateur=t}),this.nombrearticle=this.articleService.getNombreArticles(),this.nombrepodcast=this.podcastService.getNombrePodcasts()}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(Qe),u.Y36(We.c),u.Y36(Je.J))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-home"]],decls:93,vars:7,consts:[[1,"row","g-5","g-xl-10","mb-xl-10"],[1,"col-md-6","col-lg-6","col-xl-6","col-xxl-3","mb-md-5","mb-xl-10"],[1,"card","card-flush","h-md-50","mb-5","mb-xl-10"],[1,"card-header","pt-5"],[1,"card-title","d-flex","flex-column"],[1,"d-flex","align-items-center"],[1,"fs-4","fw-bold","text-gray-400","me-1","align-self-start"],[1,"fs-2hx","fw-bolder","text-dark","me-2","lh-1"],[1,"badge","badge-success","fs-6","lh-1","py-1","px-2","d-flex","flex-center",2,"height","22px"],[1,"svg-icon","svg-icon-7","svg-icon-white","ms-n1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","d","M13 9.59998V21C13 21.6 12.6 22 12 22C11.4 22 11 21.6 11 21V9.59998H13Z","fill","black"],["d","M5.7071 7.89291C5.07714 8.52288 5.52331 9.60002 6.41421 9.60002H17.5858C18.4767 9.60002 18.9229 8.52288 18.2929 7.89291L12.7 2.3C12.3 1.9 11.7 1.9 11.3 2.3L5.7071 7.89291Z","fill","black"],[1,"text-gray-400","pt-1","fw-bold","fs-6"],[1,"card","card-flush","h-md-50","mb-xl-10"],[1,"badge","badge-danger","fs-6","lh-1","py-1","px-2","d-flex","flex-center",2,"height","22px"],["opacity","0.5","d","M13 14.4V3.00003C13 2.40003 12.6 2.00003 12 2.00003C11.4 2.00003 11 2.40003 11 3.00003V14.4H13Z","fill","black"],["d","M5.7071 16.1071C5.07714 15.4771 5.52331 14.4 6.41421 14.4H17.5858C18.4767 14.4 18.9229 15.4771 18.2929 16.1071L12.7 21.7C12.3 22.1 11.7 22.1 11.3 21.7L5.7071 16.1071Z","fill","black"],[1,"card-body","d-flex","align-items-end","px-0","pb-0"],["id","kt_card_widget_6_chart",1,"w-100",2,"height","80px"],[1,"card-body","d-flex","flex-column","justify-content-end"],[1,"fs-6","fw-boldest","text-gray-800","d-block","mb-2"],[1,"symbol-group","symbol-hover"],["data-bs-toggle","tooltip","title","Alan Warden",1,"symbol","symbol-35px","symbol-circle"],[1,"symbol-label","bg-warning","text-inverse-warning","fw-bolder"],["data-bs-toggle","tooltip","title","Michael Eberon",1,"symbol","symbol-35px","symbol-circle"],["alt","Pic","src","assets/media/avatars/300-11.jpg"],["data-bs-toggle","tooltip","title","Susan Redwood",1,"symbol","symbol-35px","symbol-circle"],[1,"symbol-label","bg-primary","text-inverse-primary","fw-bolder"],["data-bs-toggle","tooltip","title","Melody Macy",1,"symbol","symbol-35px","symbol-circle"],["alt","Pic","src","assets/media/avatars/300-2.jpg"],["data-bs-toggle","tooltip","title","Perry Matthew",1,"symbol","symbol-35px","symbol-circle"],[1,"symbol-label","bg-danger","text-inverse-danger","fw-bolder"],["data-bs-toggle","tooltip","title","Barry Walter",1,"symbol","symbol-35px","symbol-circle"],["alt","Pic","src","assets/media/avatars/300-12.jpg"],["href","#","data-bs-toggle","modal","data-bs-target","#kt_modal_view_users",1,"symbol","symbol-35px","symbol-circle"],[1,"symbol-label","bg-gray-900","text-gray-300","fs-8","fw-bolder"],[1,"col-lg-12","col-xl-12","col-xxl-6","mb-5","mb-xl-0"],[1,"card","card-flush","overflow-hidden","h-md-100"],[1,"card-header","py-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","text-dark"],[1,"text-gray-400","mt-1","fw-bold","fs-6"],[1,"card-toolbar"],["href","../../demo1/dist/apps/ecommerce/catalog/products.html",1,"btn","btn-sm","btn-light-primary","fw-bolder"],[1,"card-body","d-flex","justify-content-between","flex-column","pb-1","px-0"],["id","kt_charts_widget_3",1,"min-h-auto","ps-4","pe-6",2,"height","300px"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"div",5),u._UZ(6,"span",6),u.TgZ(7,"span",7),u._uU(8),u.qZA(),u.TgZ(9,"span",8),u.TgZ(10,"span",9),u.O4$(),u.TgZ(11,"svg",10),u._UZ(12,"path",11),u._UZ(13,"path",12),u.qZA(),u.qZA(),u._uU(14,"2.2%"),u.qZA(),u.qZA(),u.kcU(),u.TgZ(15,"span",13),u._uU(16,"Nombre d'utilisateurs"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",14),u.TgZ(18,"div",3),u.TgZ(19,"div",4),u.TgZ(20,"div",5),u.TgZ(21,"span",7),u._uU(22),u.ALo(23,"async"),u.qZA(),u.TgZ(24,"span",15),u.TgZ(25,"span",9),u.O4$(),u.TgZ(26,"svg",10),u._UZ(27,"path",16),u._UZ(28,"path",17),u.qZA(),u.qZA(),u._uU(29,"2.2%"),u.qZA(),u.qZA(),u.kcU(),u.TgZ(30,"span",13),u._uU(31,"Nombre d 'articles"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"div",1),u.TgZ(33,"div",2),u.TgZ(34,"div",3),u.TgZ(35,"div",4),u.TgZ(36,"div",5),u._UZ(37,"span",6),u.TgZ(38,"span",7),u._uU(39),u.ALo(40,"async"),u.qZA(),u.TgZ(41,"span",8),u.TgZ(42,"span",9),u.O4$(),u.TgZ(43,"svg",10),u._UZ(44,"path",11),u._UZ(45,"path",12),u.qZA(),u.qZA(),u._uU(46,"2.6%"),u.qZA(),u.qZA(),u.kcU(),u.TgZ(47,"span",13),u._uU(48,"Nombre de podcasts"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(49,"div",18),u._UZ(50,"div",19),u.qZA(),u.qZA(),u.TgZ(51,"div",14),u.TgZ(52,"div",3),u.TgZ(53,"div",4),u.TgZ(54,"span",7),u._uU(55,"2k"),u.qZA(),u.TgZ(56,"span",13),u._uU(57,"Nouveaux utilsateurs de ce mois"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(58,"div",20),u.TgZ(59,"span",21),u._uU(60,"Nouveau habitant de la tani\xe8re"),u.qZA(),u.TgZ(61,"div",22),u.TgZ(62,"div",23),u.TgZ(63,"span",24),u._uU(64,"A"),u.qZA(),u.qZA(),u.TgZ(65,"div",25),u._UZ(66,"img",26),u.qZA(),u.TgZ(67,"div",27),u.TgZ(68,"span",28),u._uU(69,"S"),u.qZA(),u.qZA(),u.TgZ(70,"div",29),u._UZ(71,"img",30),u.qZA(),u.TgZ(72,"div",31),u.TgZ(73,"span",32),u._uU(74,"P"),u.qZA(),u.qZA(),u.TgZ(75,"div",33),u._UZ(76,"img",34),u.qZA(),u.TgZ(77,"a",35),u.TgZ(78,"span",36),u._uU(79,"+42"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(80,"div",37),u.TgZ(81,"div",38),u.TgZ(82,"div",39),u.TgZ(83,"h3",40),u.TgZ(84,"span",41),u._uU(85,"Statistiques utilisateurs"),u.qZA(),u.TgZ(86,"span",42),u._uU(87,"Utilisateurs par mois"),u.qZA(),u.qZA(),u.TgZ(88,"div",43),u.TgZ(89,"a",44),u._uU(90,"Voirs les statistique sur playstore"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(91,"div",45),u._UZ(92,"div",46),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(8),u.Oqu(e.nombreutilisateur),u.xp6(14),u.Oqu(u.lcZ(23,3,e.nombrearticle)),u.xp6(17),u.Oqu(u.lcZ(40,5,e.nombrepodcast)))},pipes:[r.Ov],styles:[""]}),t})();const Xe=[{path:"",component:ze,children:[{path:"",component:Ye},{path:"home",component:Ye},{path:"articles",loadChildren:()=>Promise.all([n.e(592),n.e(810)]).then(n.bind(n,8810)).then(t=>t.ArticlesModule)},{path:"podcast",loadChildren:()=>Promise.all([n.e(592),n.e(750)]).then(n.bind(n,750)).then(t=>t.PodcastModule)},{path:"**",redirectTo:"error/404"}]}];let tn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.ez,i.Bz.forChild(Xe),s.vi,o.XC,o.ZQ,o.HK,a.aw],i.Bz]}),t})()},1577:(t,e,n)=>{"use strict";n.d(e,{J:()=>d});var r=n(7574),s=n(8002),i=n(6782),o=n(1841),a=n(5721),u=n(7716),c=n(5093),l=n(7063),h=n(9082);let d=(()=>{class t{constructor(t,e,n,r){this.firestore=t,this.storage=e,this.http=n,this.share=r,this.httpOptions={headers:new o.WM({"Content-Type":"application/x-www-form-urlencoded"})},this.articlesCollection=this.firestore.collection("articles")}addArticle(t){return this.firestore.collection("articles").add(t)}notif(t){return this.http.post(a.z.url+"statique/notif_lataniere/",JSON.stringify(t),this.httpOptions)}uploadImage(t){const e=`article_images/${Date.now()}_${t.name}`,n=this.storage.ref(e),s=this.storage.upload(e,t);return new r.y(t=>{s.percentageChanges().subscribe(t=>{}),s.snapshotChanges().subscribe(e=>{"success"===e.state?n.getDownloadURL().subscribe(e=>{t.next(e),t.complete()}):"error"===e.state&&(t.error("Erreur lors de l'upload de l'image."),t.complete())})})}getArticles(){return this.firestore.collection("articles").snapshotChanges().pipe((0,s.U)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}updateArticle(t,e){return this.articlesCollection.doc(t).update(e)}deleteArticle(t){return this.firestore.collection("articles").doc(t).delete()}getNombreArticles(){return this.firestore.collection("articles").valueChanges().pipe((0,i.R)(this.share.ngUnsubscribe$),(0,s.U)(t=>t.length))}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(c.ST),u.LFG(l.Q1),u.LFG(o.eN),u.LFG(h.F))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},597:(t,e,n)=>{"use strict";n.d(e,{c:()=>d});var r=n(7574),s=n(8002),i=n(6782),o=n(1841),a=n(5721),u=n(7716),c=n(5093),l=n(7063),h=n(9082);let d=(()=>{class t{constructor(t,e,n,r){this.firestore=t,this.storage=e,this.http=n,this.share=r,this.httpOptions={headers:new o.WM({"Content-Type":"application/x-www-form-urlencoded"})},this.podcastsCollection=this.firestore.collection("podcasts")}addPodcast(t){return this.firestore.collection("podcasts").add(t)}notif(t){return this.http.post(a.z.url+"statique/notif_lataniere/",JSON.stringify(t),this.httpOptions)}uploadImage(t){const e=`podcast_images/${Date.now()}_${t.name}`,n=this.storage.ref(e),s=this.storage.upload(e,t);return new r.y(t=>{s.percentageChanges().subscribe(t=>{}),s.snapshotChanges().subscribe(e=>{"success"===e.state?n.getDownloadURL().subscribe(e=>{t.next(e),t.complete()}):"error"===e.state&&(t.error("Erreur lors de l'upload de l'image."),t.complete())})})}getPodcast(){return this.firestore.collection("podcasts").snapshotChanges().pipe((0,s.U)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}getUsers(){return this.firestore.collection("users").snapshotChanges().pipe((0,s.U)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}updatePodcast(t,e){return this.podcastsCollection.doc(t).update(e)}deletePodcast(t){return this.firestore.collection("podcasts").doc(t).delete()}getNombrePodcasts(){return this.firestore.collection("podcasts").valueChanges().pipe((0,i.R)(this.share.ngUnsubscribe$),(0,s.U)(t=>t.length))}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(c.ST),u.LFG(l.Q1),u.LFG(o.eN),u.LFG(h.F))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9082:(t,e,n)=>{"use strict";n.d(e,{F:()=>o});var r=n(6215),s=n(9765),i=n(7716);let o=(()=>{class t{constructor(){this.articleData=new r.X({}),this.podcastData=new r.X({}),this.ngUnsubscribe$=new s.xQ}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);